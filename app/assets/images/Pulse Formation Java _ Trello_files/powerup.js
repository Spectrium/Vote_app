!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=357)}([function(t,e,n){var r=n(2),o=n(15).f,i=n(12),a=n(13),s=n(76),c=n(104),u=n(52);t.exports=function(t,e){var n,l,f,d,h,p=t.target,g=t.global,m=t.stat;if(n=g?r:m?r[p]||s(p,{}):(r[p]||{}).prototype)for(l in e){if(d=e[l],f=t.noTargetGet?(h=o(n,l))&&h.value:n[l],!u(g?l:p+(m?".":"#")+l,t.forced)&&void 0!==f){if(typeof d==typeof f)continue;c(d,f)}(t.sham||f&&f.sham)&&i(d,"sham",!0),a(n,l,d,t)}}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){(function(e){var n="object",r=function(t){return t&&t.Math==Math&&t};t.exports=r(typeof globalThis==n&&globalThis)||r(typeof window==n&&window)||r(typeof self==n&&self)||r(typeof e==n&&e)||Function("return this")()}).call(this,n(100))},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var r=n(3);t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},function(t,e,n){var r=n(2),o=n(48),i=n(49),a=n(106),s=r.Symbol,c=o("wks");t.exports=function(t){return c[t]||(c[t]=a&&s[t]||(a?s:i)("Symbol."+t))}},function(t,e,n){"use strict";var r,o=n(8),i=n(2),a=n(3),s=n(11),c=n(64),u=n(12),l=n(13),f=n(9).f,d=n(27),h=n(42),p=n(5),g=n(49),m=i.DataView,v=m&&m.prototype,b=i.Int8Array,y=b&&b.prototype,w=i.Uint8ClampedArray,_=w&&w.prototype,E=b&&d(b),x=y&&d(y),S=Object.prototype,T=S.isPrototypeOf,$=p("toStringTag"),k=g("TYPED_ARRAY_TAG"),O=!(!i.ArrayBuffer||!m),C=O&&!!h&&"Opera"!==c(i.opera),A=!1,I={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},N=function(t){return a(t)&&s(I,c(t))};for(r in I)i[r]||(C=!1);if((!C||"function"!=typeof E||E===Function.prototype)&&(E=function(){throw TypeError("Incorrect invocation")},C))for(r in I)i[r]&&h(i[r],E);if((!C||!x||x===S)&&(x=E.prototype,C))for(r in I)i[r]&&h(i[r].prototype,x);if(C&&d(_)!==x&&h(_,x),o&&!s(x,$))for(r in A=!0,f(x,$,{get:function(){return a(this)?this[k]:void 0}}),I)i[r]&&u(i[r],k,r);O&&h&&d(v)!==S&&h(v,S),t.exports={NATIVE_ARRAY_BUFFER:O,NATIVE_ARRAY_BUFFER_VIEWS:C,TYPED_ARRAY_TAG:A&&k,aTypedArray:function(t){if(N(t))return t;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(t){if(h){if(T.call(E,t))return t}else for(var e in I)if(s(I,r)){var n=i[e];if(n&&(t===n||T.call(n,t)))return t}throw TypeError("Target is not a typed array constructor")},exportProto:function(t,e,n){if(o){if(n)for(var r in I){var a=i[r];a&&s(a.prototype,t)&&delete a.prototype[t]}x[t]&&!n||l(x,t,n?e:C&&y[t]||e)}},exportStatic:function(t,e,n){var r,a;if(o){if(h){if(n)for(r in I)(a=i[r])&&s(a,t)&&delete a[t];if(E[t]&&!n)return;try{return l(E,t,n?e:C&&b[t]||e)}catch(t){}}for(r in I)!(a=i[r])||a[t]&&!n||l(a,t,e)}},isView:function(t){var e=c(t);return"DataView"===e||s(I,e)},isTypedArray:N,TypedArray:E,TypedArrayPrototype:x}},function(t,e,n){var r=n(22),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,e,n){var r=n(1);t.exports=!r((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(8),o=n(101),i=n(4),a=n(25),s=Object.defineProperty;e.f=r?s:function(t,e,n){if(i(t),e=a(e,!0),i(n),o)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(16);t.exports=function(t){return Object(r(t))}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(8),o=n(9),i=n(36);t.exports=r?function(t,e,n){return o.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(2),o=n(48),i=n(12),a=n(11),s=n(76),c=n(102),u=n(21),l=u.get,f=u.enforce,d=String(c).split("toString");o("inspectSource",(function(t){return c.call(t)})),(t.exports=function(t,e,n,o){var c=!!o&&!!o.unsafe,u=!!o&&!!o.enumerable,l=!!o&&!!o.noTargetGet;"function"==typeof n&&("string"!=typeof e||a(n,"name")||i(n,"name",e),f(n).source=d.join("string"==typeof e?e:"")),t!==r?(c?!l&&t[e]&&(u=!0):delete t[e],u?t[e]=n:i(t,e,n)):u?t[e]=n:s(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&l(this).source||c.call(this)}))},function(t,e,n){var r=n(32),o=n(47),i=n(10),a=n(7),s=n(54),c=[].push,u=function(t){var e=1==t,n=2==t,u=3==t,l=4==t,f=6==t,d=5==t||f;return function(h,p,g,m){for(var v,b,y=i(h),w=o(y),_=r(p,g,3),E=a(w.length),x=0,S=m||s,T=e?S(h,E):n?S(h,0):void 0;E>x;x++)if((d||x in w)&&(b=_(v=w[x],x,y),t))if(e)T[x]=b;else if(b)switch(t){case 3:return!0;case 5:return v;case 6:return x;case 2:c.call(T,v)}else if(l)return!1;return f?-1:u||l?l:T}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6)}},function(t,e,n){var r=n(8),o=n(62),i=n(36),a=n(17),s=n(25),c=n(11),u=n(101),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=a(t),e=s(e,!0),u)try{return l(t,e)}catch(t){}if(c(t,e))return i(!o.f.call(t,e),t[e])}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},function(t,e,n){var r=n(47),o=n(16);t.exports=function(t){return r(o(t))}},function(t,e,n){var r=n(78),o=n(11),i=n(110),a=n(9).f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});o(e,t)||a(e,t,{value:i.f(t)})}},function(t,e,n){var r=n(16),o=/"/g;t.exports=function(t,e,n,i){var a=String(r(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+String(i).replace(o,"&quot;")+'"'),s+">"+a+"</"+e+">"}},function(t,e,n){var r=n(1);t.exports=function(t){return r((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},function(t,e,n){var r,o,i,a=n(103),s=n(2),c=n(3),u=n(12),l=n(11),f=n(63),d=n(50),h=s.WeakMap;if(a){var p=new h,g=p.get,m=p.has,v=p.set;r=function(t,e){return v.call(p,t,e),e},o=function(t){return g.call(p,t)||{}},i=function(t){return m.call(p,t)}}else{var b=f("state");d[b]=!0,r=function(t,e){return u(t,b,e),e},o=function(t){return l(t,b)?t[b]:{}},i=function(t){return l(t,b)}}t.exports={set:r,get:o,has:i,enforce:function(t){return i(t)?o(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!c(e)||(n=o(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(3);t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(9).f,o=n(11),i=n(5)("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},function(t,e,n){var r=n(11),o=n(10),i=n(63),a=n(84),s=i("IE_PROTO"),c=Object.prototype;t.exports=a?Object.getPrototypeOf:function(t){return t=o(t),r(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?c:null}},function(t,e,n){"use strict";var r=n(0),o=n(2),i=n(8),a=n(97),s=n(6),c=n(85),u=n(34),l=n(36),f=n(12),d=n(7),h=n(119),p=n(135),g=n(25),m=n(11),v=n(64),b=n(3),y=n(38),w=n(42),_=n(37).f,E=n(136),x=n(14).forEach,S=n(43),T=n(9),$=n(15),k=n(21),O=k.get,C=k.set,A=T.f,I=$.f,N=Math.round,R=o.RangeError,P=c.ArrayBuffer,M=c.DataView,j=s.NATIVE_ARRAY_BUFFER_VIEWS,U=s.TYPED_ARRAY_TAG,L=s.TypedArray,B=s.TypedArrayPrototype,D=s.aTypedArrayConstructor,F=s.isTypedArray,z=function(t,e){for(var n=0,r=e.length,o=new(D(t))(r);r>n;)o[n]=e[n++];return o},q=function(t,e){A(t,e,{get:function(){return O(this)[e]}})},V=function(t){var e;return t instanceof P||"ArrayBuffer"==(e=v(t))||"SharedArrayBuffer"==e},W=function(t,e){return F(t)&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},G=function(t,e){return W(t,e=g(e,!0))?l(2,t[e]):I(t,e)},K=function(t,e,n){return!(W(t,e=g(e,!0))&&b(n)&&m(n,"value"))||m(n,"get")||m(n,"set")||n.configurable||m(n,"writable")&&!n.writable||m(n,"enumerable")&&!n.enumerable?A(t,e,n):(t[e]=n.value,t)};i?(j||($.f=G,T.f=K,q(B,"buffer"),q(B,"byteOffset"),q(B,"byteLength"),q(B,"length")),r({target:"Object",stat:!0,forced:!j},{getOwnPropertyDescriptor:G,defineProperty:K}),t.exports=function(t,e,n,i){var s=t+(i?"Clamped":"")+"Array",c="get"+t,l="set"+t,g=o[s],m=g,v=m&&m.prototype,T={},$=function(t,n){A(t,n,{get:function(){return function(t,n){var r=O(t);return r.view[c](n*e+r.byteOffset,!0)}(this,n)},set:function(t){return function(t,n,r){var o=O(t);i&&(r=(r=N(r))<0?0:r>255?255:255&r),o.view[l](n*e+o.byteOffset,r,!0)}(this,n,t)},enumerable:!0})};j?a&&(m=n((function(t,n,r,o){return u(t,m,s),b(n)?V(n)?void 0!==o?new g(n,p(r,e),o):void 0!==r?new g(n,p(r,e)):new g(n):F(n)?z(m,n):E.call(m,n):new g(h(n))})),w&&w(m,L),x(_(g),(function(t){t in m||f(m,t,g[t])})),m.prototype=v):(m=n((function(t,n,r,o){u(t,m,s);var i,a,c,l=0,f=0;if(b(n)){if(!V(n))return F(n)?z(m,n):E.call(m,n);i=n,f=p(r,e);var g=n.byteLength;if(void 0===o){if(g%e)throw R("Wrong length");if((a=g-f)<0)throw R("Wrong length")}else if((a=d(o)*e)+f>g)throw R("Wrong length");c=a/e}else c=h(n),i=new P(a=c*e);for(C(t,{buffer:i,byteOffset:f,byteLength:a,length:c,view:new M(i)});l<c;)$(t,l++)})),w&&w(m,L),v=m.prototype=y(B)),v.constructor!==m&&f(v,"constructor",m),U&&f(v,U,s),T[s]=m,r({global:!0,forced:m!=g,sham:!j},T),"BYTES_PER_ELEMENT"in m||f(m,"BYTES_PER_ELEMENT",e),"BYTES_PER_ELEMENT"in v||f(v,"BYTES_PER_ELEMENT",e),S(s)}):t.exports=function(){}},function(t,e){t.exports=!1},function(t,e,n){var r=n(78),o=n(2),i=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?i(r[t])||i(o[t]):r[t]&&r[t][e]||o[t]&&o[t][e]}},function(t,e,n){var r=n(22),o=Math.max,i=Math.min;t.exports=function(t,e){var n=r(t);return n<0?o(n+e,0):i(n,e)}},function(t,e,n){var r=n(23);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(5),o=n(38),i=n(12),a=r("unscopables"),s=Array.prototype;null==s[a]&&i(s,a,o(null)),t.exports=function(t){s[a][t]=!0}},function(t,e){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}},function(t,e,n){var r=n(4),o=n(23),i=n(5)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||null==(n=r(a)[i])?e:o(n)}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(105),o=n(79).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,e,n){var r=n(4),o=n(107),i=n(79),a=n(50),s=n(108),c=n(75),u=n(63)("IE_PROTO"),l=function(){},f=function(){var t,e=c("iframe"),n=i.length;for(e.style.display="none",s.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),f=t.F;n--;)delete f.prototype[i[n]];return f()};t.exports=Object.create||function(t,e){var n;return null!==t?(l.prototype=r(t),n=new l,l.prototype=null,n[u]=t):n=f(),void 0===e?n:o(n,e)},a[u]=!0},function(t,e,n){"use strict";var r=n(25),o=n(9),i=n(36);t.exports=function(t,e,n){var a=r(e);a in t?o.f(t,a,i(0,n)):t[a]=n}},function(t,e,n){var r=n(50),o=n(3),i=n(11),a=n(9).f,s=n(49),c=n(59),u=s("meta"),l=0,f=Object.isExtensible||function(){return!0},d=function(t){a(t,u,{value:{objectID:"O"+ ++l,weakData:{}}})},h=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,u)){if(!f(t))return"F";if(!e)return"E";d(t)}return t[u].objectID},getWeakData:function(t,e){if(!i(t,u)){if(!f(t))return!0;if(!e)return!1;d(t)}return t[u].weakData},onFreeze:function(t){return c&&h.REQUIRED&&f(t)&&!i(t,u)&&d(t),t}};r[u]=!0},function(t,e,n){var r=n(24);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(4),o=n(117);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,i){return r(n),o(i),e?t.call(n,i):n.__proto__=i,n}}():void 0)},function(t,e,n){"use strict";var r=n(30),o=n(9),i=n(5),a=n(8),s=i("species");t.exports=function(t){var e=r(t),n=o.f;a&&e&&!e[s]&&n(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){var r=n(13);t.exports=function(t,e,n){for(var o in e)r(t,o,e[o],n);return t}},function(t,e,n){var r=n(16),o="["+n(69)+"]",i=RegExp("^"+o+o+"*"),a=RegExp(o+o+"*$"),s=function(t){return function(e){var n=String(r(e));return 1&t&&(n=n.replace(i,"")),2&t&&(n=n.replace(a,"")),n}};t.exports={start:s(1),end:s(2),trim:s(3)}},function(t,e){t.exports="https://api.butlerfortrello.com/"},function(t,e,n){var r=n(1),o=n(24),i="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==o(t)?i.call(t,""):Object(t)}:Object},function(t,e,n){var r=n(2),o=n(76),i=n(29),a=r["__core-js_shared__"]||o("__core-js_shared__",{});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.2.1",mode:i?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+r).toString(36)}},function(t,e){t.exports={}},function(t,e,n){var r=n(17),o=n(7),i=n(31),a=function(t){return function(e,n,a){var s,c=r(e),u=o(c.length),l=i(a,u);if(t&&n!=n){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((t||l in c)&&c[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},function(t,e,n){var r=n(1),o=/#|\.prototype\./,i=function(t,e){var n=s[a(t)];return n==u||n!=c&&("function"==typeof e?r(e):!!e)},a=i.normalize=function(t){return String(t).replace(o,".").toLowerCase()},s=i.data={},c=i.NATIVE="N",u=i.POLYFILL="P";t.exports=i},function(t,e,n){var r=n(105),o=n(79);t.exports=Object.keys||function(t){return r(t,o)}},function(t,e,n){var r=n(3),o=n(41),i=n(5)("species");t.exports=function(t,e){var n;return o(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!o(n.prototype)?r(n)&&null===(n=n[i])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},function(t,e,n){var r=n(1),o=n(5)("species");t.exports=function(t){return!r((function(){var e=[];return(e.constructor={})[o]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},function(t,e){t.exports={}},function(t,e,n){var r=n(64),o=n(56),i=n(5)("iterator");t.exports=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t,e,n){"use strict";var r=n(1);t.exports=function(t,e){var n=[][t];return!n||!r((function(){n.call(null,e||function(){throw 1},1)}))}},function(t,e,n){var r=n(1);t.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(t,e,n){var r=n(4),o=n(82),i=n(7),a=n(32),s=n(57),c=n(114),u=function(t,e){this.stopped=t,this.result=e};(t.exports=function(t,e,n,l,f){var d,h,p,g,m,v,b=a(e,n,l?2:1);if(f)d=t;else{if("function"!=typeof(h=s(t)))throw TypeError("Target is not iterable");if(o(h)){for(p=0,g=i(t.length);g>p;p++)if((m=l?b(r(v=t[p])[0],v[1]):b(t[p]))&&m instanceof u)return m;return new u(!1)}d=h.call(t)}for(;!(v=d.next()).done;)if((m=c(d,b,v.value,l))&&m instanceof u)return m;return new u(!1)}).stop=function(t){return new u(!0,t)}},function(t,e,n){var r=n(98),o=n(142).getSanitizingConverter(),i=function(t){return String(t).replace(/[&<>"'\/]/g,(function(t){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"}[t]}))};window.sanitize=i;var a=function(t){return o.makeHtml(t||"")};window.markdownToHtml=a;t.exports={sanitize:i,markdownToHtml:a,handleError:function(t,e){/^Invalid context, missing board/.test(e.message)||(/^Plugin disabled on board/.test(e.message)?console.log("[Butler] Power-Up disabled on board."):(Sentry.captureException(e),r.logError(e,t)))}}},function(t,e,n){"use strict";var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!r.call({1:2},1);e.f=i?function(t){var e=o(this,t);return!!e&&e.enumerable}:r},function(t,e,n){var r=n(48),o=n(49),i=r("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},function(t,e,n){var r=n(24),o=n(5)("toStringTag"),i="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?n:i?r(e):"Object"==(a=r(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,n){var r=n(5)("iterator"),o=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){o=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var i={};i[r]=function(){return{next:function(){return{done:n=!0}}}},t(i)}catch(t){}return n}},function(t,e,n){"use strict";var r=n(17),o=n(33),i=n(56),a=n(21),s=n(83),c=a.set,u=a.getterFor("Array Iterator");t.exports=s(Array,"Array",(function(t,e){c(this,{type:"Array Iterator",target:r(t),index:0,kind:e})}),(function(){var t=u(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values"),i.Arguments=i.Array,o("keys"),o("values"),o("entries")},function(t,e,n){"use strict";var r=n(0),o=n(2),i=n(52),a=n(13),s=n(40),c=n(60),u=n(34),l=n(3),f=n(1),d=n(65),h=n(26),p=n(86);t.exports=function(t,e,n,g,m){var v=o[t],b=v&&v.prototype,y=v,w=g?"set":"add",_={},E=function(t){var e=b[t];a(b,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(m&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return m&&!l(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(m&&!l(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(i(t,"function"!=typeof v||!(m||b.forEach&&!f((function(){(new v).entries().next()})))))y=n.getConstructor(e,t,g,w),s.REQUIRED=!0;else if(i(t,!0)){var x=new y,S=x[w](m?{}:-0,1)!=x,T=f((function(){x.has(1)})),$=d((function(t){new v(t)})),k=!m&&f((function(){for(var t=new v,e=5;e--;)t[w](e,e);return!t.has(-0)}));$||((y=e((function(e,n){u(e,y,t);var r=p(new v,e,y);return null!=n&&c(n,r[w],r,g),r}))).prototype=b,b.constructor=y),(T||k)&&(E("delete"),E("has"),g&&E("get")),(k||S)&&E(w),m&&b.clear&&delete b.clear}return _[t]=y,r({global:!0,forced:y!=v},_),h(y,t),m||n.setStrong(y,t,g),y}},function(t,e){var n=Math.expm1,r=Math.exp;t.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:r(t)-1}:n},function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},function(t,e,n){"use strict";var r=n(29),o=n(2),i=n(1);t.exports=r||!i((function(){var t=Math.random();__defineSetter__.call(null,t,(function(){})),delete o[t]}))},function(t,e,n){"use strict";var r=n(4);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){var r=n(22),o=n(16),i=function(t){return function(e,n){var i,a,s=String(o(e)),c=r(n),u=s.length;return c<0||c>=u?t?"":void 0:(i=s.charCodeAt(c))<55296||i>56319||c+1===u||(a=s.charCodeAt(c+1))<56320||a>57343?t?s.charAt(c):i:t?s.slice(c,c+2):a-56320+(i-55296<<10)+65536}};t.exports={codeAt:i(!1),charAt:i(!0)}},function(t,e,n){"use strict";var r=n(12),o=n(13),i=n(1),a=n(5),s=n(94),c=a("species"),u=!i((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),l=!i((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(t,e,n,f){var d=a(t),h=!i((function(){var e={};return e[d]=function(){return 7},7!=""[t](e)})),p=h&&!i((function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[c]=function(){return n}),n[d](""),!e}));if(!h||!p||"replace"===t&&!u||"split"===t&&!l){var g=/./[d],m=n(d,""[t],(function(t,e,n,r,o){return e.exec===s?h&&!o?{done:!0,value:g.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}})),v=m[0],b=m[1];o(String.prototype,t,v),o(RegExp.prototype,d,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)}),f&&r(RegExp.prototype[d],"sham",!0)}}},function(t,e,n){var r=n(24),o=n(94);t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var i=n.call(t,e);if("object"!=typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(t))throw TypeError("RegExp#exec called on incompatible receiver");return o.call(t,e)}},function(t,e,n){var r=n(2),o=n(3),i=r.document,a=o(i)&&o(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},function(t,e,n){var r=n(2),o=n(12);t.exports=function(t,e){try{o(r,t,e)}catch(n){r[t]=e}return e}},function(t,e,n){var r=n(30),o=n(37),i=n(80),a=n(4);t.exports=r("Reflect","ownKeys")||function(t){var e=o.f(a(t)),n=i.f;return n?e.concat(n(t)):e}},function(t,e,n){t.exports=n(2)},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){"use strict";var r=n(10),o=n(31),i=n(7);t.exports=function(t){for(var e=r(this),n=i(e.length),a=arguments.length,s=o(a>1?arguments[1]:void 0,n),c=a>2?arguments[2]:void 0,u=void 0===c?n:o(c,n);u>s;)e[s++]=t;return e}},function(t,e,n){var r=n(5),o=n(56),i=r("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||a[i]===t)}},function(t,e,n){"use strict";var r=n(0),o=n(115),i=n(27),a=n(42),s=n(26),c=n(12),u=n(13),l=n(5),f=n(29),d=n(56),h=n(116),p=h.IteratorPrototype,g=h.BUGGY_SAFARI_ITERATORS,m=l("iterator"),v=function(){return this};t.exports=function(t,e,n,l,h,b,y){o(n,e,l);var w,_,E,x=function(t){if(t===h&&O)return O;if(!g&&t in $)return $[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},S=e+" Iterator",T=!1,$=t.prototype,k=$[m]||$["@@iterator"]||h&&$[h],O=!g&&k||x(h),C="Array"==e&&$.entries||k;if(C&&(w=i(C.call(new t)),p!==Object.prototype&&w.next&&(f||i(w)===p||(a?a(w,p):"function"!=typeof w[m]&&c(w,m,v)),s(w,S,!0,!0),f&&(d[S]=v))),"values"==h&&k&&"values"!==k.name&&(T=!0,O=function(){return k.call(this)}),f&&!y||$[m]===O||c($,m,O),d[e]=O,h)if(_={values:x("values"),keys:b?O:x("keys"),entries:x("entries")},y)for(E in _)!g&&!T&&E in $||u($,E,_[E]);else r({target:e,proto:!0,forced:g||T},_);return _}},function(t,e,n){var r=n(1);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},function(t,e,n){"use strict";var r=n(2),o=n(8),i=n(6).NATIVE_ARRAY_BUFFER,a=n(12),s=n(44),c=n(1),u=n(34),l=n(22),f=n(7),d=n(119),h=n(37).f,p=n(9).f,g=n(81),m=n(26),v=n(21),b=v.get,y=v.set,w=r.ArrayBuffer,_=w,E=r.DataView,x=r.Math,S=r.RangeError,T=x.abs,$=x.pow,k=x.floor,O=x.log,C=x.LN2,A=function(t,e,n){var r,o,i,a=new Array(n),s=8*n-e-1,c=(1<<s)-1,u=c>>1,l=23===e?$(2,-24)-$(2,-77):0,f=t<0||0===t&&1/t<0?1:0,d=0;for((t=T(t))!=t||t===1/0?(o=t!=t?1:0,r=c):(r=k(O(t)/C),t*(i=$(2,-r))<1&&(r--,i*=2),(t+=r+u>=1?l/i:l*$(2,1-u))*i>=2&&(r++,i/=2),r+u>=c?(o=0,r=c):r+u>=1?(o=(t*i-1)*$(2,e),r+=u):(o=t*$(2,u-1)*$(2,e),r=0));e>=8;a[d++]=255&o,o/=256,e-=8);for(r=r<<e|o,s+=e;s>0;a[d++]=255&r,r/=256,s-=8);return a[--d]|=128*f,a},I=function(t,e){var n,r=t.length,o=8*r-e-1,i=(1<<o)-1,a=i>>1,s=o-7,c=r-1,u=t[c--],l=127&u;for(u>>=7;s>0;l=256*l+t[c],c--,s-=8);for(n=l&(1<<-s)-1,l>>=-s,s+=e;s>0;n=256*n+t[c],c--,s-=8);if(0===l)l=1-a;else{if(l===i)return n?NaN:u?-1/0:1/0;n+=$(2,e),l-=a}return(u?-1:1)*n*$(2,l-e)},N=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},R=function(t){return[255&t]},P=function(t){return[255&t,t>>8&255]},M=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},j=function(t){return A(t,23,4)},U=function(t){return A(t,52,8)},L=function(t,e){p(t.prototype,e,{get:function(){return b(this)[e]}})},B=function(t,e,n,r){var o=d(+n),i=b(t);if(o+e>i.byteLength)throw S("Wrong index");var a=b(i.buffer).bytes,s=o+i.byteOffset,c=a.slice(s,s+e);return r?c:c.reverse()},D=function(t,e,n,r,o,i){var a=d(+n),s=b(t);if(a+e>s.byteLength)throw S("Wrong index");for(var c=b(s.buffer).bytes,u=a+s.byteOffset,l=r(+o),f=0;f<e;f++)c[u+f]=l[i?f:e-f-1]};if(i){if(!c((function(){w(1)}))||!c((function(){new w(-1)}))||c((function(){return new w,new w(1.5),new w(NaN),"ArrayBuffer"!=w.name}))){for(var F,z=(_=function(t){return u(this,_),new w(d(t))}).prototype=w.prototype,q=h(w),V=0;q.length>V;)(F=q[V++])in _||a(_,F,w[F]);z.constructor=_}var W=new E(new _(2)),G=E.prototype.setInt8;W.setInt8(0,2147483648),W.setInt8(1,2147483649),!W.getInt8(0)&&W.getInt8(1)||s(E.prototype,{setInt8:function(t,e){G.call(this,t,e<<24>>24)},setUint8:function(t,e){G.call(this,t,e<<24>>24)}},{unsafe:!0})}else _=function(t){u(this,_,"ArrayBuffer");var e=d(t);y(this,{bytes:g.call(new Array(e),0),byteLength:e}),o||(this.byteLength=e)},E=function(t,e,n){u(this,E,"DataView"),u(t,_,"DataView");var r=b(t).byteLength,i=l(e);if(i<0||i>r)throw S("Wrong offset");if(i+(n=void 0===n?r-i:f(n))>r)throw S("Wrong length");y(this,{buffer:t,byteLength:n,byteOffset:i}),o||(this.buffer=t,this.byteLength=n,this.byteOffset=i)},o&&(L(_,"byteLength"),L(E,"buffer"),L(E,"byteLength"),L(E,"byteOffset")),s(E.prototype,{getInt8:function(t){return B(this,1,t)[0]<<24>>24},getUint8:function(t){return B(this,1,t)[0]},getInt16:function(t){var e=B(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=B(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return N(B(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return N(B(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return I(B(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return I(B(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){D(this,1,t,R,e)},setUint8:function(t,e){D(this,1,t,R,e)},setInt16:function(t,e){D(this,2,t,P,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){D(this,2,t,P,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){D(this,4,t,M,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){D(this,4,t,M,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){D(this,4,t,j,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){D(this,8,t,U,e,arguments.length>2?arguments[2]:void 0)}});m(_,"ArrayBuffer"),m(E,"DataView"),e.ArrayBuffer=_,e.DataView=E},function(t,e,n){var r=n(3),o=n(42);t.exports=function(t,e,n){var i,a;return o&&"function"==typeof(i=e.constructor)&&i!==n&&r(a=i.prototype)&&a!==n.prototype&&o(t,a),t}},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e,n){"use strict";var r=n(22),o=n(16);t.exports="".repeat||function(t){var e=String(o(this)),n="",i=r(t);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(e+=e))1&i&&(n+=e);return n}},function(t,e,n){var r,o,i,a=n(2),s=n(1),c=n(24),u=n(32),l=n(108),f=n(75),d=a.location,h=a.setImmediate,p=a.clearImmediate,g=a.process,m=a.MessageChannel,v=a.Dispatch,b=0,y={},w=function(t){if(y.hasOwnProperty(t)){var e=y[t];delete y[t],e()}},_=function(t){return function(){w(t)}},E=function(t){w(t.data)},x=function(t){a.postMessage(t+"",d.protocol+"//"+d.host)};h&&p||(h=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return y[++b]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},r(b),b},p=function(t){delete y[t]},"process"==c(g)?r=function(t){g.nextTick(_(t))}:v&&v.now?r=function(t){v.now(_(t))}:m?(i=(o=new m).port2,o.port1.onmessage=E,r=u(i.postMessage,i,1)):!a.addEventListener||"function"!=typeof postMessage||a.importScripts||s(x)?r="onreadystatechange"in f("script")?function(t){l.appendChild(f("script")).onreadystatechange=function(){l.removeChild(this),w(t)}}:function(t){setTimeout(_(t),0)}:(r=x,a.addEventListener("message",E,!1))),t.exports={set:h,clear:p}},function(t,e,n){var r=n(30);t.exports=r("navigator","userAgent")||""},function(t,e,n){var r=n(3),o=n(24),i=n(5)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==o(t))}},function(t,e,n){var r=n(91);t.exports=function(t){if(r(t))throw TypeError("The method doesn't accept regular expressions");return t}},function(t,e,n){var r=n(5)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,"/./"[t](e)}catch(t){}}return!1}},function(t,e,n){"use strict";var r,o,i=n(71),a=RegExp.prototype.exec,s=String.prototype.replace,c=a,u=(r=/a/,o=/b*/g,a.call(r,"a"),a.call(o,"a"),0!==r.lastIndex||0!==o.lastIndex),l=void 0!==/()??/.exec("")[1];(u||l)&&(c=function(t){var e,n,r,o,c=this;return l&&(n=new RegExp("^"+c.source+"$(?!\\s)",i.call(c))),u&&(e=c.lastIndex),r=a.call(c,t),u&&r&&(c.lastIndex=c.global?r.index+r[0].length:e),l&&r&&r.length>1&&s.call(r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r}),t.exports=c},function(t,e,n){"use strict";var r=n(72).charAt;t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},function(t,e,n){var r=n(1),o=n(69);t.exports=function(t){return r((function(){return!!o[t]()||"​᠎"!="​᠎"[t]()||o[t].name!==t}))}},function(t,e,n){var r=n(2),o=n(1),i=n(65),a=n(6).NATIVE_ARRAY_BUFFER_VIEWS,s=r.ArrayBuffer,c=r.Int8Array;t.exports=!a||!o((function(){c(1)}))||!o((function(){new c(-1)}))||!i((function(t){new c,new c(null),new c(1.5),new c(t)}),!0)||o((function(){return 1!==new c(new s(2),1,void 0).length}))},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=function(t,e){var r=t;return"object"===n(t)&&null!==t&&(r=function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e||"object"!==n(e))return e;if(-1!==r.indexOf(e))return"__circular__";r.push(e);var o={};return Object.getOwnPropertyNames(e).forEach((function(n){o[n]=t(e[n],r)})),o}(t)),JSON.stringify(r,void 0,e)},o=function(){return"function"==typeof ga&&(ga.apply(void 0,arguments),!0)},i=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var a=e[0]||"(null)";"object"===n(a)&&("function"==typeof a.stopPropagation&&a.stopPropagation(),"function"==typeof a.preventDefault&&a.preventDefault(),a.detail&&(a=a.detail),a.promise&&e.push(a.promise),"object"===n(a.reason)&&(a=a.reason));var s=this.type||"error_app",c="object"===n(a)?a.message||a.reason||"__unknown__":a,u=e.map(r).join(", ");return console.error("ERROR",s,c),u=u.replace(/token=[0-9a-fA-F]*/g,"token=<TOKEN>").replace(/"X-Butler-Trello-Token":\s*"[0-9a-fA-F]*"/g,'"X-Butler-Trello-Token": "<TOKEN>"').replace(/[0-9a-fA-F]{64}/g,""),!o("send","event",s,c,u)},a={init:function(){window.onerror=i.bind({type:"error_onerror"}),$(document).ajaxError(i.bind({type:"error_ajax"})),window.addEventListener("unhandledrejection",i.bind({type:"error_unhandledrejection"}))},logError:i,logEvent:function(t,e,n){o("send","event",t,e,n)},logVirtualPageview:function(t){o("set","page","".concat(document.location.pathname,"#").concat(t)),o("send","pageview")}};window.Log=a,t.exports=a},function(t,e,n){function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var i,a=n(46),s=TrelloPowerUp.util.makeErrorEnum("TrelloApi",["BadRequest","Conflict","Forbidden","InvalidResponse","NotFound","RateLimited","Timeout","Unauthorized","Unknown"]),c={400:s.BadRequest,401:s.Unauthorized,403:s.Forbidden,404:s.NotFound,409:s.Conflict,429:s.RateLimited},u=TrelloPowerUp.Promise,l={name:"Butler",key:"446cbc1d6532c596ddc610207ead5576",scope:"read,write,account"},f=function(t){return new u((function(e,n){var r=new XMLHttpRequest;r.open("GET",t,!0),r.timeout=3e4,r.onload=function(){if(200===r.status){var t;try{t=JSON.parse(r.responseText)}catch(t){return n(new s.Error.InvalidResponse(t.message))}return e(t)}return n((o=r.status,i=r.responseText,new(c[o]||s.Unknown)(i)));var o,i},r.ontimeout=function(){return n(new s.Error.Timeout)},r.send()}))},d=function(t){return t.requestToken(l).then((function(e){return i=e,t.set("member","private","token",e).then((function(){return e}))})).catch((function(e){throw t.alert({display:"error",duration:15,message:"Butler is unable to complete setup. Please refresh the page."}).catch((function(){})),e}))},h=TrelloPowerUp.util.makeErrorEnum("Registration",["NoNewUsers","NotConfirmed","NoEnterpriseBeta","Unknown"]),p={display:"error",duration:10,message:"Unable to complete setup. Please refresh the page and try again."},g=function(t,e){return new u((function(n,r){$.ajax("".concat(a,"auth"),{type:"POST",data:JSON.stringify({token:i,source:"powerup_trello",tz:moment.tz.guess(),apikey:l.key}),contentType:"application/json"}).done((function(o){var i;(t.hideAlert(),o.success)?n():("MEMBER_NOT_CONFIRMED"===o.error?(i=new h.NotConfirmed(o.error),e||t.alert({display:"error",duration:10,message:"Your Trello account is not confirmed. Please confirm your Trello account before using Butler."})):(t.alert(p),i=new h.Unknown(o.error),Sentry.captureException(i)),r(i))})).fail((function(e){return Sentry.captureMessage("Registration request failed: ".concat(e.status," - ").concat(e.statusText)),t.alert(p),r(new h.Unknown(e.responseText)),!1}))}))},m=function(t){return d(t).then((function(e){return g(t).catch((function(){})).then((function(){return e}))}))},v=function(t){return"string"==typeof t&&/^[0-9a-f]{64}$/i.test(t)},b=function(t,e){var n=t||window._trello;return new u((function(t,r){return i&&v(i)?t(i):n.get("member","private","token").then((function(r){return r&&v(r)?(i=r,t(r)):t(e?m(n):null)})).catch(r)}))},y=function(t,e){return b().then((function(n){if(!n)throw new s.Unauthorized("No token for API request. Path=".concat((t||"").replace(/[0-9a-f]{64}/gi,"[TOKEN]")));var i=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(n,!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({key:"446cbc1d6532c596ddc610207ead5576",token:n},e||{}),a=Object.keys(i).map((function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(i[t]))})).join("&");return"".concat("https://api.trello.com","/1/").concat(t,"?").concat(a)}))},w=function(){return b().then((function(t){return t?y("tokens/".concat(t)).then((function(t){return f(t)})):null}))};var _,E,x=function(t){return b(t,!1).then((function(t){return t&&v(t)})).catch((function(){return!1}))},S=null,T={authorize:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window._trello;return b(t,!0)},authorizeSoft:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window._trello;return b(t,!1)},checkToken:w,clearMemory:function(){i=null},ensureTokenValidity:function(t){return _||(S&&S>Date.now()-6e4?u.resolve():(S=Date.now(),_=b(t).then((function(e){return e?w().then((function(){return null})).catch(s.Unauthorized,s.Forbidden,s.NotFound,(function(){return m(t)})).catch(s,(function(t){Sentry.captureException(t)})):null})).catch((function(){})).finally((function(){_=null}))))},getToken:b,getActiveToken:function(){return i},reauthorize:m,registerIfNecessary:function(t,e,n,r){return E||(E=u.all([t.get("member","private","registered",!1),x(t),n.getLocalCommands()]).spread((function(n,o,i){return o&&n?null:0!==i.commands.length||e?(t.alert({message:"Powering-Up, give us a moment..."}),o?n?null:g(t,r).then((function(){return t.set("member","private","registered",!0)})):d(t).then((function(){return n?null:g(t,r).then((function(){return t.set("member","private","registered",!0)}))}))):null})).finally((function(){E=null})))},resetToken:d,RegistrationError:h},k={Error:s,Auth:T,getBoard:function(t,e){return y("boards/".concat(t),e).then((function(t){return f(t)}))},getMe:function(){return y("members/me").then((function(t){return f(t)}))},getMember:function(t){return y("members/".concat(t)).then((function(t){return f(t)}))},getMyBoards:function(t){return y("members/me/boards",t).then((function(t){return f(t)}))},getMyTeams:function(){return y("members/me/organizations").then((function(t){return f(t)}))}};window.Auth=T,window.TrelloApi=k,t.exports=k},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(8),o=n(1),i=n(75);t.exports=!r&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(48);t.exports=r("native-function-to-string",Function.toString)},function(t,e,n){var r=n(2),o=n(102),i=r.WeakMap;t.exports="function"==typeof i&&/native code/.test(o.call(i))},function(t,e,n){var r=n(11),o=n(77),i=n(15),a=n(9);t.exports=function(t,e){for(var n=o(e),s=a.f,c=i.f,u=0;u<n.length;u++){var l=n[u];r(t,l)||s(t,l,c(e,l))}}},function(t,e,n){var r=n(11),o=n(17),i=n(51).indexOf,a=n(50);t.exports=function(t,e){var n,s=o(t),c=0,u=[];for(n in s)!r(a,n)&&r(s,n)&&u.push(n);for(;e.length>c;)r(s,n=e[c++])&&(~i(u,n)||u.push(n));return u}},function(t,e,n){var r=n(1);t.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},function(t,e,n){var r=n(8),o=n(9),i=n(4),a=n(53);t.exports=r?Object.defineProperties:function(t,e){i(t);for(var n,r=a(e),s=r.length,c=0;s>c;)o.f(t,n=r[c++],e[n]);return t}},function(t,e,n){var r=n(30);t.exports=r("document","documentElement")},function(t,e,n){var r=n(17),o=n(37).f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==i.call(t)?function(t){try{return o(t)}catch(t){return a.slice()}}(t):o(r(t))}},function(t,e,n){e.f=n(5)},function(t,e,n){"use strict";var r=n(10),o=n(31),i=n(7),a=Math.min;t.exports=[].copyWithin||function(t,e){var n=r(this),s=i(n.length),c=o(t,s),u=o(e,s),l=arguments.length>2?arguments[2]:void 0,f=a((void 0===l?s:o(l,s))-u,s-c),d=1;for(u<c&&c<u+f&&(d=-1,u+=f-1,c+=f-1);f-- >0;)u in n?n[c]=n[u]:delete n[c],c+=d,u+=d;return n}},function(t,e,n){"use strict";var r=n(41),o=n(7),i=n(32),a=function(t,e,n,s,c,u,l,f){for(var d,h=c,p=0,g=!!l&&i(l,f,3);p<s;){if(p in n){if(d=g?g(n[p],p,e):n[p],u>0&&r(d))h=a(t,e,d,o(d.length),h,u-1)-1;else{if(h>=9007199254740991)throw TypeError("Exceed the acceptable array length");t[h]=d}h++}p++}return h};t.exports=a},function(t,e,n){"use strict";var r=n(32),o=n(10),i=n(114),a=n(82),s=n(7),c=n(39),u=n(57);t.exports=function(t){var e,n,l,f,d=o(t),h="function"==typeof this?this:Array,p=arguments.length,g=p>1?arguments[1]:void 0,m=void 0!==g,v=0,b=u(d);if(m&&(g=r(g,p>2?arguments[2]:void 0,2)),null==b||h==Array&&a(b))for(n=new h(e=s(d.length));e>v;v++)c(n,v,m?g(d[v],v):d[v]);else for(f=b.call(d),n=new h;!(l=f.next()).done;v++)c(n,v,m?i(f,g,[l.value,v],!0):l.value);return n.length=v,n}},function(t,e,n){var r=n(4);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&r(i.call(t)),e}}},function(t,e,n){"use strict";var r=n(116).IteratorPrototype,o=n(38),i=n(36),a=n(26),s=n(56),c=function(){return this};t.exports=function(t,e,n){var u=e+" Iterator";return t.prototype=o(r,{next:i(1,n)}),a(t,u,!1,!0),s[u]=c,t}},function(t,e,n){"use strict";var r,o,i,a=n(27),s=n(12),c=n(11),u=n(5),l=n(29),f=u("iterator"),d=!1;[].keys&&("next"in(i=[].keys())?(o=a(a(i)))!==Object.prototype&&(r=o):d=!0),null==r&&(r={}),l||c(r,f)||s(r,f,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:d}},function(t,e,n){var r=n(3);t.exports=function(t){if(!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},function(t,e,n){"use strict";var r=n(17),o=n(22),i=n(7),a=n(58),s=Math.min,c=[].lastIndexOf,u=!!c&&1/[1].lastIndexOf(1,-0)<0,l=a("lastIndexOf");t.exports=u||l?function(t){if(u)return c.apply(this,arguments)||0;var e=r(this),n=i(e.length),a=n-1;for(arguments.length>1&&(a=s(a,o(arguments[1]))),a<0&&(a=n+a);a>=0;a--)if(a in e&&e[a]===t)return a||0;return-1}:c},function(t,e,n){var r=n(22),o=n(7);t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=o(e);if(e!==n)throw RangeError("Wrong length or index");return n}},function(t,e,n){"use strict";var r=n(9).f,o=n(38),i=n(44),a=n(32),s=n(34),c=n(60),u=n(83),l=n(43),f=n(8),d=n(40).fastKey,h=n(21),p=h.set,g=h.getterFor;t.exports={getConstructor:function(t,e,n,u){var l=t((function(t,r){s(t,l,e),p(t,{type:e,index:o(null),first:void 0,last:void 0,size:0}),f||(t.size=0),null!=r&&c(r,t[u],t,n)})),h=g(e),m=function(t,e,n){var r,o,i=h(t),a=v(t,e);return a?a.value=n:(i.last=a={index:o=d(e,!0),key:e,value:n,previous:r=i.last,next:void 0,removed:!1},i.first||(i.first=a),r&&(r.next=a),f?i.size++:t.size++,"F"!==o&&(i.index[o]=a)),t},v=function(t,e){var n,r=h(t),o=d(e);if("F"!==o)return r.index[o];for(n=r.first;n;n=n.next)if(n.key==e)return n};return i(l.prototype,{clear:function(){for(var t=h(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,f?t.size=0:this.size=0},delete:function(t){var e=h(this),n=v(this,t);if(n){var r=n.next,o=n.previous;delete e.index[n.index],n.removed=!0,o&&(o.next=r),r&&(r.previous=o),e.first==n&&(e.first=r),e.last==n&&(e.last=o),f?e.size--:this.size--}return!!n},forEach:function(t){for(var e,n=h(this),r=a(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!v(this,t)}}),i(l.prototype,n?{get:function(t){var e=v(this,t);return e&&e.value},set:function(t,e){return m(this,0===t?0:t,e)}}:{add:function(t){return m(this,t=0===t?0:t,t)}}),f&&r(l.prototype,"size",{get:function(){return h(this).size}}),l},setStrong:function(t,e,n){var r=e+" Iterator",o=g(e),i=g(r);u(t,e,(function(t,e){p(this,{type:r,target:t,state:o(t),kind:e,last:void 0})}),(function(){for(var t=i(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),l(e)}}},function(t,e){var n=Math.log;t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:n(1+t)}},function(t,e,n){var r=n(3),o=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&o(t)===t}},function(t,e,n){var r=n(2),o=n(45).trim,i=n(69),a=r.parseFloat,s=1/a(i+"-0")!=-1/0;t.exports=s?function(t){var e=o(String(t)),n=a(e);return 0===n&&"-"==e.charAt(0)?-0:n}:a},function(t,e,n){var r=n(2),o=n(45).trim,i=n(69),a=r.parseInt,s=/^[+-]?0[Xx]/,c=8!==a(i+"08")||22!==a(i+"0x16");t.exports=c?function(t,e){var n=o(String(t));return a(n,e>>>0||(s.test(n)?16:10))}:a},function(t,e,n){"use strict";var r=n(8),o=n(1),i=n(53),a=n(80),s=n(62),c=n(10),u=n(47),l=Object.assign;t.exports=!l||o((function(){var t={},e={},n=Symbol();return t[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=l({},t)[n]||"abcdefghijklmnopqrst"!=i(l({},e)).join("")}))?function(t,e){for(var n=c(t),o=arguments.length,l=1,f=a.f,d=s.f;o>l;)for(var h,p=u(arguments[l++]),g=f?i(p).concat(f(p)):i(p),m=g.length,v=0;m>v;)h=g[v++],r&&!d.call(p,h)||(n[h]=p[h]);return n}:l},function(t,e,n){var r=n(8),o=n(53),i=n(17),a=n(62).f,s=function(t){return function(e){for(var n,s=i(e),c=o(s),u=c.length,l=0,f=[];u>l;)n=c[l++],r&&!a.call(s,n)||f.push(t?[n,s[n]]:s[n]);return f}};t.exports={entries:s(!0),values:s(!1)}},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,n){var r=n(2);t.exports=r.Promise},function(t,e,n){var r,o,i,a,s,c,u,l,f=n(2),d=n(15).f,h=n(24),p=n(89).set,g=n(90),m=f.MutationObserver||f.WebKitMutationObserver,v=f.process,b=f.Promise,y="process"==h(v),w=d(f,"queueMicrotask"),_=w&&w.value;_||(r=function(){var t,e;for(y&&(t=v.domain)&&t.exit();o;){e=o.fn,o=o.next;try{e()}catch(t){throw o?a():i=void 0,t}}i=void 0,t&&t.enter()},y?a=function(){v.nextTick(r)}:m&&!/(iphone|ipod|ipad).*applewebkit/i.test(g)?(s=!0,c=document.createTextNode(""),new m(r).observe(c,{characterData:!0}),a=function(){c.data=s=!s}):b&&b.resolve?(u=b.resolve(void 0),l=u.then,a=function(){l.call(u,r)}):a=function(){p.call(f,r)}),t.exports=_||function(t){var e={fn:t,next:void 0};i&&(i.next=e),o||(o=e,a()),i=e}},function(t,e,n){var r=n(4),o=n(3),i=n(131);t.exports=function(t,e){if(r(t),o(e)&&e.constructor===t)return e;var n=i.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){"use strict";var r=n(23),o=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)};t.exports.f=function(t){return new o(t)}},function(t,e,n){"use strict";var r=n(72).charAt,o=n(21),i=n(83),a=o.set,s=o.getterFor("String Iterator");i(String,"String",(function(t){a(this,{type:"String Iterator",string:String(t),index:0})}),(function(){var t,e=s(this),n=e.string,o=e.index;return o>=n.length?{value:void 0,done:!0}:(t=r(n,o),e.index+=t.length,{value:t,done:!1})}))},function(t,e,n){var r=n(7),o=n(88),i=n(16),a=Math.ceil,s=function(t){return function(e,n,s){var c,u,l=String(i(e)),f=l.length,d=void 0===s?" ":String(s),h=r(n);return h<=f||""==d?l:(c=h-f,(u=o.call(d,a(c/d.length))).length>c&&(u=u.slice(0,c)),t?l+u:u+l)}};t.exports={start:s(!1),end:s(!0)}},function(t,e,n){var r=n(90);t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r)},function(t,e,n){var r=n(22);t.exports=function(t,e){var n=r(t);if(n<0||n%e)throw RangeError("Wrong offset");return n}},function(t,e,n){var r=n(10),o=n(7),i=n(57),a=n(82),s=n(32),c=n(6).aTypedArrayConstructor;t.exports=function(t){var e,n,u,l,f,d=r(t),h=arguments.length,p=h>1?arguments[1]:void 0,g=void 0!==p,m=i(d);if(null!=m&&!a(m))for(f=m.call(d),d=[];!(l=f.next()).done;)d.push(l.value);for(g&&h>2&&(p=s(p,arguments[2],2)),n=o(d.length),u=new(c(this))(n),e=0;n>e;e++)u[e]=g?p(d[e],e):d[e];return u}},function(t,e,n){var r=n(23),o=n(10),i=n(47),a=n(7),s=function(t){return function(e,n,s,c){r(n);var u=o(e),l=i(u),f=a(u.length),d=t?f-1:0,h=t?-1:1;if(s<2)for(;;){if(d in l){c=l[d],d+=h;break}if(d+=h,t?d<0:f<=d)throw TypeError("Reduce of empty array with no initial value")}for(;t?d>=0:f>d;d+=h)d in l&&(c=n(c,l[d],d,u));return c}};t.exports={left:s(!1),right:s(!0)}},function(t,e,n){"use strict";var r=n(44),o=n(40).getWeakData,i=n(4),a=n(3),s=n(34),c=n(60),u=n(14),l=n(11),f=n(21),d=f.set,h=f.getterFor,p=u.find,g=u.findIndex,m=0,v=function(t){return t.frozen||(t.frozen=new b)},b=function(){this.entries=[]},y=function(t,e){return p(t.entries,(function(t){return t[0]===e}))};b.prototype={get:function(t){var e=y(this,t);if(e)return e[1]},has:function(t){return!!y(this,t)},set:function(t,e){var n=y(this,t);n?n[1]=e:this.entries.push([t,e])},delete:function(t){var e=g(this.entries,(function(e){return e[0]===t}));return~e&&this.entries.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,u){var f=t((function(t,r){s(t,f,e),d(t,{type:e,id:m++,frozen:void 0}),null!=r&&c(r,t[u],t,n)})),p=h(e),g=function(t,e,n){var r=p(t),a=o(i(e),!0);return!0===a?v(r).set(e,n):a[r.id]=n,t};return r(f.prototype,{delete:function(t){var e=p(this);if(!a(t))return!1;var n=o(t);return!0===n?v(e).delete(t):n&&l(n,e.id)&&delete n[e.id]},has:function(t){var e=p(this);if(!a(t))return!1;var n=o(t);return!0===n?v(e).has(t):n&&l(n,e.id)}}),r(f.prototype,n?{get:function(t){var e=p(this);if(a(t)){var n=o(t);return!0===n?v(e).get(t):n?n[e.id]:void 0}},set:function(t,e){return g(this,t,e)}}:{add:function(t){return g(this,t,!0)}}),f}}},function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,e,n){var r=n(1),o=n(5),i=n(29),a=o("iterator");t.exports=!r((function(){var t=new URL("b?e=1","http://a"),e=t.searchParams;return t.pathname="c%20d",i&&!t.toJSON||!e.sort||"http://a/c%20d?e=1"!==t.href||"1"!==e.get("e")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash}))},function(t,e,n){"use strict";n(66);var r=n(0),o=n(140),i=n(13),a=n(44),s=n(26),c=n(115),u=n(21),l=n(34),f=n(11),d=n(32),h=n(4),p=n(3),g=n(339),m=n(57),v=n(5)("iterator"),b=u.set,y=u.getterFor("URLSearchParams"),w=u.getterFor("URLSearchParamsIterator"),_=/\+/g,E=Array(4),x=function(t){return E[t-1]||(E[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))},S=function(t){try{return decodeURIComponent(t)}catch(e){return t}},T=function(t){var e=t.replace(_," "),n=4;try{return decodeURIComponent(e)}catch(t){for(;n;)e=e.replace(x(n--),S);return e}},$=/[!'()~]|%20/g,k={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},O=function(t){return k[t]},C=function(t){return encodeURIComponent(t).replace($,O)},A=function(t,e){if(e)for(var n,r,o=e.split("&"),i=0;i<o.length;)(n=o[i++]).length&&(r=n.split("="),t.push({key:T(r.shift()),value:T(r.join("="))}))},I=function(t){this.entries.length=0,A(this.entries,t)},N=function(t,e){if(t<e)throw TypeError("Not enough arguments")},R=c((function(t,e){b(this,{type:"URLSearchParamsIterator",iterator:g(y(t).entries),kind:e})}),"Iterator",(function(){var t=w(this),e=t.kind,n=t.iterator.next(),r=n.value;return n.done||(n.value="keys"===e?r.key:"values"===e?r.value:[r.key,r.value]),n})),P=function(){l(this,P,"URLSearchParams");var t,e,n,r,o,i,a,s=arguments.length>0?arguments[0]:void 0,c=this,u=[];if(b(c,{type:"URLSearchParams",entries:u,updateURL:function(){},updateSearchParams:I}),void 0!==s)if(p(s))if("function"==typeof(t=m(s)))for(e=t.call(s);!(n=e.next()).done;){if((o=(r=g(h(n.value))).next()).done||(i=r.next()).done||!r.next().done)throw TypeError("Expected sequence with length 2");u.push({key:o.value+"",value:i.value+""})}else for(a in s)f(s,a)&&u.push({key:a,value:s[a]+""});else A(u,"string"==typeof s?"?"===s.charAt(0)?s.slice(1):s:s+"")},M=P.prototype;a(M,{append:function(t,e){N(arguments.length,2);var n=y(this);n.entries.push({key:t+"",value:e+""}),n.updateURL()},delete:function(t){N(arguments.length,1);for(var e=y(this),n=e.entries,r=t+"",o=0;o<n.length;)n[o].key===r?n.splice(o,1):o++;e.updateURL()},get:function(t){N(arguments.length,1);for(var e=y(this).entries,n=t+"",r=0;r<e.length;r++)if(e[r].key===n)return e[r].value;return null},getAll:function(t){N(arguments.length,1);for(var e=y(this).entries,n=t+"",r=[],o=0;o<e.length;o++)e[o].key===n&&r.push(e[o].value);return r},has:function(t){N(arguments.length,1);for(var e=y(this).entries,n=t+"",r=0;r<e.length;)if(e[r++].key===n)return!0;return!1},set:function(t,e){N(arguments.length,1);for(var n,r=y(this),o=r.entries,i=!1,a=t+"",s=e+"",c=0;c<o.length;c++)(n=o[c]).key===a&&(i?o.splice(c--,1):(i=!0,n.value=s));i||o.push({key:a,value:s}),r.updateURL()},sort:function(){var t,e,n,r=y(this),o=r.entries,i=o.slice();for(o.length=0,n=0;n<i.length;n++){for(t=i[n],e=0;e<n;e++)if(o[e].key>t.key){o.splice(e,0,t);break}e===n&&o.push(t)}r.updateURL()},forEach:function(t){for(var e,n=y(this).entries,r=d(t,arguments.length>1?arguments[1]:void 0,3),o=0;o<n.length;)r((e=n[o++]).value,e.key,this)},keys:function(){return new R(this,"keys")},values:function(){return new R(this,"values")},entries:function(){return new R(this,"entries")}},{enumerable:!0}),i(M,v,M.entries),i(M,"toString",(function(){for(var t,e=y(this).entries,n=[],r=0;r<e.length;)t=e[r++],n.push(C(t.key)+"="+C(t.value));return n.join("&")}),{enumerable:!0}),s(P,"URLSearchParams"),r({global:!0,forced:!o},{URLSearchParams:P}),t.exports={URLSearchParams:P,getState:y}},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(){var t,o;function i(t){return t.replace(/<[^>]*>?/gi,u)}"object"===r(e)?(t=e,o=n(143).Converter):(t=window.Markdown,o=t.Converter),t.getSanitizingConverter=function(){var t=new o;return t.hooks.chain("postConversion",i),t.hooks.chain("postConversion",l),t};var a=/^(<\/?(b|blockquote|code|del|dd|dl|dt|em|h1|h2|h3|i|kbd|li|ol(?: start="\d+")?|p|pre|s|sup|sub|strong|strike|ul)>|<(br|hr)\s?\/?>)$/i,s=/^(<a\shref="((https?|ftp):\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)*[\]$]+"(\stitle="[^"<>]+")?\s?>|<\/a>)$/i,c=/^(<img\ssrc="(https?:\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)*[\]$]+"(\swidth="\d{1,3}")?(\sheight="\d{1,3}")?(\salt="[^"<>]*")?(\stitle="[^"<>]*")?\s?\/?>)$/i;function u(t){if(t.match(a)||t.match(s)||t.match(c))return t;var e=!1,n=t.replace(/^(<a href="|<img src=")([^"]*)/i,(function(t,n,r){return n+r.replace(/[^-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)*[\]$]/g,(function(t){return e=!0,"'"==t?"%27":encodeURIComponent(t)}))}));return e&&(n.match(s)||n.match(c))?n:""}function l(t){if(""==t)return"";var e,n,r=/<\/?\w+[^>]*(\s|$|>)/g,o=t.toLowerCase().match(r),i=(o||[]).length;if(0==i)return t;for(var a,s=[],c=[],u=!1,l=0;l<i;l++)if(e=o[l].replace(/<\/?(\w+).*/,"$1"),!(s[l]||"<p><img><br><li><hr>".search("<"+e+">")>-1)){if(n=o[l],a=-1,!/^<\//.test(n))for(var f=l+1;f<i;f++)if(!s[f]&&o[f]=="</"+e+">"){a=f;break}-1==a?u=c[l]=!0:s[a]=!0}if(!u)return t;l=0;return t=t.replace(r,(function(t){var e=c[l]?"":t;return l++,e}))}}()},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o;o="object"===r(e)?e:{},function(){function t(t){return t}function e(t){return!1}function n(){}function r(){}n.prototype={chain:function(e,n){var r=this[e];if(!r)throw new Error("unknown hook "+e);this[e]=r===t?n:function(t){var e=Array.prototype.slice.call(arguments,0);return e[0]=r.apply(null,e),n.apply(null,e)}},set:function(t,e){if(!this[t])throw new Error("unknown hook "+t);this[t]=e},addNoop:function(e){this[e]=t},addFalse:function(t){this[t]=e}},o.HookCollection=n,r.prototype={set:function(t,e){this["s_"+t]=e},get:function(t){return this["s_"+t]}},o.Converter=function(e){var o,i,a,s,c=this.hooks=new n;c.addNoop("plainLinkText"),c.addNoop("preConversion"),c.addNoop("postNormalization"),c.addNoop("preBlockGamut"),c.addNoop("postBlockGamut"),c.addNoop("preSpanGamut"),c.addNoop("postSpanGamut"),c.addNoop("postConversion");var u,l,f,d,h,p=t,g=t;(e=e||{}).nonAsciiLetters&&(u=/[Q\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376-\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0523\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0621-\u064a\u0660-\u0669\u066e-\u066f\u0671-\u06d3\u06d5\u06e5-\u06e6\u06ee-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07c0-\u07ea\u07f4-\u07f5\u07fa\u0904-\u0939\u093d\u0950\u0958-\u0961\u0966-\u096f\u0971-\u0972\u097b-\u097f\u0985-\u098c\u098f-\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc-\u09dd\u09df-\u09e1\u09e6-\u09f1\u0a05-\u0a0a\u0a0f-\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32-\u0a33\u0a35-\u0a36\u0a38-\u0a39\u0a59-\u0a5c\u0a5e\u0a66-\u0a6f\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2-\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0-\u0ae1\u0ae6-\u0aef\u0b05-\u0b0c\u0b0f-\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32-\u0b33\u0b35-\u0b39\u0b3d\u0b5c-\u0b5d\u0b5f-\u0b61\u0b66-\u0b6f\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99-\u0b9a\u0b9c\u0b9e-\u0b9f\u0ba3-\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0be6-\u0bef\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58-\u0c59\u0c60-\u0c61\u0c66-\u0c6f\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0-\u0ce1\u0ce6-\u0cef\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d28\u0d2a-\u0d39\u0d3d\u0d60-\u0d61\u0d66-\u0d6f\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32-\u0e33\u0e40-\u0e46\u0e50-\u0e59\u0e81-\u0e82\u0e84\u0e87-\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa-\u0eab\u0ead-\u0eb0\u0eb2-\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0ed0-\u0ed9\u0edc-\u0edd\u0f00\u0f20-\u0f29\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8b\u1000-\u102a\u103f-\u1049\u1050-\u1055\u105a-\u105d\u1061\u1065-\u1066\u106e-\u1070\u1075-\u1081\u108e\u1090-\u1099\u10a0-\u10c5\u10d0-\u10fa\u10fc\u1100-\u1159\u115f-\u11a2\u11a8-\u11f9\u1200-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u1676\u1681-\u169a\u16a0-\u16ea\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u17e0-\u17e9\u1810-\u1819\u1820-\u1877\u1880-\u18a8\u18aa\u1900-\u191c\u1946-\u196d\u1970-\u1974\u1980-\u19a9\u19c1-\u19c7\u19d0-\u19d9\u1a00-\u1a16\u1b05-\u1b33\u1b45-\u1b4b\u1b50-\u1b59\u1b83-\u1ba0\u1bae-\u1bb9\u1c00-\u1c23\u1c40-\u1c49\u1c4d-\u1c7d\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u203f-\u2040\u2054\u2071\u207f\u2090-\u2094\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183-\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2c6f\u2c71-\u2c7d\u2c80-\u2ce4\u2d00-\u2d25\u2d30-\u2d65\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3006\u3031-\u3035\u303b-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31b7\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fc3\ua000-\ua48c\ua500-\ua60c\ua610-\ua62b\ua640-\ua65f\ua662-\ua66e\ua67f-\ua697\ua717-\ua71f\ua722-\ua788\ua78b-\ua78c\ua7fb-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8d0-\ua8d9\ua900-\ua925\ua930-\ua946\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa50-\uaa59\uac00-\ud7a3\uf900-\ufa2d\ufa30-\ufa6a\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe33-\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/g,l="Q".charCodeAt(0),f="A".charCodeAt(0),d="Z".charCodeAt(0),h="a".charCodeAt(0)-d-1,p=function(t){return t.replace(u,(function(t){for(var e,n=t.charCodeAt(0),r="";n>0;)(e=n%51+f)>=l&&e++,e>d&&(e+=h),r=String.fromCharCode(e)+r,n=n/51|0;return"Q"+r+"Q"}))},g=function(t){return t.replace(/Q([A-PR-Za-z]{1,3})Q/g,(function(t,e){for(var n,r=0,o=0;o<e.length;o++)(n=e.charCodeAt(o))>d&&(n-=h),n>l&&n--,r=51*r+(n-=f);return String.fromCharCode(r)}))});var m=e.asteriskIntraWordEmphasis?function(t){return-1===t.indexOf("*")&&-1===t.indexOf("_")?t:(t=(t=(t=p(t)).replace(/(?=[^\r][*_]|[*_])(^|(?=\W__|(?!\*)[\W_]\*\*|\w\*\*\w)[^\r])(\*\*|__)(?!\2)(?=\S)((?:|[^\r]*?(?!\2)[^\r])(?=\S_|\w|\S\*\*(?:[\W_]|$)).)(?=__(?:\W|$)|\*\*(?:[^*]|$))\2/g,"$1<strong>$3</strong>")).replace(/(?=[^\r][*_]|[*_])(^|(?=\W_|(?!\*)(?:[\W_]\*|\D\*(?=\w)\D))[^\r])(\*|_)(?!\2\2\2)(?=\S)((?:(?!\2)[^\r])*?(?=[^\s_]_|(?=\w)\D\*\D|[^\s*]\*(?:[\W_]|$)).)(?=_(?:\W|$)|\*(?:[^*]|$))\2/g,"$1<em>$3</em>"),g(t))}:function(t){return-1===t.indexOf("*")&&-1===t.indexOf("_")?t:(t=(t=(t=p(t)).replace(/(^|[\W_])(?:(?!\1)|(?=^))(\*|_)\2(?=\S)([^\r]*?\S)\2\2(?!\2)(?=[\W_]|$)/g,"$1<strong>$3</strong>")).replace(/(^|[\W_])(?:(?!\1)|(?=^))(\*|_)(?=\S)((?:(?!\2)[^\r])*?\S)\2(?!\2)(?=[\W_]|$)/g,"$1<em>$3</em>"),g(t))};function v(t){return t=(t=(t=(t=(t=t.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,y)).replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,y)).replace(/\n[ ]{0,3}((<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,y)).replace(/\n\n[ ]{0,3}(<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>[ \t]*(?=\n{2,}))/g,y)).replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,y)}function b(t){return t=t.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(a.push(t)-1)+"K\n\n"}function y(t,e){return b(e)}this.makeHtml=function(t){if(o)throw new Error("Recursive call to converter.makeHtml");return o=new r,i=new r,a=[],s=0,t=(t=P(t="\n\n"+(t=(t=(t=(t=(t=c.preConversion(t)).replace(/~/g,"~T")).replace(/\$/g,"~D")).replace(/\r\n/g,"\n")).replace(/\r/g,"\n"))+"\n\n")).replace(/^[ \t]+$/gm,""),t=(t=(t=function(t){return t=t.replace(/~E(\d+)E/g,(function(t,e){var n=parseInt(e);return String.fromCharCode(n)}))}(t=_(t=function(t){return t=t.replace(/^[ ]{0,3}\[([^\[\]]+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?(?=\s|$)[ \t]*\n?[ \t]*((\n*)["(](.+?)[")][ \t]*)?(\n+)/gm,(function(t,e,n,r,a,s,c){return e=e.toLowerCase(),o.set(e,C(n)),a?r+c:(s&&i.set(e,s.replace(/"/g,"&quot;")),"")}))}(t=v(t=c.postNormalization(t)))))).replace(/~D/g,"$$")).replace(/~T/g,"~"),t=c.postConversion(t),a=i=o=null,t};var w=function(t){return _(t)};function _(t,e,n){return t=function(t){return t=t.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,(function(t,e){var n=e;return b("<blockquote>\n"+(n=(n=(n=_(n=(n=(n=n.replace(/^[ \t]*>[ \t]?/gm,"~0")).replace(/~0/g,"")).replace(/^[ \t]+$/gm,""))).replace(/(^|\n)/g,"$1  ")).replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,(function(t,e){var n=e;return n=(n=n.replace(/^  /gm,"~0")).replace(/~0/g,"")})))+"\n</blockquote>")}))}(t=function(t){return t=(t=(t+="~0").replace(/(?:\n\n|^\n?)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,(function(t,e,n){var r=e,o=n;return"\n\n"+(r="<pre><code>"+(r=(r=(r=P(r=O(R(r)))).replace(/^\n+/g,"")).replace(/\n+$/g,""))+"\n</code></pre>")+"\n\n"+o}))).replace(/~0/,"")}(t=function(t,e){t+="~0";var n=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;s?t=t.replace(n,(function(t,n,r){var o,i=n,a=r.search(/[*+-]/g)>-1?"ul":"ol";"ol"===a&&(o=parseInt(r,10));var s=k(i,a,e),c="<"+a;return o&&1!==o&&(c+=' start="'+o+'"'),s=c+">"+(s=s.replace(/\s+$/,""))+"</"+a+">\n"})):(n=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,t=t.replace(n,(function(t,e,n,r){var o,i=e,a=n,s=r.search(/[*+-]/g)>-1?"ul":"ol";"ol"===s&&(o=parseInt(r,10));var c=k(a,s),u="<"+s;return o&&1!==o&&(u+=' start="'+o+'"'),c=i+u+">\n"+c+"</"+s+">\n"})));return t=t.replace(/~0/,"")}(t=(t=(t=(t=function(t){return t=(t=(t=t.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,(function(t,e){return"<h1>"+E(e)+"</h1>\n\n"}))).replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,(function(t,e){return"<h2>"+E(e)+"</h2>\n\n"}))).replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,(function(t,e,n){var r=e.length;return"<h"+r+">"+E(n)+"</h"+r+">\n\n"}))}(t=c.preBlockGamut(t,w))).replace(/^[ ]{0,2}( ?\*){3,}[ \t]*$/gm,"<hr />\n")).replace(/^[ ]{0,2}( ?-){3,}[ \t]*$/gm,"<hr />\n")).replace(/^[ ]{0,2}( ?_){3,}[ \t]*$/gm,"<hr />\n")))),t=function(t,e,n){for(var r=(t=(t=t.replace(/^\n+/g,"")).replace(/\n+$/g,"")).split(/\n{2,}/g),o=[],i=/~K(\d+)K/,s=r.length,c=0;c<s;c++){var u=r[c];i.test(u)?o.push(u):/\S/.test(u)&&(u=(u=E(u)).replace(/^([ \t]*)/g,n?"":"<p>"),n||(u+="</p>"),o.push(u))}if(!e){s=o.length;for(c=0;c<s;c++)for(var l=!0;l;)l=!1,o[c]=o[c].replace(/~K(\d+)K/g,(function(t,e){return l=!0,a[e]}))}return o.join("\n\n")}(t=v(t=c.postBlockGamut(t,w)),e,n)}function E(t){return t=C(t=(t=function(t){t=(t=p(t)).replace(A,N),t=g(t);return t=t.replace(/<((https?|ftp):[^'">\s]+)>/gi,(function(t,e){return'<a href="'+M(e)+'">'+c.plainLinkText(e)+"</a>"}))}(t=function(t){return-1===t.indexOf("[")?t:t=(t=(t=t.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,x)).replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?((?:\([^)]*\)|[^()\s])*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,x)).replace(/(\[([^\[\]]+)\])()()()()()/g,x)}(t=function(t){return-1===t.indexOf("![")?t:t=(t=t.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,T)).replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,T)}(t=function(t){return t=(t=t.replace(/\\(\\)/g,U)).replace(/\\([`*_{}\[\]()>#+-.!])/g,U)}(t=function(t){return t=t.replace(/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>)/gi,(function(t){var e=t.replace(/(.)<\/?code>(?=.)/g,"$1`");return e=j(e,"!"==t.charAt(1)?"\\`*_/":"\\`*_")}))}(t=function(t){return t=t.replace(/(^|[^\\`])(`+)(?!`)([^\r]*?[^`])\2(?!`)/gm,(function(t,e,n,r,o){var i=r;return e+"<code>"+(i=(i=O(i=(i=i.replace(/^([ \t]*)/g,"")).replace(/[ \t]*$/g,""))).replace(/:\/\//g,"~P"))+"</code>"}))}(t=c.preSpanGamut(t)))))))).replace(/~P/g,"://")),t=(t=m(t)).replace(/  +\n/g," <br>\n"),t=c.postSpanGamut(t)}function x(t,e,n,r,a,s,c,u){null==u&&(u="");var l=e,f=n.replace(/:\/\//g,"~P"),d=r.toLowerCase(),h=a,p=u;if(""==h)if(""==d&&(d=f.toLowerCase().replace(/ ?\n/g," ")),h="#"+d,null!=o.get(d))h=o.get(d),null!=i.get(d)&&(p=i.get(d));else{if(!(l.search(/\(\s*\)$/m)>-1))return l;h=""}var g='<a href="'+(h=M(h))+'"';return""!=p&&(g+=' title="'+(p=j(p=S(p),"*_"))+'"'),g+=">"+f+"</a>"}function S(t){return t.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function T(t,e,n,r,a,s,c,u){var l=e,f=n,d=r.toLowerCase(),h=a,p=u;if(p||(p=""),""==h){if(""==d&&(d=f.toLowerCase().replace(/ ?\n/g," ")),h="#"+d,null==o.get(d))return l;h=o.get(d),null!=i.get(d)&&(p=i.get(d))}f=j(S(f),"*_[]()");var g='<img src="'+(h=j(h,"*_"))+'" alt="'+f+'"';return g+=' title="'+(p=j(p=S(p),"*_"))+'"',g+=" />"}var $={ol:"\\d+[.]",ul:"[*+-]"};function k(t,e,n){s++,t=t.replace(/\n{2,}$/,"\n"),t+="~0";var r=$[e],o=new RegExp("(^[ \\t]*)("+r+")[ \\t]+([^\\r]+?(\\n+))(?=(~0|\\1("+r+")[ \\t]+))","gm"),i=!1;return t=(t=t.replace(o,(function(t,e,n,r){var o=r,a=/\n\n$/.test(o),s=a||o.search(/\n{2,}/)>-1||i;return o=_(R(o),!0,!s),i=a,"<li>"+o+"</li>\n"}))).replace(/~0/g,""),s--,t}function O(t){return t=j(t=(t=(t=t.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;"),"*_{}[]\\",!1)}function C(t){return t=(t=t.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;")).replace(/<(?![a-z\/?!]|~D)/gi,"&lt;")}var A=new RegExp('(="|<)?\\b(https?|ftp)(://[-A-Z0-9+&@#/%?=~_|[\\]()!:,.;]*[-A-Z0-9+&@#/%=~_|[\\])])(?=$|\\W)',"gi"),I=new RegExp("[-A-Z0-9+&@#/%=~_|[\\])]","i");function N(t,e,n,r){if(e)return t;if(")"!==r.charAt(r.length-1))return"<"+n+r+">";for(var o=r.match(/[()]/g),i=0,a=0;a<o.length;a++)"("===o[a]?i<=0?i=1:i++:i--;var s="";if(i<0){var c=new RegExp("\\){1,"+-i+"}$");r=r.replace(c,(function(t){return s=t,""}))}if(s){var u=r.charAt(r.length-1);I.test(u)||(s=u+s,r=r.substr(0,r.length-1))}return"<"+n+r+">"+s}function R(t){return t=(t=t.replace(/^(\t|[ ]{1,4})/gm,"~0")).replace(/~0/g,"")}function P(t){if(!/\t/.test(t))return t;var e,n=["    ","   ","  "," "],r=0;return t.replace(/[\n\t]/g,(function(t,o){return"\n"===t?(r=o+1,t):(e=(o-r)%4,r=o+1,n[e])}))}function M(t){return t=j(t=S(t),"*_:()[]")}function j(t,e,n){var r="(["+e.replace(/([\[\]\\])/g,"\\$1")+"])";n&&(r="\\\\"+r);var o=new RegExp(r,"g");return t=t.replace(o,U)}function U(t,e){return"~E"+e.charCodeAt(0)+"E"}}}()},function(t,e,n){"use strict";var r=n(0),o=n(2),i=n(29),a=n(8),s=n(106),c=n(1),u=n(11),l=n(41),f=n(3),d=n(4),h=n(10),p=n(17),g=n(25),m=n(36),v=n(38),b=n(53),y=n(37),w=n(109),_=n(80),E=n(15),x=n(9),S=n(62),T=n(12),$=n(13),k=n(48),O=n(63),C=n(50),A=n(49),I=n(5),N=n(110),R=n(18),P=n(26),M=n(21),j=n(14).forEach,U=O("hidden"),L=I("toPrimitive"),B=M.set,D=M.getterFor("Symbol"),F=Object.prototype,z=o.Symbol,q=o.JSON,V=q&&q.stringify,W=E.f,G=x.f,K=w.f,J=S.f,Q=k("symbols"),H=k("op-symbols"),X=k("string-to-symbol-registry"),Y=k("symbol-to-string-registry"),Z=k("wks"),tt=o.QObject,et=!tt||!tt.prototype||!tt.prototype.findChild,nt=a&&c((function(){return 7!=v(G({},"a",{get:function(){return G(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=W(F,e);r&&delete F[e],G(t,e,n),r&&t!==F&&G(F,e,r)}:G,rt=function(t,e){var n=Q[t]=v(z.prototype);return B(n,{type:"Symbol",tag:t,description:e}),a||(n.description=e),n},ot=s&&"symbol"==typeof z.iterator?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof z},it=function(t,e,n){t===F&&it(H,e,n),d(t);var r=g(e,!0);return d(n),u(Q,r)?(n.enumerable?(u(t,U)&&t[U][r]&&(t[U][r]=!1),n=v(n,{enumerable:m(0,!1)})):(u(t,U)||G(t,U,m(1,{})),t[U][r]=!0),nt(t,r,n)):G(t,r,n)},at=function(t,e){d(t);var n=p(e),r=b(n).concat(lt(n));return j(r,(function(e){a&&!st.call(n,e)||it(t,e,n[e])})),t},st=function(t){var e=g(t,!0),n=J.call(this,e);return!(this===F&&u(Q,e)&&!u(H,e))&&(!(n||!u(this,e)||!u(Q,e)||u(this,U)&&this[U][e])||n)},ct=function(t,e){var n=p(t),r=g(e,!0);if(n!==F||!u(Q,r)||u(H,r)){var o=W(n,r);return!o||!u(Q,r)||u(n,U)&&n[U][r]||(o.enumerable=!0),o}},ut=function(t){var e=K(p(t)),n=[];return j(e,(function(t){u(Q,t)||u(C,t)||n.push(t)})),n},lt=function(t){var e=t===F,n=K(e?H:p(t)),r=[];return j(n,(function(t){!u(Q,t)||e&&!u(F,t)||r.push(Q[t])})),r};s||($((z=function(){if(this instanceof z)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=A(t),n=function(t){this===F&&n.call(H,t),u(this,U)&&u(this[U],e)&&(this[U][e]=!1),nt(this,e,m(1,t))};return a&&et&&nt(F,e,{configurable:!0,set:n}),rt(e,t)}).prototype,"toString",(function(){return D(this).tag})),S.f=st,x.f=it,E.f=ct,y.f=w.f=ut,_.f=lt,a&&(G(z.prototype,"description",{configurable:!0,get:function(){return D(this).description}}),i||$(F,"propertyIsEnumerable",st,{unsafe:!0})),N.f=function(t){return rt(I(t),t)}),r({global:!0,wrap:!0,forced:!s,sham:!s},{Symbol:z}),j(b(Z),(function(t){R(t)})),r({target:"Symbol",stat:!0,forced:!s},{for:function(t){var e=String(t);if(u(X,e))return X[e];var n=z(e);return X[e]=n,Y[n]=e,n},keyFor:function(t){if(!ot(t))throw TypeError(t+" is not a symbol");if(u(Y,t))return Y[t]},useSetter:function(){et=!0},useSimple:function(){et=!1}}),r({target:"Object",stat:!0,forced:!s,sham:!a},{create:function(t,e){return void 0===e?v(t):at(v(t),e)},defineProperty:it,defineProperties:at,getOwnPropertyDescriptor:ct}),r({target:"Object",stat:!0,forced:!s},{getOwnPropertyNames:ut,getOwnPropertySymbols:lt}),r({target:"Object",stat:!0,forced:c((function(){_.f(1)}))},{getOwnPropertySymbols:function(t){return _.f(h(t))}}),q&&r({target:"JSON",stat:!0,forced:!s||c((function(){var t=z();return"[null]"!=V([t])||"{}"!=V({a:t})||"{}"!=V(Object(t))}))},{stringify:function(t){for(var e,n,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=e=r[1],(f(e)||void 0!==t)&&!ot(t))return l(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!ot(e))return e}),r[1]=e,V.apply(q,r)}}),z.prototype[L]||T(z.prototype,L,z.prototype.valueOf),P(z,"Symbol"),C[U]=!0},function(t,e,n){"use strict";var r=n(0),o=n(8),i=n(2),a=n(11),s=n(3),c=n(9).f,u=n(104),l=i.Symbol;if(o&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var f={},d=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof d?new l(t):void 0===t?l():l(t);return""===t&&(f[e]=!0),e};u(d,l);var h=d.prototype=l.prototype;h.constructor=d;var p=h.toString,g="Symbol(test)"==String(l("test")),m=/^Symbol\((.*)\)[^)]+$/;c(h,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=p.call(t);if(a(f,t))return"";var n=g?e.slice(7,-1):e.replace(m,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:d})}},function(t,e,n){n(18)("asyncIterator")},function(t,e,n){n(18)("hasInstance")},function(t,e,n){n(18)("isConcatSpreadable")},function(t,e,n){n(18)("iterator")},function(t,e,n){n(18)("match")},function(t,e,n){n(18)("replace")},function(t,e,n){n(18)("search")},function(t,e,n){n(18)("species")},function(t,e,n){n(18)("split")},function(t,e,n){n(18)("toPrimitive")},function(t,e,n){n(18)("toStringTag")},function(t,e,n){n(18)("unscopables")},function(t,e,n){"use strict";var r=n(0),o=n(1),i=n(41),a=n(3),s=n(10),c=n(7),u=n(39),l=n(54),f=n(55),d=n(5)("isConcatSpreadable"),h=!o((function(){var t=[];return t[d]=!1,t.concat()[0]!==t})),p=f("concat"),g=function(t){if(!a(t))return!1;var e=t[d];return void 0!==e?!!e:i(t)};r({target:"Array",proto:!0,forced:!h||!p},{concat:function(t){var e,n,r,o,i,a=s(this),f=l(a,0),d=0;for(e=-1,r=arguments.length;e<r;e++)if(i=-1===e?a:arguments[e],g(i)){if(d+(o=c(i.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<o;n++,d++)n in i&&u(f,d,i[n])}else{if(d>=9007199254740991)throw TypeError("Maximum allowed index exceeded");u(f,d++,i)}return f.length=d,f}})},function(t,e,n){var r=n(0),o=n(111),i=n(33);r({target:"Array",proto:!0},{copyWithin:o}),i("copyWithin")},function(t,e,n){var r=n(0),o=n(81),i=n(33);r({target:"Array",proto:!0},{fill:o}),i("fill")},function(t,e,n){"use strict";var r=n(0),o=n(14).filter;r({target:"Array",proto:!0,forced:!n(55)("filter")},{filter:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var r=n(0),o=n(14).find,i=n(33),a=!0;"find"in[]&&Array(1).find((function(){a=!1})),r({target:"Array",proto:!0,forced:a},{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),i("find")},function(t,e,n){"use strict";var r=n(0),o=n(14).findIndex,i=n(33),a=!0;"findIndex"in[]&&Array(1).findIndex((function(){a=!1})),r({target:"Array",proto:!0,forced:a},{findIndex:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),i("findIndex")},function(t,e,n){"use strict";var r=n(0),o=n(112),i=n(10),a=n(7),s=n(22),c=n(54);r({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,e=i(this),n=a(e.length),r=c(e,0);return r.length=o(r,e,e,n,0,void 0===t?1:s(t)),r}})},function(t,e,n){"use strict";var r=n(0),o=n(112),i=n(10),a=n(7),s=n(23),c=n(54);r({target:"Array",proto:!0},{flatMap:function(t){var e,n=i(this),r=a(n.length);return s(t),(e=c(n,0)).length=o(e,n,n,r,0,1,t,arguments.length>1?arguments[1]:void 0),e}})},function(t,e,n){var r=n(0),o=n(113);r({target:"Array",stat:!0,forced:!n(65)((function(t){Array.from(t)}))},{from:o})},function(t,e,n){"use strict";var r=n(0),o=n(51).includes,i=n(33);r({target:"Array",proto:!0},{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),i("includes")},function(t,e,n){"use strict";var r=n(0),o=n(51).indexOf,i=n(58),a=[].indexOf,s=!!a&&1/[1].indexOf(1,-0)<0,c=i("indexOf");r({target:"Array",proto:!0,forced:s||c},{indexOf:function(t){return s?a.apply(this,arguments)||0:o(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var r=n(0),o=n(47),i=n(17),a=n(58),s=[].join,c=o!=Object,u=a("join",",");r({target:"Array",proto:!0,forced:c||u},{join:function(t){return s.call(i(this),void 0===t?",":t)}})},function(t,e,n){var r=n(0),o=n(118);r({target:"Array",proto:!0,forced:o!==[].lastIndexOf},{lastIndexOf:o})},function(t,e,n){"use strict";var r=n(0),o=n(14).map;r({target:"Array",proto:!0,forced:!n(55)("map")},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var r=n(0),o=n(1),i=n(39);r({target:"Array",stat:!0,forced:o((function(){function t(){}return!(Array.of.call(t)instanceof t)}))},{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)i(n,t,arguments[t++]);return n.length=e,n}})},function(t,e,n){"use strict";var r=n(0),o=n(41),i=[].reverse,a=[1,2];r({target:"Array",proto:!0,forced:String(a)===String(a.reverse())},{reverse:function(){return o(this)&&(this.length=this.length),i.call(this)}})},function(t,e,n){"use strict";var r=n(0),o=n(3),i=n(41),a=n(31),s=n(7),c=n(17),u=n(39),l=n(55),f=n(5)("species"),d=[].slice,h=Math.max;r({target:"Array",proto:!0,forced:!l("slice")},{slice:function(t,e){var n,r,l,p=c(this),g=s(p.length),m=a(t,g),v=a(void 0===e?g:e,g);if(i(p)&&("function"!=typeof(n=p.constructor)||n!==Array&&!i(n.prototype)?o(n)&&null===(n=n[f])&&(n=void 0):n=void 0,n===Array||void 0===n))return d.call(p,m,v);for(r=new(void 0===n?Array:n)(h(v-m,0)),l=0;m<v;m++,l++)m in p&&u(r,l,p[m]);return r.length=l,r}})},function(t,e,n){"use strict";var r=n(0),o=n(23),i=n(10),a=n(1),s=n(58),c=[].sort,u=[1,2,3],l=a((function(){u.sort(void 0)})),f=a((function(){u.sort(null)})),d=s("sort");r({target:"Array",proto:!0,forced:l||!f||d},{sort:function(t){return void 0===t?c.call(i(this)):c.call(i(this),o(t))}})},function(t,e,n){n(43)("Array")},function(t,e,n){"use strict";var r=n(0),o=n(31),i=n(22),a=n(7),s=n(10),c=n(54),u=n(39),l=n(55),f=Math.max,d=Math.min;r({target:"Array",proto:!0,forced:!l("splice")},{splice:function(t,e){var n,r,l,h,p,g,m=s(this),v=a(m.length),b=o(t,v),y=arguments.length;if(0===y?n=r=0:1===y?(n=0,r=v-b):(n=y-2,r=d(f(i(e),0),v-b)),v+n-r>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(l=c(m,r),h=0;h<r;h++)(p=b+h)in m&&u(l,h,m[p]);if(l.length=r,n<r){for(h=b;h<v-r;h++)g=h+n,(p=h+r)in m?m[g]=m[p]:delete m[g];for(h=v;h>v-r+n;h--)delete m[h-1]}else if(n>r)for(h=v-r;h>b;h--)g=h+n-1,(p=h+r-1)in m?m[g]=m[p]:delete m[g];for(h=0;h<n;h++)m[h+b]=arguments[h+2];return m.length=v-r+n,l}})},function(t,e,n){n(33)("flat")},function(t,e,n){n(33)("flatMap")},function(t,e,n){"use strict";var r=n(0),o=n(2),i=n(85),a=n(43),s=i.ArrayBuffer;r({global:!0,forced:o.ArrayBuffer!==s},{ArrayBuffer:s}),a("ArrayBuffer")},function(t,e,n){"use strict";var r=n(0),o=n(1),i=n(85),a=n(4),s=n(31),c=n(7),u=n(35),l=i.ArrayBuffer,f=i.DataView,d=l.prototype.slice;r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:o((function(){return!new l(2).slice(1,void 0).byteLength}))},{slice:function(t,e){if(void 0!==d&&void 0===e)return d.call(a(this),t);for(var n=a(this).byteLength,r=s(t,n),o=s(void 0===e?n:e,n),i=new(u(this,l))(c(o-r)),h=new f(this),p=new f(i),g=0;r<o;)p.setUint8(g++,h.getUint8(r++));return i}})},function(t,e,n){var r=n(12),o=n(183),i=n(5)("toPrimitive"),a=Date.prototype;i in a||r(a,i,o)},function(t,e,n){"use strict";var r=n(4),o=n(25);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return o(r(this),"number"!==t)}},function(t,e,n){"use strict";var r=n(3),o=n(9),i=n(27),a=n(5)("hasInstance"),s=Function.prototype;a in s||o.f(s,a,{value:function(t){if("function"!=typeof this||!r(t))return!1;if(!r(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,n){var r=n(8),o=n(9).f,i=Function.prototype,a=i.toString,s=/^\s*function ([^ (]*)/;!r||"name"in i||o(i,"name",{configurable:!0,get:function(){try{return a.call(this).match(s)[1]}catch(t){return""}}})},function(t,e,n){var r=n(2);n(26)(r.JSON,"JSON",!0)},function(t,e,n){"use strict";var r=n(67),o=n(120);t.exports=r("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),o,!0)},function(t,e,n){var r=n(0),o=n(121),i=Math.acosh,a=Math.log,s=Math.sqrt,c=Math.LN2;r({target:"Math",stat:!0,forced:!i||710!=Math.floor(i(Number.MAX_VALUE))||i(1/0)!=1/0},{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?a(t)+c:o(t-1+s(t-1)*s(t+1))}})},function(t,e,n){var r=n(0),o=Math.asinh,i=Math.log,a=Math.sqrt;r({target:"Math",stat:!0,forced:!(o&&1/o(0)>0)},{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):i(e+a(e*e+1)):e}})},function(t,e,n){var r=n(0),o=Math.atanh,i=Math.log;r({target:"Math",stat:!0,forced:!(o&&1/o(-0)<0)},{atanh:function(t){return 0==(t=+t)?t:i((1+t)/(1-t))/2}})},function(t,e,n){var r=n(0),o=n(87),i=Math.abs,a=Math.pow;r({target:"Math",stat:!0},{cbrt:function(t){return o(t=+t)*a(i(t),1/3)}})},function(t,e,n){var r=n(0),o=Math.floor,i=Math.log,a=Math.LOG2E;r({target:"Math",stat:!0},{clz32:function(t){return(t>>>=0)?31-o(i(t+.5)*a):32}})},function(t,e,n){var r=n(0),o=n(68),i=Math.cosh,a=Math.abs,s=Math.E;r({target:"Math",stat:!0,forced:!i||i(710)===1/0},{cosh:function(t){var e=o(a(t)-1)+1;return(e+1/(e*s*s))*(s/2)}})},function(t,e,n){var r=n(0),o=n(68);r({target:"Math",stat:!0,forced:o!=Math.expm1},{expm1:o})},function(t,e,n){n(0)({target:"Math",stat:!0},{fround:n(196)})},function(t,e,n){var r=n(87),o=Math.abs,i=Math.pow,a=i(2,-52),s=i(2,-23),c=i(2,127)*(2-s),u=i(2,-126);t.exports=Math.fround||function(t){var e,n,i=o(t),l=r(t);return i<u?l*(i/u/s+1/a-1/a)*u*s:(n=(e=(1+s/a)*i)-(e-i))>c||n!=n?l*(1/0):l*n}},function(t,e,n){var r=n(0),o=Math.hypot,i=Math.abs,a=Math.sqrt;r({target:"Math",stat:!0,forced:!!o&&o(1/0,NaN)!==1/0},{hypot:function(t,e){for(var n,r,o=0,s=0,c=arguments.length,u=0;s<c;)u<(n=i(arguments[s++]))?(o=o*(r=u/n)*r+1,u=n):o+=n>0?(r=n/u)*r:n;return u===1/0?1/0:u*a(o)}})},function(t,e,n){var r=n(0),o=n(1),i=Math.imul;r({target:"Math",stat:!0,forced:o((function(){return-5!=i(4294967295,5)||2!=i.length}))},{imul:function(t,e){var n=+t,r=+e,o=65535&n,i=65535&r;return 0|o*i+((65535&n>>>16)*i+o*(65535&r>>>16)<<16>>>0)}})},function(t,e,n){var r=n(0),o=Math.log,i=Math.LOG10E;r({target:"Math",stat:!0},{log10:function(t){return o(t)*i}})},function(t,e,n){n(0)({target:"Math",stat:!0},{log1p:n(121)})},function(t,e,n){var r=n(0),o=Math.log,i=Math.LN2;r({target:"Math",stat:!0},{log2:function(t){return o(t)/i}})},function(t,e,n){n(0)({target:"Math",stat:!0},{sign:n(87)})},function(t,e,n){var r=n(0),o=n(1),i=n(68),a=Math.abs,s=Math.exp,c=Math.E;r({target:"Math",stat:!0,forced:o((function(){return-2e-17!=Math.sinh(-2e-17)}))},{sinh:function(t){return a(t=+t)<1?(i(t)-i(-t))/2:(s(t-1)-s(-t-1))*(c/2)}})},function(t,e,n){var r=n(0),o=n(68),i=Math.exp;r({target:"Math",stat:!0},{tanh:function(t){var e=o(t=+t),n=o(-t);return e==1/0?1:n==1/0?-1:(e-n)/(i(t)+i(-t))}})},function(t,e,n){n(26)(Math,"Math",!0)},function(t,e,n){var r=n(0),o=Math.ceil,i=Math.floor;r({target:"Math",stat:!0},{trunc:function(t){return(t>0?i:o)(t)}})},function(t,e,n){"use strict";var r=n(8),o=n(2),i=n(52),a=n(13),s=n(11),c=n(24),u=n(86),l=n(25),f=n(1),d=n(38),h=n(37).f,p=n(15).f,g=n(9).f,m=n(45).trim,v=o.Number,b=v.prototype,y="Number"==c(d(b)),w=function(t){var e,n,r,o,i,a,s,c,u=l(t,!1);if("string"==typeof u&&u.length>2)if(43===(e=(u=m(u)).charCodeAt(0))||45===e){if(88===(n=u.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+u}for(a=(i=u.slice(2)).length,s=0;s<a;s++)if((c=i.charCodeAt(s))<48||c>o)return NaN;return parseInt(i,r)}return+u};if(i("Number",!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var _,E=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof E&&(y?f((function(){b.valueOf.call(n)})):"Number"!=c(n))?u(new v(w(e)),n,E):w(e)},x=r?h(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;x.length>S;S++)s(v,_=x[S])&&!s(E,_)&&g(E,_,p(v,_));E.prototype=b,b.constructor=E,a(o,"Number",E)}},function(t,e,n){n(0)({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},function(t,e,n){n(0)({target:"Number",stat:!0},{isFinite:n(210)})},function(t,e,n){var r=n(2).isFinite;t.exports=Number.isFinite||function(t){return"number"==typeof t&&r(t)}},function(t,e,n){n(0)({target:"Number",stat:!0},{isInteger:n(122)})},function(t,e,n){n(0)({target:"Number",stat:!0},{isNaN:function(t){return t!=t}})},function(t,e,n){var r=n(0),o=n(122),i=Math.abs;r({target:"Number",stat:!0},{isSafeInteger:function(t){return o(t)&&i(t)<=9007199254740991}})},function(t,e,n){n(0)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){n(0)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,n){var r=n(0),o=n(123);r({target:"Number",stat:!0,forced:Number.parseFloat!=o},{parseFloat:o})},function(t,e,n){var r=n(0),o=n(124);r({target:"Number",stat:!0,forced:Number.parseInt!=o},{parseInt:o})},function(t,e,n){"use strict";var r=n(0),o=n(22),i=n(219),a=n(88),s=n(1),c=1..toFixed,u=Math.floor,l=function(t,e,n){return 0===e?n:e%2==1?l(t,e-1,n*t):l(t*t,e/2,n)};r({target:"Number",proto:!0,forced:c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){c.call({})}))},{toFixed:function(t){var e,n,r,s,c=i(this),f=o(t),d=[0,0,0,0,0,0],h="",p="0",g=function(t,e){for(var n=-1,r=e;++n<6;)r+=t*d[n],d[n]=r%1e7,r=u(r/1e7)},m=function(t){for(var e=6,n=0;--e>=0;)n+=d[e],d[e]=u(n/t),n=n%t*1e7},v=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==d[t]){var n=String(d[t]);e=""===e?n:e+a.call("0",7-n.length)+n}return e};if(f<0||f>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(h="-",c=-c),c>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(c*l(2,69,1))-69)<0?c*l(2,-e,1):c/l(2,e,1),n*=4503599627370496,(e=52-e)>0){for(g(0,n),r=f;r>=7;)g(1e7,0),r-=7;for(g(l(10,r,1),0),r=e-1;r>=23;)m(1<<23),r-=23;m(1<<r),g(1,1),m(2),p=v()}else g(0,n),g(1<<-e,0),p=v()+a.call("0",f);return p=f>0?h+((s=p.length)<=f?"0."+a.call("0",f-s)+p:p.slice(0,s-f)+"."+p.slice(s-f)):h+p}})},function(t,e,n){var r=n(24);t.exports=function(t){if("number"!=typeof t&&"Number"!=r(t))throw TypeError("Incorrect invocation");return+t}},function(t,e,n){var r=n(0),o=n(125);r({target:"Object",stat:!0,forced:Object.assign!==o},{assign:o})},function(t,e,n){"use strict";var r=n(0),o=n(8),i=n(70),a=n(10),s=n(23),c=n(9);o&&r({target:"Object",proto:!0,forced:i},{__defineGetter__:function(t,e){c.f(a(this),t,{get:s(e),enumerable:!0,configurable:!0})}})},function(t,e,n){"use strict";var r=n(0),o=n(8),i=n(70),a=n(10),s=n(23),c=n(9);o&&r({target:"Object",proto:!0,forced:i},{__defineSetter__:function(t,e){c.f(a(this),t,{set:s(e),enumerable:!0,configurable:!0})}})},function(t,e,n){var r=n(0),o=n(126).entries;r({target:"Object",stat:!0},{entries:function(t){return o(t)}})},function(t,e,n){var r=n(0),o=n(59),i=n(1),a=n(3),s=n(40).onFreeze,c=Object.freeze;r({target:"Object",stat:!0,forced:i((function(){c(1)})),sham:!o},{freeze:function(t){return c&&a(t)?c(s(t)):t}})},function(t,e,n){var r=n(0),o=n(60),i=n(39);r({target:"Object",stat:!0},{fromEntries:function(t){var e={};return o(t,(function(t,n){i(e,t,n)}),void 0,!0),e}})},function(t,e,n){var r=n(0),o=n(1),i=n(17),a=n(15).f,s=n(8),c=o((function(){a(1)}));r({target:"Object",stat:!0,forced:!s||c,sham:!s},{getOwnPropertyDescriptor:function(t,e){return a(i(t),e)}})},function(t,e,n){var r=n(0),o=n(8),i=n(77),a=n(17),s=n(15),c=n(39);r({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(t){for(var e,n,r=a(t),o=s.f,u=i(r),l={},f=0;u.length>f;)void 0!==(n=o(r,e=u[f++]))&&c(l,e,n);return l}})},function(t,e,n){var r=n(0),o=n(1),i=n(109).f;r({target:"Object",stat:!0,forced:o((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:i})},function(t,e,n){var r=n(0),o=n(1),i=n(10),a=n(27),s=n(84);r({target:"Object",stat:!0,forced:o((function(){a(1)})),sham:!s},{getPrototypeOf:function(t){return a(i(t))}})},function(t,e,n){n(0)({target:"Object",stat:!0},{is:n(127)})},function(t,e,n){var r=n(0),o=n(1),i=n(3),a=Object.isExtensible;r({target:"Object",stat:!0,forced:o((function(){a(1)}))},{isExtensible:function(t){return!!i(t)&&(!a||a(t))}})},function(t,e,n){var r=n(0),o=n(1),i=n(3),a=Object.isFrozen;r({target:"Object",stat:!0,forced:o((function(){a(1)}))},{isFrozen:function(t){return!i(t)||!!a&&a(t)}})},function(t,e,n){var r=n(0),o=n(1),i=n(3),a=Object.isSealed;r({target:"Object",stat:!0,forced:o((function(){a(1)}))},{isSealed:function(t){return!i(t)||!!a&&a(t)}})},function(t,e,n){var r=n(0),o=n(10),i=n(53);r({target:"Object",stat:!0,forced:n(1)((function(){i(1)}))},{keys:function(t){return i(o(t))}})},function(t,e,n){"use strict";var r=n(0),o=n(8),i=n(70),a=n(10),s=n(25),c=n(27),u=n(15).f;o&&r({target:"Object",proto:!0,forced:i},{__lookupGetter__:function(t){var e,n=a(this),r=s(t,!0);do{if(e=u(n,r))return e.get}while(n=c(n))}})},function(t,e,n){"use strict";var r=n(0),o=n(8),i=n(70),a=n(10),s=n(25),c=n(27),u=n(15).f;o&&r({target:"Object",proto:!0,forced:i},{__lookupSetter__:function(t){var e,n=a(this),r=s(t,!0);do{if(e=u(n,r))return e.set}while(n=c(n))}})},function(t,e,n){var r=n(0),o=n(3),i=n(40).onFreeze,a=n(59),s=n(1),c=Object.preventExtensions;r({target:"Object",stat:!0,forced:s((function(){c(1)})),sham:!a},{preventExtensions:function(t){return c&&o(t)?c(i(t)):t}})},function(t,e,n){var r=n(0),o=n(3),i=n(40).onFreeze,a=n(59),s=n(1),c=Object.seal;r({target:"Object",stat:!0,forced:s((function(){c(1)})),sham:!a},{seal:function(t){return c&&o(t)?c(i(t)):t}})},function(t,e,n){n(0)({target:"Object",stat:!0},{setPrototypeOf:n(42)})},function(t,e,n){var r=n(13),o=n(241),i=Object.prototype;o!==i.toString&&r(i,"toString",o,{unsafe:!0})},function(t,e,n){"use strict";var r=n(64),o={};o[n(5)("toStringTag")]="z",t.exports="[object z]"!==String(o)?function(){return"[object "+r(this)+"]"}:o.toString},function(t,e,n){var r=n(0),o=n(126).values;r({target:"Object",stat:!0},{values:function(t){return o(t)}})},function(t,e,n){var r=n(0),o=n(123);r({global:!0,forced:parseFloat!=o},{parseFloat:o})},function(t,e,n){var r=n(0),o=n(124);r({global:!0,forced:parseInt!=o},{parseInt:o})},function(t,e,n){"use strict";var r,o,i,a,s=n(0),c=n(29),u=n(2),l=n(78),f=n(128),d=n(13),h=n(44),p=n(26),g=n(43),m=n(3),v=n(23),b=n(34),y=n(24),w=n(60),_=n(65),E=n(35),x=n(89).set,S=n(129),T=n(130),$=n(246),k=n(131),O=n(247),C=n(90),A=n(21),I=n(52),N=n(5)("species"),R="Promise",P=A.get,M=A.set,j=A.getterFor(R),U=f,L=u.TypeError,B=u.document,D=u.process,F=u.fetch,z=D&&D.versions,q=z&&z.v8||"",V=k.f,W=V,G="process"==y(D),K=!!(B&&B.createEvent&&u.dispatchEvent),J=I(R,(function(){var t=U.resolve(1),e=function(){},n=(t.constructor={})[N]=function(t){t(e,e)};return!((G||"function"==typeof PromiseRejectionEvent)&&(!c||t.finally)&&t.then(e)instanceof n&&0!==q.indexOf("6.6")&&-1===C.indexOf("Chrome/66"))})),Q=J||!_((function(t){U.all(t).catch((function(){}))})),H=function(t){var e;return!(!m(t)||"function"!=typeof(e=t.then))&&e},X=function(t,e,n){if(!e.notified){e.notified=!0;var r=e.reactions;S((function(){for(var o=e.value,i=1==e.state,a=0;r.length>a;){var s,c,u,l=r[a++],f=i?l.ok:l.fail,d=l.resolve,h=l.reject,p=l.domain;try{f?(i||(2===e.rejection&&et(t,e),e.rejection=1),!0===f?s=o:(p&&p.enter(),s=f(o),p&&(p.exit(),u=!0)),s===l.promise?h(L("Promise-chain cycle")):(c=H(s))?c.call(s,d,h):d(s)):h(o)}catch(t){p&&!u&&p.exit(),h(t)}}e.reactions=[],e.notified=!1,n&&!e.rejection&&Z(t,e)}))}},Y=function(t,e,n){var r,o;K?((r=B.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),u.dispatchEvent(r)):r={promise:e,reason:n},(o=u["on"+t])?o(r):"unhandledrejection"===t&&$("Unhandled promise rejection",n)},Z=function(t,e){x.call(u,(function(){var n,r=e.value;if(tt(e)&&(n=O((function(){G?D.emit("unhandledRejection",r,t):Y("unhandledrejection",t,r)})),e.rejection=G||tt(e)?2:1,n.error))throw n.value}))},tt=function(t){return 1!==t.rejection&&!t.parent},et=function(t,e){x.call(u,(function(){G?D.emit("rejectionHandled",t):Y("rejectionhandled",t,e.value)}))},nt=function(t,e,n,r){return function(o){t(e,n,o,r)}},rt=function(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=2,X(t,e,!0))},ot=function(t,e,n,r){if(!e.done){e.done=!0,r&&(e=r);try{if(t===n)throw L("Promise can't be resolved itself");var o=H(n);o?S((function(){var r={done:!1};try{o.call(n,nt(ot,t,r,e),nt(rt,t,r,e))}catch(n){rt(t,r,n,e)}})):(e.value=n,e.state=1,X(t,e,!1))}catch(n){rt(t,{done:!1},n,e)}}};J&&(U=function(t){b(this,U,R),v(t),r.call(this);var e=P(this);try{t(nt(ot,this,e),nt(rt,this,e))}catch(t){rt(this,e,t)}},(r=function(t){M(this,{type:R,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=h(U.prototype,{then:function(t,e){var n=j(this),r=V(E(this,U));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=G?D.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&X(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new r,e=P(t);this.promise=t,this.resolve=nt(ot,t,e),this.reject=nt(rt,t,e)},k.f=V=function(t){return t===U||t===i?new o(t):W(t)},c||"function"!=typeof f||(a=f.prototype.then,d(f.prototype,"then",(function(t,e){var n=this;return new U((function(t,e){a.call(n,t,e)})).then(t,e)})),"function"==typeof F&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return T(U,F.apply(u,arguments))}}))),s({global:!0,wrap:!0,forced:J},{Promise:U}),p(U,R,!1,!0),g(R),i=l.Promise,s({target:R,stat:!0,forced:J},{reject:function(t){var e=V(this);return e.reject.call(void 0,t),e.promise}}),s({target:R,stat:!0,forced:c||J},{resolve:function(t){return T(c&&this===i?U:this,t)}}),s({target:R,stat:!0,forced:Q},{all:function(t){var e=this,n=V(e),r=n.resolve,o=n.reject,i=O((function(){var n=v(e.resolve),i=[],a=0,s=1;w(t,(function(t){var c=a++,u=!1;i.push(void 0),s++,n.call(e,t).then((function(t){u||(u=!0,i[c]=t,--s||r(i))}),o)})),--s||r(i)}));return i.error&&o(i.value),n.promise},race:function(t){var e=this,n=V(e),r=n.reject,o=O((function(){var o=v(e.resolve);w(t,(function(t){o.call(e,t).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}})},function(t,e,n){var r=n(2);t.exports=function(t,e){var n=r.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}},function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},function(t,e,n){"use strict";var r=n(0),o=n(29),i=n(128),a=n(30),s=n(35),c=n(130),u=n(13);r({target:"Promise",proto:!0,real:!0},{finally:function(t){var e=s(this,a("Promise")),n="function"==typeof t;return this.then(n?function(n){return c(e,t()).then((function(){return n}))}:t,n?function(n){return c(e,t()).then((function(){throw n}))}:t)}}),o||"function"!=typeof i||i.prototype.finally||u(i.prototype,"finally",a("Promise").prototype.finally)},function(t,e,n){var r=n(0),o=n(30),i=n(23),a=n(4),s=n(1),c=o("Reflect","apply"),u=Function.apply;r({target:"Reflect",stat:!0,forced:!s((function(){c((function(){}))}))},{apply:function(t,e,n){return i(t),a(n),c?c(t,e,n):u.call(t,e,n)}})},function(t,e,n){var r=n(0),o=n(30),i=n(23),a=n(4),s=n(3),c=n(38),u=n(251),l=n(1),f=o("Reflect","construct"),d=l((function(){function t(){}return!(f((function(){}),[],t)instanceof t)})),h=!l((function(){f((function(){}))})),p=d||h;r({target:"Reflect",stat:!0,forced:p,sham:p},{construct:function(t,e){i(t),a(e);var n=arguments.length<3?t:i(arguments[2]);if(h&&!d)return f(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(u.apply(t,r))}var o=n.prototype,l=c(s(o)?o:Object.prototype),p=Function.apply.call(t,l,e);return s(p)?p:l}})},function(t,e,n){"use strict";var r=n(23),o=n(3),i=[].slice,a={},s=function(t,e,n){if(!(e in a)){for(var r=[],o=0;o<e;o++)r[o]="a["+o+"]";a[e]=Function("C,a","return new C("+r.join(",")+")")}return a[e](t,n)};t.exports=Function.bind||function(t){var e=r(this),n=i.call(arguments,1),a=function(){var r=n.concat(i.call(arguments));return this instanceof a?s(e,r.length,r):e.apply(t,r)};return o(e.prototype)&&(a.prototype=e.prototype),a}},function(t,e,n){var r=n(0),o=n(8),i=n(4),a=n(25),s=n(9);r({target:"Reflect",stat:!0,forced:n(1)((function(){Reflect.defineProperty(s.f({},1,{value:1}),1,{value:2})})),sham:!o},{defineProperty:function(t,e,n){i(t);var r=a(e,!0);i(n);try{return s.f(t,r,n),!0}catch(t){return!1}}})},function(t,e,n){var r=n(0),o=n(4),i=n(15).f;r({target:"Reflect",stat:!0},{deleteProperty:function(t,e){var n=i(o(t),e);return!(n&&!n.configurable)&&delete t[e]}})},function(t,e,n){var r=n(0),o=n(3),i=n(4),a=n(11),s=n(15),c=n(27);r({target:"Reflect",stat:!0},{get:function t(e,n){var r,u,l=arguments.length<3?e:arguments[2];return i(e)===l?e[n]:(r=s.f(e,n))?a(r,"value")?r.value:void 0===r.get?void 0:r.get.call(l):o(u=c(e))?t(u,n,l):void 0}})},function(t,e,n){var r=n(0),o=n(8),i=n(4),a=n(15);r({target:"Reflect",stat:!0,sham:!o},{getOwnPropertyDescriptor:function(t,e){return a.f(i(t),e)}})},function(t,e,n){var r=n(0),o=n(4),i=n(27);r({target:"Reflect",stat:!0,sham:!n(84)},{getPrototypeOf:function(t){return i(o(t))}})},function(t,e,n){n(0)({target:"Reflect",stat:!0},{has:function(t,e){return e in t}})},function(t,e,n){var r=n(0),o=n(4),i=Object.isExtensible;r({target:"Reflect",stat:!0},{isExtensible:function(t){return o(t),!i||i(t)}})},function(t,e,n){n(0)({target:"Reflect",stat:!0},{ownKeys:n(77)})},function(t,e,n){var r=n(0),o=n(30),i=n(4);r({target:"Reflect",stat:!0,sham:!n(59)},{preventExtensions:function(t){i(t);try{var e=o("Object","preventExtensions");return e&&e(t),!0}catch(t){return!1}}})},function(t,e,n){var r=n(0),o=n(4),i=n(3),a=n(11),s=n(9),c=n(15),u=n(27),l=n(36);r({target:"Reflect",stat:!0},{set:function t(e,n,r){var f,d,h=arguments.length<4?e:arguments[3],p=c.f(o(e),n);if(!p){if(i(d=u(e)))return t(d,n,r,h);p=l(0)}if(a(p,"value")){if(!1===p.writable||!i(h))return!1;if(f=c.f(h,n)){if(f.get||f.set||!1===f.writable)return!1;f.value=r,s.f(h,n,f)}else s.f(h,n,l(0,r));return!0}return void 0!==p.set&&(p.set.call(h,r),!0)}})},function(t,e,n){var r=n(0),o=n(4),i=n(117),a=n(42);a&&r({target:"Reflect",stat:!0},{setPrototypeOf:function(t,e){o(t),i(e);try{return a(t,e),!0}catch(t){return!1}}})},function(t,e,n){var r=n(8),o=n(2),i=n(52),a=n(86),s=n(9).f,c=n(37).f,u=n(91),l=n(71),f=n(13),d=n(1),h=n(43),p=n(5)("match"),g=o.RegExp,m=g.prototype,v=/a/g,b=/a/g,y=new g(v)!==v;if(r&&i("RegExp",!y||d((function(){return b[p]=!1,g(v)!=v||g(b)==b||"/a/i"!=g(v,"i")})))){for(var w=function(t,e){var n=this instanceof w,r=u(t),o=void 0===e;return!n&&r&&t.constructor===w&&o?t:a(y?new g(r&&!o?t.source:t,e):g((r=t instanceof w)?t.source:t,r&&o?l.call(t):e),n?this:m,w)},_=function(t){t in w||s(w,t,{configurable:!0,get:function(){return g[t]},set:function(e){g[t]=e}})},E=c(g),x=0;E.length>x;)_(E[x++]);m.constructor=w,w.prototype=m,f(o,"RegExp",w)}h("RegExp")},function(t,e,n){var r=n(8),o=n(9),i=n(71);r&&"g"!=/./g.flags&&o.f(RegExp.prototype,"flags",{configurable:!0,get:i})},function(t,e,n){"use strict";var r=n(13),o=n(4),i=n(1),a=n(71),s=RegExp.prototype,c=s.toString,u=i((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),l="toString"!=c.name;(u||l)&&r(RegExp.prototype,"toString",(function(){var t=o(this),e=String(t.source),n=t.flags;return"/"+e+"/"+String(void 0===n&&t instanceof RegExp&&!("flags"in s)?a.call(t):n)}),{unsafe:!0})},function(t,e,n){"use strict";var r=n(67),o=n(120);t.exports=r("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),o)},function(t,e,n){"use strict";var r=n(0),o=n(72).codeAt;r({target:"String",proto:!0},{codePointAt:function(t){return o(this,t)}})},function(t,e,n){"use strict";var r=n(0),o=n(7),i=n(92),a=n(16),s=n(93),c="".endsWith,u=Math.min;r({target:"String",proto:!0,forced:!s("endsWith")},{endsWith:function(t){var e=String(a(this));i(t);var n=arguments.length>1?arguments[1]:void 0,r=o(e.length),s=void 0===n?r:u(o(n),r),l=String(t);return c?c.call(e,l,s):e.slice(s-l.length,s)===l}})},function(t,e,n){var r=n(0),o=n(31),i=String.fromCharCode,a=String.fromCodePoint;r({target:"String",stat:!0,forced:!!a&&1!=a.length},{fromCodePoint:function(t){for(var e,n=[],r=arguments.length,a=0;r>a;){if(e=+arguments[a++],o(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?i(e):i(55296+((e-=65536)>>10),e%1024+56320))}return n.join("")}})},function(t,e,n){"use strict";var r=n(0),o=n(92),i=n(16);r({target:"String",proto:!0,forced:!n(93)("includes")},{includes:function(t){return!!~String(i(this)).indexOf(o(t),arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var r=n(73),o=n(4),i=n(7),a=n(16),s=n(95),c=n(74);r("match",1,(function(t,e,n){return[function(e){var n=a(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var a=o(t),u=String(this);if(!a.global)return c(a,u);var l=a.unicode;a.lastIndex=0;for(var f,d=[],h=0;null!==(f=c(a,u));){var p=String(f[0]);d[h]=p,""===p&&(a.lastIndex=s(u,i(a.lastIndex),l)),h++}return 0===h?null:d}]}))},function(t,e,n){"use strict";var r=n(0),o=n(133).end;r({target:"String",proto:!0,forced:n(134)},{padEnd:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var r=n(0),o=n(133).start;r({target:"String",proto:!0,forced:n(134)},{padStart:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=n(0),o=n(17),i=n(7);r({target:"String",stat:!0},{raw:function(t){for(var e=o(t.raw),n=i(e.length),r=arguments.length,a=[],s=0;n>s;)a.push(String(e[s++])),s<r&&a.push(String(arguments[s]));return a.join("")}})},function(t,e,n){n(0)({target:"String",proto:!0},{repeat:n(88)})},function(t,e,n){"use strict";var r=n(73),o=n(4),i=n(10),a=n(7),s=n(22),c=n(16),u=n(95),l=n(74),f=Math.max,d=Math.min,h=Math.floor,p=/\$([$&'`]|\d\d?|<[^>]*>)/g,g=/\$([$&'`]|\d\d?)/g;r("replace",2,(function(t,e,n){return[function(n,r){var o=c(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,o,r):e.call(String(o),n,r)},function(t,i){var c=n(e,t,this,i);if(c.done)return c.value;var h=o(t),p=String(this),g="function"==typeof i;g||(i=String(i));var m=h.global;if(m){var v=h.unicode;h.lastIndex=0}for(var b=[];;){var y=l(h,p);if(null===y)break;if(b.push(y),!m)break;""===String(y[0])&&(h.lastIndex=u(p,a(h.lastIndex),v))}for(var w,_="",E=0,x=0;x<b.length;x++){y=b[x];for(var S=String(y[0]),T=f(d(s(y.index),p.length),0),$=[],k=1;k<y.length;k++)$.push(void 0===(w=y[k])?w:String(w));var O=y.groups;if(g){var C=[S].concat($,T,p);void 0!==O&&C.push(O);var A=String(i.apply(void 0,C))}else A=r(S,p,T,$,O,i);T>=E&&(_+=p.slice(E,T)+A,E=T+S.length)}return _+p.slice(E)}];function r(t,n,r,o,a,s){var c=r+t.length,u=o.length,l=g;return void 0!==a&&(a=i(a),l=p),e.call(s,l,(function(e,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,r);case"'":return n.slice(c);case"<":s=a[i.slice(1,-1)];break;default:var l=+i;if(0===l)return e;if(l>u){var f=h(l/10);return 0===f?e:f<=u?void 0===o[f-1]?i.charAt(1):o[f-1]+i.charAt(1):e}s=o[l-1]}return void 0===s?"":s}))}}))},function(t,e,n){"use strict";var r=n(73),o=n(4),i=n(16),a=n(127),s=n(74);r("search",1,(function(t,e,n){return[function(e){var n=i(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var i=o(t),c=String(this),u=i.lastIndex;a(u,0)||(i.lastIndex=0);var l=s(i,c);return a(i.lastIndex,u)||(i.lastIndex=u),null===l?-1:l.index}]}))},function(t,e,n){"use strict";var r=n(73),o=n(91),i=n(4),a=n(16),s=n(35),c=n(95),u=n(7),l=n(74),f=n(94),d=n(1),h=[].push,p=Math.min,g=!d((function(){return!RegExp(4294967295,"y")}));r("split",2,(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=String(a(this)),i=void 0===n?4294967295:n>>>0;if(0===i)return[];if(void 0===t)return[r];if(!o(t))return e.call(r,t,i);for(var s,c,u,l=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,g=new RegExp(t.source,d+"g");(s=f.call(g,r))&&!((c=g.lastIndex)>p&&(l.push(r.slice(p,s.index)),s.length>1&&s.index<r.length&&h.apply(l,s.slice(1)),u=s[0].length,p=c,l.length>=i));)g.lastIndex===s.index&&g.lastIndex++;return p===r.length?!u&&g.test("")||l.push(""):l.push(r.slice(p)),l.length>i?l.slice(0,i):l}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var o=a(this),i=null==e?void 0:e[t];return void 0!==i?i.call(e,o,n):r.call(String(o),e,n)},function(t,o){var a=n(r,t,this,o,r!==e);if(a.done)return a.value;var f=i(t),d=String(this),h=s(f,RegExp),m=f.unicode,v=(f.ignoreCase?"i":"")+(f.multiline?"m":"")+(f.unicode?"u":"")+(g?"y":"g"),b=new h(g?f:"^(?:"+f.source+")",v),y=void 0===o?4294967295:o>>>0;if(0===y)return[];if(0===d.length)return null===l(b,d)?[d]:[];for(var w=0,_=0,E=[];_<d.length;){b.lastIndex=g?_:0;var x,S=l(b,g?d:d.slice(_));if(null===S||(x=p(u(b.lastIndex+(g?0:_)),d.length))===w)_=c(d,_,m);else{if(E.push(d.slice(w,_)),E.length===y)return E;for(var T=1;T<=S.length-1;T++)if(E.push(S[T]),E.length===y)return E;_=w=x}}return E.push(d.slice(w)),E}]}),!g)},function(t,e,n){"use strict";var r=n(0),o=n(7),i=n(92),a=n(16),s=n(93),c="".startsWith,u=Math.min;r({target:"String",proto:!0,forced:!s("startsWith")},{startsWith:function(t){var e=String(a(this));i(t);var n=o(u(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return c?c.call(e,r,n):e.slice(n,n+r.length)===r}})},function(t,e,n){"use strict";var r=n(0),o=n(45).trim;r({target:"String",proto:!0,forced:n(96)("trim")},{trim:function(){return o(this)}})},function(t,e,n){"use strict";var r=n(0),o=n(45).end,i=n(96)("trimEnd"),a=i?function(){return o(this)}:"".trimEnd;r({target:"String",proto:!0,forced:i},{trimEnd:a,trimRight:a})},function(t,e,n){"use strict";var r=n(0),o=n(45).start,i=n(96)("trimStart"),a=i?function(){return o(this)}:"".trimStart;r({target:"String",proto:!0,forced:i},{trimStart:a,trimLeft:a})},function(t,e,n){"use strict";var r=n(0),o=n(19);r({target:"String",proto:!0,forced:n(20)("anchor")},{anchor:function(t){return o(this,"a","name",t)}})},function(t,e,n){"use strict";var r=n(0),o=n(19);r({target:"String",proto:!0,forced:n(20)("big")},{big:function(){return o(this,"big","","")}})},function(t,e,n){"use strict";var r=n(0),o=n(19);r({target:"String",proto:!0,forced:n(20)("blink")},{blink:function(){return o(this,"blink","","")}})},function(t,e,n){"use strict";var r=n(0),o=n(19);r({target:"String",proto:!0,forced:n(20)("bold")},{bold:function(){return o(this,"b","","")}})},function(t,e,n){"use strict";var r=n(0),o=n(19);r({target:"String",proto:!0,forced:n(20)("fixed")},{fixed:function(){return o(this,"tt","","")}})},function(t,e,n){"use strict";var r=n(0),o=n(19);r({target:"String",proto:!0,forced:n(20)("fontcolor")},{fontcolor:function(t){return o(this,"font","color",t)}})},function(t,e,n){"use strict";var r=n(0),o=n(19);r({target:"String",proto:!0,forced:n(20)("fontsize")},{fontsize:function(t){return o(this,"font","size",t)}})},function(t,e,n){"use strict";var r=n(0),o=n(19);r({target:"String",proto:!0,forced:n(20)("italics")},{italics:function(){return o(this,"i","","")}})},function(t,e,n){"use strict";var r=n(0),o=n(19);r({target:"String",proto:!0,forced:n(20)("link")},{link:function(t){return o(this,"a","href",t)}})},function(t,e,n){"use strict";var r=n(0),o=n(19);r({target:"String",proto:!0,forced:n(20)("small")},{small:function(){return o(this,"small","","")}})},function(t,e,n){"use strict";var r=n(0),o=n(19);r({target:"String",proto:!0,forced:n(20)("strike")},{strike:function(){return o(this,"strike","","")}})},function(t,e,n){"use strict";var r=n(0),o=n(19);r({target:"String",proto:!0,forced:n(20)("sub")},{sub:function(){return o(this,"sub","","")}})},function(t,e,n){"use strict";var r=n(0),o=n(19);r({target:"String",proto:!0,forced:n(20)("sup")},{sup:function(){return o(this,"sup","","")}})},function(t,e,n){n(28)("Float32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(28)("Float64",8,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(28)("Int8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(28)("Int16",2,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(28)("Int32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(28)("Uint8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(28)("Uint8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}}),!0)},function(t,e,n){n(28)("Uint16",2,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(28)("Uint32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){"use strict";var r=n(6),o=n(111),i=r.aTypedArray;r.exportProto("copyWithin",(function(t,e){return o.call(i(this),t,e,arguments.length>2?arguments[2]:void 0)}))},function(t,e,n){"use strict";var r=n(6),o=n(14).every,i=r.aTypedArray;r.exportProto("every",(function(t){return o(i(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(6),o=n(81),i=r.aTypedArray;r.exportProto("fill",(function(t){return o.apply(i(this),arguments)}))},function(t,e,n){"use strict";var r=n(6),o=n(14).filter,i=n(35),a=r.aTypedArray,s=r.aTypedArrayConstructor;r.exportProto("filter",(function(t){for(var e=o(a(this),t,arguments.length>1?arguments[1]:void 0),n=i(this,this.constructor),r=0,c=e.length,u=new(s(n))(c);c>r;)u[r]=e[r++];return u}))},function(t,e,n){"use strict";var r=n(6),o=n(14).find,i=r.aTypedArray;r.exportProto("find",(function(t){return o(i(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(6),o=n(14).findIndex,i=r.aTypedArray;r.exportProto("findIndex",(function(t){return o(i(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(6),o=n(14).forEach,i=r.aTypedArray;r.exportProto("forEach",(function(t){o(i(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(97),o=n(6),i=n(136);o.exportStatic("from",i,r)},function(t,e,n){"use strict";var r=n(6),o=n(51).includes,i=r.aTypedArray;r.exportProto("includes",(function(t){return o(i(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(6),o=n(51).indexOf,i=r.aTypedArray;r.exportProto("indexOf",(function(t){return o(i(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(2),o=n(6),i=n(66),a=n(5)("iterator"),s=r.Uint8Array,c=i.values,u=i.keys,l=i.entries,f=o.aTypedArray,d=o.exportProto,h=s&&s.prototype[a],p=!!h&&("values"==h.name||null==h.name),g=function(){return c.call(f(this))};d("entries",(function(){return l.call(f(this))})),d("keys",(function(){return u.call(f(this))})),d("values",g,!p),d(a,g,!p)},function(t,e,n){"use strict";var r=n(6),o=r.aTypedArray,i=[].join;r.exportProto("join",(function(t){return i.apply(o(this),arguments)}))},function(t,e,n){"use strict";var r=n(6),o=n(118),i=r.aTypedArray;r.exportProto("lastIndexOf",(function(t){return o.apply(i(this),arguments)}))},function(t,e,n){"use strict";var r=n(6),o=n(14).map,i=n(35),a=r.aTypedArray,s=r.aTypedArrayConstructor;r.exportProto("map",(function(t){return o(a(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(s(i(t,t.constructor)))(e)}))}))},function(t,e,n){"use strict";var r=n(6),o=n(97),i=r.aTypedArrayConstructor;r.exportStatic("of",(function(){for(var t=0,e=arguments.length,n=new(i(this))(e);e>t;)n[t]=arguments[t++];return n}),o)},function(t,e,n){"use strict";var r=n(6),o=n(137).left,i=r.aTypedArray;r.exportProto("reduce",(function(t){return o(i(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(6),o=n(137).right,i=r.aTypedArray;r.exportProto("reduceRight",(function(t){return o(i(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(6),o=r.aTypedArray,i=Math.floor;r.exportProto("reverse",(function(){for(var t,e=o(this).length,n=i(e/2),r=0;r<n;)t=this[r],this[r++]=this[--e],this[e]=t;return this}))},function(t,e,n){"use strict";var r=n(6),o=n(7),i=n(135),a=n(10),s=n(1),c=r.aTypedArray,u=s((function(){new Int8Array(1).set({})}));r.exportProto("set",(function(t){c(this);var e=i(arguments.length>1?arguments[1]:void 0,1),n=this.length,r=a(t),s=o(r.length),u=0;if(s+e>n)throw RangeError("Wrong length");for(;u<s;)this[e+u]=r[u++]}),u)},function(t,e,n){"use strict";var r=n(6),o=n(35),i=n(1),a=r.aTypedArray,s=r.aTypedArrayConstructor,c=[].slice,u=i((function(){new Int8Array(1).slice()}));r.exportProto("slice",(function(t,e){for(var n=c.call(a(this),t,e),r=o(this,this.constructor),i=0,u=n.length,l=new(s(r))(u);u>i;)l[i]=n[i++];return l}),u)},function(t,e,n){"use strict";var r=n(6),o=n(14).some,i=r.aTypedArray;r.exportProto("some",(function(t){return o(i(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(6),o=r.aTypedArray,i=[].sort;r.exportProto("sort",(function(t){return i.call(o(this),t)}))},function(t,e,n){"use strict";var r=n(6),o=n(7),i=n(31),a=n(35),s=r.aTypedArray;r.exportProto("subarray",(function(t,e){var n=s(this),r=n.length,c=i(t,r);return new(a(n,n.constructor))(n.buffer,n.byteOffset+c*n.BYTES_PER_ELEMENT,o((void 0===e?r:i(e,r))-c))}))},function(t,e,n){"use strict";var r=n(2),o=n(6),i=n(1),a=r.Int8Array,s=o.aTypedArray,c=[].toLocaleString,u=[].slice,l=!!a&&i((function(){c.call(new a(1))})),f=i((function(){return[1,2].toLocaleString()!=new a([1,2]).toLocaleString()}))||!i((function(){a.prototype.toLocaleString.call([1,2])}));o.exportProto("toLocaleString",(function(){return c.apply(l?u.call(s(this)):s(this),arguments)}),f)},function(t,e,n){"use strict";var r=n(2),o=n(6),i=n(1),a=r.Uint8Array,s=a&&a.prototype,c=[].toString,u=[].join;i((function(){c.call({})}))&&(c=function(){return u.call(this)}),o.exportProto("toString",c,(s||{}).toString!=c)},function(t,e,n){"use strict";var r,o=n(2),i=n(44),a=n(40),s=n(67),c=n(138),u=n(3),l=n(21).enforce,f=n(103),d=!o.ActiveXObject&&"ActiveXObject"in o,h=Object.isExtensible,p=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},g=t.exports=s("WeakMap",p,c,!0,!0);if(f&&d){r=c.getConstructor(p,"WeakMap",!0),a.REQUIRED=!0;var m=g.prototype,v=m.delete,b=m.has,y=m.get,w=m.set;i(m,{delete:function(t){if(u(t)&&!h(t)){var e=l(this);return e.frozen||(e.frozen=new r),v.call(this,t)||e.frozen.delete(t)}return v.call(this,t)},has:function(t){if(u(t)&&!h(t)){var e=l(this);return e.frozen||(e.frozen=new r),b.call(this,t)||e.frozen.has(t)}return b.call(this,t)},get:function(t){if(u(t)&&!h(t)){var e=l(this);return e.frozen||(e.frozen=new r),b.call(this,t)?y.call(this,t):e.frozen.get(t)}return y.call(this,t)},set:function(t,e){if(u(t)&&!h(t)){var n=l(this);n.frozen||(n.frozen=new r),b.call(this,t)?w.call(this,t,e):n.frozen.set(t,e)}else w.call(this,t,e);return this}})}},function(t,e,n){"use strict";n(67)("WeakSet",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),n(138),!1,!0)},function(t,e,n){var r=n(2),o=n(139),i=n(333),a=n(12);for(var s in o){var c=r[s],u=c&&c.prototype;if(u&&u.forEach!==i)try{a(u,"forEach",i)}catch(t){u.forEach=i}}},function(t,e,n){"use strict";var r=n(14).forEach,o=n(58);t.exports=o("forEach")?function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}:[].forEach},function(t,e,n){var r=n(2),o=n(139),i=n(66),a=n(12),s=n(5),c=s("iterator"),u=s("toStringTag"),l=i.values;for(var f in o){var d=r[f],h=d&&d.prototype;if(h){if(h[c]!==l)try{a(h,c,l)}catch(t){h[c]=l}if(h[u]||a(h,u,f),o[f])for(var p in i)if(h[p]!==i[p])try{a(h,p,i[p])}catch(t){h[p]=i[p]}}}},function(t,e,n){var r=n(2),o=n(89),i=!r.setImmediate||!r.clearImmediate;n(0)({global:!0,bind:!0,enumerable:!0,forced:i},{setImmediate:o.set,clearImmediate:o.clear})},function(t,e,n){var r=n(0),o=n(2),i=n(129),a=n(24),s=o.process,c="process"==a(s);r({global:!0,enumerable:!0,noTargetGet:!0},{queueMicrotask:function(t){var e=c&&s.domain;i(e?e.bind(t):t)}})},function(t,e,n){"use strict";n(132);var r,o=n(0),i=n(8),a=n(140),s=n(2),c=n(107),u=n(13),l=n(34),f=n(11),d=n(125),h=n(113),p=n(72).codeAt,g=n(338),m=n(26),v=n(141),b=n(21),y=s.URL,w=v.URLSearchParams,_=v.getState,E=b.set,x=b.getterFor("URL"),S=Math.floor,T=Math.pow,$=/[A-Za-z]/,k=/[\d+\-.A-Za-z]/,O=/\d/,C=/^(0x|0X)/,A=/^[0-7]+$/,I=/^\d+$/,N=/^[\dA-Fa-f]+$/,R=/[\u0000\u0009\u000A\u000D #%\/:?@[\\]]/,P=/[\u0000\u0009\u000A\u000D #\/:?@[\\]]/,M=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,j=/[\u0009\u000A\u000D]/g,U=function(t,e){var n,r,o;if("["==e.charAt(0)){if("]"!=e.charAt(e.length-1))return"Invalid host";if(!(n=B(e.slice(1,-1))))return"Invalid host";t.host=n}else if(K(t)){if(e=g(e),R.test(e))return"Invalid host";if(null===(n=L(e)))return"Invalid host";t.host=n}else{if(P.test(e))return"Invalid host";for(n="",r=h(e),o=0;o<r.length;o++)n+=W(r[o],F);t.host=n}},L=function(t){var e,n,r,o,i,a,s,c=t.split(".");if(c.length&&""==c[c.length-1]&&c.pop(),(e=c.length)>4)return t;for(n=[],r=0;r<e;r++){if(""==(o=c[r]))return t;if(i=10,o.length>1&&"0"==o.charAt(0)&&(i=C.test(o)?16:8,o=o.slice(8==i?1:2)),""===o)a=0;else{if(!(10==i?I:8==i?A:N).test(o))return t;a=parseInt(o,i)}n.push(a)}for(r=0;r<e;r++)if(a=n[r],r==e-1){if(a>=T(256,5-e))return null}else if(a>255)return null;for(s=n.pop(),r=0;r<n.length;r++)s+=n[r]*T(256,3-r);return s},B=function(t){var e,n,r,o,i,a,s,c=[0,0,0,0,0,0,0,0],u=0,l=null,f=0,d=function(){return t.charAt(f)};if(":"==d()){if(":"!=t.charAt(1))return;f+=2,l=++u}for(;d();){if(8==u)return;if(":"!=d()){for(e=n=0;n<4&&N.test(d());)e=16*e+parseInt(d(),16),f++,n++;if("."==d()){if(0==n)return;if(f-=n,u>6)return;for(r=0;d();){if(o=null,r>0){if(!("."==d()&&r<4))return;f++}if(!O.test(d()))return;for(;O.test(d());){if(i=parseInt(d(),10),null===o)o=i;else{if(0==o)return;o=10*o+i}if(o>255)return;f++}c[u]=256*c[u]+o,2!=++r&&4!=r||u++}if(4!=r)return;break}if(":"==d()){if(f++,!d())return}else if(d())return;c[u++]=e}else{if(null!==l)return;f++,l=++u}}if(null!==l)for(a=u-l,u=7;0!=u&&a>0;)s=c[u],c[u--]=c[l+a-1],c[l+--a]=s;else if(8!=u)return;return c},D=function(t){var e,n,r,o;if("number"==typeof t){for(e=[],n=0;n<4;n++)e.unshift(t%256),t=S(t/256);return e.join(".")}if("object"==typeof t){for(e="",r=function(t){for(var e=null,n=1,r=null,o=0,i=0;i<8;i++)0!==t[i]?(o>n&&(e=r,n=o),r=null,o=0):(null===r&&(r=i),++o);return o>n&&(e=r,n=o),e}(t),n=0;n<8;n++)o&&0===t[n]||(o&&(o=!1),r===n?(e+=n?":":"::",o=!0):(e+=t[n].toString(16),n<7&&(e+=":")));return"["+e+"]"}return t},F={},z=d({},F,{" ":1,'"':1,"<":1,">":1,"`":1}),q=d({},z,{"#":1,"?":1,"{":1,"}":1}),V=d({},q,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),W=function(t,e){var n=p(t,0);return n>32&&n<127&&!f(e,t)?t:encodeURIComponent(t)},G={ftp:21,file:null,gopher:70,http:80,https:443,ws:80,wss:443},K=function(t){return f(G,t.scheme)},J=function(t){return""!=t.username||""!=t.password},Q=function(t){return!t.host||t.cannotBeABaseURL||"file"==t.scheme},H=function(t,e){var n;return 2==t.length&&$.test(t.charAt(0))&&(":"==(n=t.charAt(1))||!e&&"|"==n)},X=function(t){var e;return t.length>1&&H(t.slice(0,2))&&(2==t.length||"/"===(e=t.charAt(2))||"\\"===e||"?"===e||"#"===e)},Y=function(t){var e=t.path,n=e.length;!n||"file"==t.scheme&&1==n&&H(e[0],!0)||e.pop()},Z=function(t){return"."===t||"%2e"===t.toLowerCase()},tt={},et={},nt={},rt={},ot={},it={},at={},st={},ct={},ut={},lt={},ft={},dt={},ht={},pt={},gt={},mt={},vt={},bt={},yt={},wt={},_t=function(t,e,n,o){var i,a,s,c,u,l=n||tt,d=0,p="",g=!1,m=!1,v=!1;for(n||(t.scheme="",t.username="",t.password="",t.host=null,t.port=null,t.path=[],t.query=null,t.fragment=null,t.cannotBeABaseURL=!1,e=e.replace(M,"")),e=e.replace(j,""),i=h(e);d<=i.length;){switch(a=i[d],l){case tt:if(!a||!$.test(a)){if(n)return"Invalid scheme";l=nt;continue}p+=a.toLowerCase(),l=et;break;case et:if(a&&(k.test(a)||"+"==a||"-"==a||"."==a))p+=a.toLowerCase();else{if(":"!=a){if(n)return"Invalid scheme";p="",l=nt,d=0;continue}if(n&&(K(t)!=f(G,p)||"file"==p&&(J(t)||null!==t.port)||"file"==t.scheme&&!t.host))return;if(t.scheme=p,n)return void(K(t)&&G[t.scheme]==t.port&&(t.port=null));p="","file"==t.scheme?l=ht:K(t)&&o&&o.scheme==t.scheme?l=rt:K(t)?l=st:"/"==i[d+1]?(l=ot,d++):(t.cannotBeABaseURL=!0,t.path.push(""),l=bt)}break;case nt:if(!o||o.cannotBeABaseURL&&"#"!=a)return"Invalid scheme";if(o.cannotBeABaseURL&&"#"==a){t.scheme=o.scheme,t.path=o.path.slice(),t.query=o.query,t.fragment="",t.cannotBeABaseURL=!0,l=wt;break}l="file"==o.scheme?ht:it;continue;case rt:if("/"!=a||"/"!=i[d+1]){l=it;continue}l=ct,d++;break;case ot:if("/"==a){l=ut;break}l=vt;continue;case it:if(t.scheme=o.scheme,a==r)t.username=o.username,t.password=o.password,t.host=o.host,t.port=o.port,t.path=o.path.slice(),t.query=o.query;else if("/"==a||"\\"==a&&K(t))l=at;else if("?"==a)t.username=o.username,t.password=o.password,t.host=o.host,t.port=o.port,t.path=o.path.slice(),t.query="",l=yt;else{if("#"!=a){t.username=o.username,t.password=o.password,t.host=o.host,t.port=o.port,t.path=o.path.slice(),t.path.pop(),l=vt;continue}t.username=o.username,t.password=o.password,t.host=o.host,t.port=o.port,t.path=o.path.slice(),t.query=o.query,t.fragment="",l=wt}break;case at:if(!K(t)||"/"!=a&&"\\"!=a){if("/"!=a){t.username=o.username,t.password=o.password,t.host=o.host,t.port=o.port,l=vt;continue}l=ut}else l=ct;break;case st:if(l=ct,"/"!=a||"/"!=p.charAt(d+1))continue;d++;break;case ct:if("/"!=a&&"\\"!=a){l=ut;continue}break;case ut:if("@"==a){g&&(p="%40"+p),g=!0,s=h(p);for(var b=0;b<s.length;b++){var y=s[b];if(":"!=y||v){var w=W(y,V);v?t.password+=w:t.username+=w}else v=!0}p=""}else if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&K(t)){if(g&&""==p)return"Invalid authority";d-=h(p).length+1,p="",l=lt}else p+=a;break;case lt:case ft:if(n&&"file"==t.scheme){l=gt;continue}if(":"!=a||m){if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&K(t)){if(K(t)&&""==p)return"Invalid host";if(n&&""==p&&(J(t)||null!==t.port))return;if(c=U(t,p))return c;if(p="",l=mt,n)return;continue}"["==a?m=!0:"]"==a&&(m=!1),p+=a}else{if(""==p)return"Invalid host";if(c=U(t,p))return c;if(p="",l=dt,n==ft)return}break;case dt:if(!O.test(a)){if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&K(t)||n){if(""!=p){var _=parseInt(p,10);if(_>65535)return"Invalid port";t.port=K(t)&&_===G[t.scheme]?null:_,p=""}if(n)return;l=mt;continue}return"Invalid port"}p+=a;break;case ht:if(t.scheme="file","/"==a||"\\"==a)l=pt;else{if(!o||"file"!=o.scheme){l=vt;continue}if(a==r)t.host=o.host,t.path=o.path.slice(),t.query=o.query;else if("?"==a)t.host=o.host,t.path=o.path.slice(),t.query="",l=yt;else{if("#"!=a){X(i.slice(d).join(""))||(t.host=o.host,t.path=o.path.slice(),Y(t)),l=vt;continue}t.host=o.host,t.path=o.path.slice(),t.query=o.query,t.fragment="",l=wt}}break;case pt:if("/"==a||"\\"==a){l=gt;break}o&&"file"==o.scheme&&!X(i.slice(d).join(""))&&(H(o.path[0],!0)?t.path.push(o.path[0]):t.host=o.host),l=vt;continue;case gt:if(a==r||"/"==a||"\\"==a||"?"==a||"#"==a){if(!n&&H(p))l=vt;else if(""==p){if(t.host="",n)return;l=mt}else{if(c=U(t,p))return c;if("localhost"==t.host&&(t.host=""),n)return;p="",l=mt}continue}p+=a;break;case mt:if(K(t)){if(l=vt,"/"!=a&&"\\"!=a)continue}else if(n||"?"!=a)if(n||"#"!=a){if(a!=r&&(l=vt,"/"!=a))continue}else t.fragment="",l=wt;else t.query="",l=yt;break;case vt:if(a==r||"/"==a||"\\"==a&&K(t)||!n&&("?"==a||"#"==a)){if(".."===(u=(u=p).toLowerCase())||"%2e."===u||".%2e"===u||"%2e%2e"===u?(Y(t),"/"==a||"\\"==a&&K(t)||t.path.push("")):Z(p)?"/"==a||"\\"==a&&K(t)||t.path.push(""):("file"==t.scheme&&!t.path.length&&H(p)&&(t.host&&(t.host=""),p=p.charAt(0)+":"),t.path.push(p)),p="","file"==t.scheme&&(a==r||"?"==a||"#"==a))for(;t.path.length>1&&""===t.path[0];)t.path.shift();"?"==a?(t.query="",l=yt):"#"==a&&(t.fragment="",l=wt)}else p+=W(a,q);break;case bt:"?"==a?(t.query="",l=yt):"#"==a?(t.fragment="",l=wt):a!=r&&(t.path[0]+=W(a,F));break;case yt:n||"#"!=a?a!=r&&("'"==a&&K(t)?t.query+="%27":t.query+="#"==a?"%23":W(a,F)):(t.fragment="",l=wt);break;case wt:a!=r&&(t.fragment+=W(a,z))}d++}},Et=function(t){var e,n,r=l(this,Et,"URL"),o=arguments.length>1?arguments[1]:void 0,a=String(t),s=E(r,{type:"URL"});if(void 0!==o)if(o instanceof Et)e=x(o);else if(n=_t(e={},String(o)))throw TypeError(n);if(n=_t(s,a,null,e))throw TypeError(n);var c=s.searchParams=new w,u=_(c);u.updateSearchParams(s.query),u.updateURL=function(){s.query=String(c)||null},i||(r.href=St.call(r),r.origin=Tt.call(r),r.protocol=$t.call(r),r.username=kt.call(r),r.password=Ot.call(r),r.host=Ct.call(r),r.hostname=At.call(r),r.port=It.call(r),r.pathname=Nt.call(r),r.search=Rt.call(r),r.searchParams=Pt.call(r),r.hash=Mt.call(r))},xt=Et.prototype,St=function(){var t=x(this),e=t.scheme,n=t.username,r=t.password,o=t.host,i=t.port,a=t.path,s=t.query,c=t.fragment,u=e+":";return null!==o?(u+="//",J(t)&&(u+=n+(r?":"+r:"")+"@"),u+=D(o),null!==i&&(u+=":"+i)):"file"==e&&(u+="//"),u+=t.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==s&&(u+="?"+s),null!==c&&(u+="#"+c),u},Tt=function(){var t=x(this),e=t.scheme,n=t.port;if("blob"==e)try{return new URL(e.path[0]).origin}catch(t){return"null"}return"file"!=e&&K(t)?e+"://"+D(t.host)+(null!==n?":"+n:""):"null"},$t=function(){return x(this).scheme+":"},kt=function(){return x(this).username},Ot=function(){return x(this).password},Ct=function(){var t=x(this),e=t.host,n=t.port;return null===e?"":null===n?D(e):D(e)+":"+n},At=function(){var t=x(this).host;return null===t?"":D(t)},It=function(){var t=x(this).port;return null===t?"":String(t)},Nt=function(){var t=x(this),e=t.path;return t.cannotBeABaseURL?e[0]:e.length?"/"+e.join("/"):""},Rt=function(){var t=x(this).query;return t?"?"+t:""},Pt=function(){return x(this).searchParams},Mt=function(){var t=x(this).fragment;return t?"#"+t:""},jt=function(t,e){return{get:t,set:e,configurable:!0,enumerable:!0}};if(i&&c(xt,{href:jt(St,(function(t){var e=x(this),n=String(t),r=_t(e,n);if(r)throw TypeError(r);_(e.searchParams).updateSearchParams(e.query)})),origin:jt(Tt),protocol:jt($t,(function(t){var e=x(this);_t(e,String(t)+":",tt)})),username:jt(kt,(function(t){var e=x(this),n=h(String(t));if(!Q(e)){e.username="";for(var r=0;r<n.length;r++)e.username+=W(n[r],V)}})),password:jt(Ot,(function(t){var e=x(this),n=h(String(t));if(!Q(e)){e.password="";for(var r=0;r<n.length;r++)e.password+=W(n[r],V)}})),host:jt(Ct,(function(t){var e=x(this);e.cannotBeABaseURL||_t(e,String(t),lt)})),hostname:jt(At,(function(t){var e=x(this);e.cannotBeABaseURL||_t(e,String(t),ft)})),port:jt(It,(function(t){var e=x(this);Q(e)||(""==(t=String(t))?e.port=null:_t(e,t,dt))})),pathname:jt(Nt,(function(t){var e=x(this);e.cannotBeABaseURL||(e.path=[],_t(e,t+"",mt))})),search:jt(Rt,(function(t){var e=x(this);""==(t=String(t))?e.query=null:("?"==t.charAt(0)&&(t=t.slice(1)),e.query="",_t(e,t,yt)),_(e.searchParams).updateSearchParams(e.query)})),searchParams:jt(Pt),hash:jt(Mt,(function(t){var e=x(this);""!=(t=String(t))?("#"==t.charAt(0)&&(t=t.slice(1)),e.fragment="",_t(e,t,wt)):e.fragment=null}))}),u(xt,"toJSON",(function(){return St.call(this)}),{enumerable:!0}),u(xt,"toString",(function(){return St.call(this)}),{enumerable:!0}),y){var Ut=y.createObjectURL,Lt=y.revokeObjectURL;Ut&&u(Et,"createObjectURL",(function(t){return Ut.apply(y,arguments)})),Lt&&u(Et,"revokeObjectURL",(function(t){return Lt.apply(y,arguments)}))}m(Et,"URL"),o({global:!0,forced:!a,sham:!i},{URL:Et})},function(t,e,n){"use strict";var r=/[^\0-\u007E]/,o=/[.\u3002\uFF0E\uFF61]/g,i="Overflow: input needs wider integers to process",a=Math.floor,s=String.fromCharCode,c=function(t){return t+22+75*(t<26)},u=function(t,e,n){var r=0;for(t=n?a(t/700):t>>1,t+=a(t/e);t>455;r+=36)t=a(t/35);return a(r+36*t/(t+38))},l=function(t){var e,n,r=[],o=(t=function(t){for(var e=[],n=0,r=t.length;n<r;){var o=t.charCodeAt(n++);if(o>=55296&&o<=56319&&n<r){var i=t.charCodeAt(n++);56320==(64512&i)?e.push(((1023&o)<<10)+(1023&i)+65536):(e.push(o),n--)}else e.push(o)}return e}(t)).length,l=128,f=0,d=72;for(e=0;e<t.length;e++)(n=t[e])<128&&r.push(s(n));var h=r.length,p=h;for(h&&r.push("-");p<o;){var g=2147483647;for(e=0;e<t.length;e++)(n=t[e])>=l&&n<g&&(g=n);var m=p+1;if(g-l>a((2147483647-f)/m))throw RangeError(i);for(f+=(g-l)*m,l=g,e=0;e<t.length;e++){if((n=t[e])<l&&++f>2147483647)throw RangeError(i);if(n==l){for(var v=f,b=36;;b+=36){var y=b<=d?1:b>=d+26?26:b-d;if(v<y)break;var w=v-y,_=36-y;r.push(s(c(y+w%_))),v=a(w/_)}r.push(s(c(v))),d=u(f,m,p==h),f=0,++p}}++f,++l}return r.join("")};t.exports=function(t){var e,n,i=[],a=t.toLowerCase().replace(o,".").split(".");for(e=0;e<a.length;e++)n=a[e],i.push(r.test(n)?"xn--"+l(n):n);return i.join(".")}},function(t,e,n){var r=n(4),o=n(57);t.exports=function(t){var e=o(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return r(e.call(t))}},function(t,e,n){"use strict";n(0)({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(99),i=n(61),a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=$(t).not("[bld-dd]");if(n.length){var r;n.attr("bld-dd",1);var o={on:e.click?"click":"hover",onShow:function(){var t=$(this).closest(".ui.dropdown"),e=t.find(".text"),n=e.innerWidth(),o=e.text().trim().length,i=t.innerWidth()-n,a=t.find(".menu").children(".item"),s=0;if(a.each((function(t,e){$(e).text().length>s&&(s=$(e).text().length)})),t.find(".menu").css("min-width",i+1.33*s*n/(o||1)),t.hasClass("toggling")){var c=t.find("select")[0],u=c.options[c.selectedIndex];r=$(u).attr("data-toggle")}return!0},onChange:function(t,e,n){var o=$(this).closest(".ui.dropdown");if(o.hasClass("label-select"))return o.dropdown("set text",i.sanitize(t));if(o.hasClass("toggling")){var a=o.find("select")[0].options[n.index()],s=$(a).attr("data-toggle");s!==r&&(r&&o.siblings(r).transition("toggle"),s&&o.siblings(s).transition("toggle"),r=s)}}};n.find(".ui.dropdown").dropdown(o).filter(".label-select").each((function(){var t=$(this).dropdown("get value")||$(this).find(".menu .item").first().attr("data-value");$(this).dropdown("set selected",t)}))}},s=function(t,e,n){var r=$(t.target).closest(e),o=r.parent().children(n);r.addClass("hidden").hide(),o.removeClass("hidden").show()},c=function(t,e){for(var n,r,o=$(t.target).closest(".clause");(n=o.parent().closest(".clause")).length;)o=n;var i=o.closest(".ui.popup");if(i.length){var c=i.prev("span");r=c.length?c.children(".builder-open.builder-popup"):i.siblings(".builder-open.builder-popup")}else{var u=o.closest(".ui.modal");if(u.length)r=$(u.data("button"));else r=o.closest(".builder-inline").prev(".builder-clauses").children(".builder-open")}var f,d=r.siblings(".builder-optional.clause:last"),h=d.children(".clause-value");e&&$(d).hasClass("multiple-clause")&&(f=d.clone(!1)),h.text(T(o[0])),d.hasClass("hidden")&&(a(d),d.find(".builder-delete").click(l),d.hasClass("multiple-clause")?function(t,e,n){$(t.target).closest(e).parent().children(n).transition({animation:"drop",duration:"0.33s"})}({target:r[0]},r,".builder-optional.clause:last"):s({target:r[0]},r,".builder-optional.clause:last")),f&&f.insertAfter(d)},u=function(t){$(t.target).closest(".clause").find('input[type="text"]:not(.optional):visible').filter((function(){return!this.value})).addClass("error").off("focus").focus((function(){$(this).removeClass("error")})).length||(c(t,!0),$(t.target).closest(".ui.popup").popup("hide all"),$(t.target).closest(".ui.modal").modal("hide"))},l=function(t){var e=$(t.target).closest(".builder-optional");(0===e.siblings(".builder-optional:visible").length?e.add(e.siblings(".prefix")):e).transition({animation:"scale",duration:"0.25s",onComplete:function(){var t=$(this).parent().closest(".clause");e.detach(),t.length&&c({target:t[0]})}})},f=function(t){var e=$(t.target).closest(".multiple-clause"),n=e.prev(".multiple-clause");n&&e.transition({animation:"scale",duration:"0.25s",onComplete:function(){e.detach().insertBefore(n).transition("scale")}})},d=function(t){$(this).data("search-select",i.sanitize(t))},h={},p=function(t,e){return new TrelloPowerUp.Promise((function(n,r){if(h[t])return n(h[t]);var o="".concat(t,"__loading");h[o]||(h[o]=[]),h[o].push({resolve:n,reject:r}),h[o].length>1||e((function(e){h[t]=e;var n=h[o];delete h[o],n.forEach((function(t){t.resolve(e)}))}),(function(t){var e=h[o];delete h[o],e.forEach((function(e){e.reject(t)}))}))}))},g=function(){return p("lists",(function(t,e){TrelloPowerUp.iframe({targetOrigin:"https://trello.com"}).lists("name").then((function(e){t(e)})).catch((function(t){e(t)}))}))},m=function(t){var e=$(this).data("search-select");return!e||(i.sanitize(t)!==e?($(this).data("search-select",""),!0):($(this).search("search local",""),!1))},v=function(){return p("boards",(function(t,e){o.getMyBoards({filter:"open",lists:"open",limit:100}).then(t).catch(e)}))},b=function t(e,n,r){if(!n)return g().then((function(n){n&&t(e,n,r)}));var o=n.find((function(t){return t.selected}));o&&e.each((function(){d.bind(this)(o.name),$(this).val(o.name)}));var a={};n=n.filter((function(t){return!a[t.name]&&(a[t.name]=!0)})).map((function(t){return{name:i.sanitize(t.name)}})),e.addClass("prompt").parent().addClass("search").search("clear cache").search("hide results").search({source:n,fields:{title:"name"},searchFields:["name"],searchFullText:!1,showNoResults:!1,minCharacters:0,maxResults:20,onSearchQuery:m,onSelect:function(t){d.bind(this)(t.name)}}).each((function(){var t=$(this).search("get value");t&&(r&&!a[t]?$(this).search("set value",""):d.bind(this)(t))}))},y=function t(e,n,r){if(!n)return v().then((function(n){n&&t(e,n,r)}));var o=n.find((function(t){return t.selected}));o&&e.each((function(){d.bind(this)(o.name),$(this).val(o.name)}));var a={};n=n.filter((function(t){return!a[t.name]&&(a[t.name]=t)})).map((function(t){return{name:i.sanitize(t.name),lists:t.lists}}));var s=function(t){var e,n=$(t).find('[name="board-name"]');return $(t).closest(".phrase,.clause,.output-phrase").find('[name="list-name"],[name="board-name"]').get().find((function(t,r,o){return t===n[0]&&(e=$(o[r-1]).filter('[name="list-name"]'),!0)})),e};e.addClass("prompt").parent().addClass("search").search({source:n,fields:{title:"name"},searchFields:["name"],searchFullText:!1,showNoResults:!1,minCharacters:0,maxResults:20,onSearchQuery:m,onSelect:function(t){d.bind(this)(t.name);var e=s(this);e&&b(e,t.lists,!0);var n=$(this);$(this).closest(".builder-optional").find(".builder-close").on("click",(function(){n.search("set value",""),g().then((function(t){b(e,t,!0)}))}))}}).each((function(){var t=$(this).search("get value");if(t&&(d.bind(this)(t),r)){var e=a[t];if(e){var n=s(this);n&&b(n,e.lists)}}}))},w=function(){var t=$(this).search("get value");"string"==typeof t&&d.bind(this)(t)},_=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=TrelloPowerUp.iframe({targetOrigin:"https://trello.com"}),r=$(t).find(".ui.input>input"),o=$(r).filter('[name="list-name"]');o.length&&g().then((function(t){if(e.select_default){var r=n.getContext().list,i=t.find((function(t){return t.id===r}))||t[0];i&&(i.selected=!0)}b(o,t)}));var a=$(r).filter('[name="board-name"]');a.length&&v().then((function(t){if(e.select_default){var r=n.getContext().board,o=t.find((function(t){return t.id==r}))||t[0];o&&(o.selected=!0)}y(a,t)}));var s=$(r).filter('[name="username"]'),c=$(r).filter('[name="field-name"]'),u=$(t).find(".dropdown.label-select");(s.length||c.length)&&n.board("members","customFields","labels").then((function(e){var n;e.members.forEach((function(t){t.username=i.sanitize(t.username),t.fullName=i.sanitize(t.fullName)})),s.addClass("prompt").parent().addClass("search").search({source:e.members,fields:{title:"username",description:"fullName"},searchFields:["username","fullName"],searchFullText:!1,showNoResults:!1,minCharacters:0,maxResults:20,onSearchQuery:m,onSelect:function(t){d.bind(this)(t.username)}}),$(t).find(".no-custom-fields").transition(e.customFields.length?"hide":"show"),e.customFields.forEach((function(t){t.name=i.sanitize(t.name)})),c.addClass("prompt").parent().addClass("search").each((function(){var t=e.customFields,n=$(this).find('input[name="field-name"]').attr("data-field-type");n&&(t=t.filter((function(t){return-1!=n.indexOf(t.type)}))),$(this).search({source:t,fields:{title:"name",description:"type"},searchFields:["name"],searchFullText:!1,showNoResults:!1,minCharacters:0,maxResults:20,onSearchQuery:m,onSelect:function(t){d.bind(this)(t.name);var e=$(this).siblings().find('input[name="field-value"]');e&&(e.val(""),"list"===t.type?e.addClass("prompt").parent().addClass("search").search("clear cache").search({source:t.options.map((function(t){return{name:t.value.text}})),fields:{title:"name"},searchFields:["name"],searchFullText:!1,showNoResults:!1,minCharacters:0,maxResults:20,onSearchQuery:m,onSelect:function(t){d.bind(e)(t.name)}}):e.removeClass("prompt").parent().removeClass("search"))}})})),u.find(".menu").html(e.labels.map((function(t,e){var r=[];return t.color&&r.push(t.color),t.name&&r.push('"'.concat(t.name,'"')),r=r.join(" "),e||(n=r),'<div class="item batch-label '+(t.color||"colorless")+(e?"":" active selected")+'" data-value="'+sanitize(r)+'">'+(t.name?sanitize(t.name):"&nbsp;")+"</div>"}))),u.dropdown("refresh").dropdown("set selected",n)}))},E=function(t){try{return JSON.parse(t)}catch(e){throw console.log("[ERROR] parsing JSON:",t),e}},x=function(t){var e=new RegExp('["'.concat(String.fromCharCode(8220)).concat(String.fromCharCode(8221),"]"),"g");return t.replace(e,'\\"').split("\n").join("\\n")},S=function t(e,n){if(n){if("object"!==r(e))throw new Error("mergeSchemas: Expected object:\ns=".concat(JSON.stringify(e)));if("object"!==r(n))throw new Error("mergeSchemas: Expected object\nt=".concat(JSON.stringify(n)));Object.getOwnPropertyNames(n).forEach((function(r){r in e?t(e[r],n[r]):e[r]=n[r]}))}},T=function t(e){if(!e)return null;var n=$(e);if(e.nodeType===Node.TEXT_NODE)return e.nodeValue.replace(/^\s+/," ").replace(/\s+$/," ").replace(/^ ,/,",");if(e.nodeType===Node.ELEMENT_NODE){if(n.hasClass("hidden")||n.hasClass("popup")||n.hasClass("builder-comment")||n.hasClass("results")||"none"===n.css("display"))return null;if(n.hasClass("action-output-text"))return e.textContent.replace(/^\s+/," ").replace(/\s+$/," ").replace(/^ ,/,",");if(n.hasClass("button")){var r=n.find(".default-value");return r.length?t(r[0]):null}if("SCRIPT"===e.nodeName)return null;if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var o=n.prop("value").trim();return n.hasClass("optional")&&!o?null:(o||(o=n.prop("placeholder")),n.hasClass("quoted-value")?'"'.concat(x(o),'"'):o)}if(n.hasClass("dropdown"))return $(n).dropdown("get value").trim();for(var i=[],a=0;a<e.childNodes.length;++a)i.push(t(e.childNodes[a]));var s=i.filter((function(t){return!!t})).map((function(t,e,n){return" "===t.slice(-1)&&e<n.length-1&&-1!==" ,".indexOf(n[e+1][0])?t.slice(0,-1):t})).join("").trim();return n.hasClass("new-phrase")?"\n".concat(s):(n.hasClass("clause")&&","!==s[0]?" ":"")+s}return null},k={setupClauses:function(t,e){t||(t=$("body"));var n=$(t).not("[bld-cl]");n.length&&(n.attr("bld-cl",1),a(n.find(".builder.ui.popup"),e),n.find(".builder.popup .clause.segment, .builder.modal .clause.segment, .builder-inline .clause.segment").prepend('<div class="ui icon transparent right floated small button select-clause-btn" tabindex="0"><i class="plus icon"></i></div>'),n.find(".select-clause-btn").off("click").click(u),n.find(".builder-open:not(.builder-popup)").off("click").click((function(t){s(t,".builder-open",".builder-optional")})),n.find(".builder-close:not(.builder-popup)").off("click").click((function(t){s(t,".builder-optional",".builder-open")})),n.find(".builder-add-clause").off("click").click((function(t){var n=$(t.target).closest(".builder-add-clause"),r=n.siblings(".multiple-clause"),o=r.first(),i=n.attr("max-clauses");if(i&&r.length>i)return n.transition("shake"),void n.siblings(".builder-max-clauses").transition("hide").transition("scale");var c=o.clone(!1);c.find("input").val(""),a(c,e),_(c,e),c.find(".builder-open-nested").click((function(t){s(t,".builder-open-nested",".builder-optional-nested")})),c.find(".builder-delete").click(l),c.find(".builder-up-clause").click(f),c.insertBefore(n).transition("drop")})),n.find(".builder-open.builder-popup").each((function(t,e){var n=$(e),r=n.attr("data-modal-selector");if(r)return n.off("click").click((function(){var t=$(r);t.modal({onShow:function(){t.data("button",n),n.siblings(".prefix").transition("show")},onHide:function(){delete t.__button,n.siblings(".builder-optional:visible").length||n.siblings(".prefix").transition("scale down")}}).modal("show")}));var o=".card-filter.popup"===n.attr("data-popup-selector"),i=n;n.popup({on:"click",inline:!1,popup:n.attr("data-popup-selector"),target:i,position:"bottom center",lastResort:"bottom left",hoverable:!1,boundary:".builder-wizard-body",onShow:function(){var t=i.parent("span");t.length&&$(t).after($(this).detach()),n.siblings(".prefix").transition("show"),o&&$(".card-filter.popup").find(".item").tab("change tab","card-filter-base")},onHidden:function(){n.siblings(".builder-optional:visible").length||n.siblings(".prefix").transition("scale down")}})})),n.find(".builder-close.builder-popup").off("click").click((function(t){s(t,".builder-optional",".builder-open.builder-popup")})),n.find(".close-popup").off("click").click((function(t){$(t.target).closest(".popup").popup("hide all")})))},setupDropdowns:a,setupInputFields:function(t){var e=$(t).not("[bld-if]");if(e.length){e.attr("bld-if",1);var n=new Date,r=n.getHours(),o=5*Math.ceil(n.getMinutes()/5);o>=60&&(++r,o=0);var i=1===Math.floor(r/12);r=r%12||12;var a=e.find("input");a.filter(".numeric-value").off("blur").blur((function(t){if(!t.target.value.match(/^{.*}$/)){var e=parseInt(t.target.value,10),n=$(t.target).attr("data-min-value")||0,r=$(t.target).attr("data-max-value");void 0===n&&(n=0),isNaN(e)||e<n?t.target.value=n:void 0!==r&&e>r&&(t.target.value=r)}})),a.filter(".hour").val(r).off("blur").blur((function(t){var e=parseInt(t.target.value,10);isNaN(e)||e<1?t.target.value=12:e>12&&(t.target.value=Math.min(e-12,11),$(t.target).parent().siblings(".dropdown").dropdown("set selected","pm"))})),a.filter(".minutes").val(o>9?o:"0".concat(o)).off("blur").blur((function(t){var e=parseInt(t.target.value,10);isNaN(e)||e<0?e=0:t.target.value>59&&(e=59),t.target.value=e>9?e:"0".concat(e)})),e.find(".dropdown.ampm").dropdown("set selected",i?"pm":"am"),a.filter(".year").off("blur").blur((function(t){var e=parseInt(t.target.value,10);isNaN(e)?t.target.value=(new Date).getYear()+1900:e<100&&(t.target.value=2e3+e)})),a.filter('[name="report-var"]').off("blur").blur((function(t){t.target.value=t.target.value.replace(/[^a-zA-Z0-9_]/g,"_")}))}},setupPowerUpAutoComplete:_,setupListNameAutoComplete:b,setupBoardNameAutoComplete:y,setupAutoComplete:function(t,e,n){var r=e.map((function(t){var e={record:t};return e[n]=i.sanitize(t[n]),e}));t.parent().search({source:r,fields:{title:n},searchFields:[n],searchFullText:!1,showNoResults:!1,minCharacters:0,maxResults:20,onSearchQuery:m,onSelect:function(t){d.bind(this)(t.record[n])}}),w.bind(t.parent())()},collectPhrase:T,collectSchema:function t(e){if(!e)return null;switch(e.nodeType){case Node.TEXT_NODE:return null;case Node.ELEMENT_NODE:var n=$(e);if(n.hasClass("hidden")||n.hasClass("popup")||n.hasClass("builder-comment")||n.hasClass("results")||"none"===n.css("display"))return null;if(n.hasClass("button")){var r=n.find(".default-value");return r.length?t(r[0]):null}if("SCRIPT"===e.nodeName)return null;if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var o=n.attr("schema");if(!o)throw new Error("Schema missing from input node:\n".concat(JSON.stringify(e)));var i=n.prop("value").trim();return n.hasClass("optional")&&!i?null:(i||(i=n.prop("placeholder")),o=o.replace("_v_",i).replace("_q_",'"'.concat(x(i),'"')),E(o))}if(n.hasClass("dropdown")){var a,s=$(n),c=s.dropdown("get value"),u=s.attr("schema");if(u||(u=(a=s.dropdown("get item",c)).attr("schema")),!u){var l=s.find(".menu>.item").index(a);u=$(s.find("select option")[l]).attr("schema")}return u?(u=u.replace("_v_",c).replace("_q_",'"'.concat(x(c),'"')),E(u)):null}var f=$(n).attr("schema");if(f)return E(f);f={};for(var d=0;d<e.childNodes.length;++d)S(f,t(e.childNodes[d]));return f;default:return null}},getSelectedBoards:function(t){return v().then((function(e){return $(t).map((function(){return $(this).val().trim()})).get().map((function(t){return e.find((function(e){return e.name.toLowerCase()===t.toLowerCase()}))||{name:t}}))}))},joinCommandPhrases:function(t,e){var n;return e?(n="".concat(t[0],",\n"),t=t.slice(1)):n="",t.length>1?n+t.slice(0,-1).join(",\n")+(t[t.length-2].match(/^for each /)?",\n":",\nand ")+t.slice(-1)[0]:n+t.join()}};t.exports=k},function(t,e,n){var r=n(359),o=n(98),i=n(46),a={init:function(t){var e={};t=t||TrelloPowerUp.iframe({targetOrigin:"https://trello.com"});var n,s=TrelloPowerUp.Promise;function c(){e={}}function u(t){switch(t){case"board-button":case"card-button":return!0;case"rule":case"schedule":case"on-date":return!1;default:throw new Error("Unknown command type.")}}function l(e){return t.set("board","private","overrides",e)}function f(e){return s.join(t.getAll(),t.member("id")).spread((function(t,n){var i,a=[],s={};if(Object.keys(t||[]).forEach((function(e){Object.keys(t[e]).forEach((function(i){var c=t[e][i].commands;if(c){if("string"==typeof c)try{c=JSON.parse(r.decompressFromUTF16(c))}catch(t){return void o.logError(t,"Context: getPupStorageCommands","PARSE DECOMPRESSED DATA",c,e,i,n)}c&&(c.forEach((function(t){t.is_own=t.uid===n.id,s[t.id]=t})),a=a.concat(c))}}))})),e)return{commands:a};try{i=t.board.private.overrides}catch(t){}var c=!1;return Object.keys(i||{}).forEach((function(t){var e=s[t];e?Object.keys(i[t]).forEach((function(n){e[n]=i[t][n]})):+new Date-i[t].ot>7776e6&&(delete i[t],c=!0)})),c?l(i).then((function(){return{commands:a}})):{commands:a}}))}function d(){return t.get("member","private","token")}function h(t,n){var r=t.commands;return r.forEach((function(t){t.is_own=!0,t.enabled=-1!==t.b.indexOf(n)})),e.commands=r,void 0!==t.oboWritable&&(e.oboWritable=t.oboWritable),e}function p(){return e.commands?new s((function(t){t(e)})):d().then((function(e){return new s((function(r,o){var a=t.getContext().board,s="?b=".concat(a),c=n?"&obo=".concat(n):"";$.ajax("".concat(i,"powerup-commands").concat(s).concat(c),{type:"GET",headers:{"X-Butler-Trello-Token":e}}).done((function(t){return t.success?r(h(t.response,a)):o(new Error(t.error||"NO_RESPONSE"))})).fail((function(){o(new Error("NETWORK_ERROR"))}))}))}))}function g(t,e){return(u(t)?f(e):p()).then((function(e){return{commands:e.commands.filter((function(e){return e.type===t})),obo_writable:e.oboWritable}}))}function m(e,n,i){var s=i.filter((function(t){return t.scope===e&&t.shared===n})),c=r.compressToUTF16(JSON.stringify(s));return t.set(e===a.ScopeTeam?"organization":"board",n?"shared":"private","commands",c).then((function(){t.get(e===a.ScopeTeam?"organization":"board",n?"shared":"private","commands").then((function(t){try{t=JSON.parse(r.decompressFromUTF16(t))}catch(e){o.logError(e,"Context: saveFilteredCommands",{in:JSON.stringify(i),out:t})}}))}))}function v(e,r,o){return s.join(f(!0),p(),t.member("id","username")).spread((function(a,c,u){var l=a.commands.findIndex((function(t){return t.id===e}));return-1!==l?function(t,e,n,r,o){var i=t[e];if(i.uid!==n.id&&!o)return s.reject(new Error("Command not own."));var a=i.scope,c=i.shared,u=r(i);return u?(u.uid=n.id,u.username=n.username,u.t=+new Date,t.splice(e,1,u),u.scope===a&&u.shared===c?m(a,c,t).then((function(){return u})):m(i.scope,i.shared,t).then((function(){return m(a,c,t)})).then((function(){return u}))):(t.splice(e,1),m(a,c,t).then((function(){return i})))}(a.commands,l,u,r,o):-1!==(l=c.commands.findIndex((function(t){return t.id===e})))?function(e,r,o){var a=e[r],c=o(a);return s.join(d(),t.board("id","name","url")).spread((function(t,e){var r;return r=c?JSON.stringify({op:"update",params:{command:c,board:e},obo:n}):JSON.stringify({op:"delete",params:{board:e},obo:n}),new s((function(n,o){$.ajax("".concat(i,"powerup-commands/").concat(a.id),{type:"POST",data:r,contentType:"application/json",headers:{"X-Butler-Trello-Token":t}}).done((function(t){if(!t.success)return o(new Error(t.error||"NO_RESPONSE"));h(t.response,e.id);var r=t.response.commands.find((function(t){return t.id===a.id}));return n(r)})).fail((function(){o(new Error("NETWORK_ERROR"))}))}))}))}(c.commands,l,r):s.reject(new Error("Command not found."))}))}a.init=function(e){t=e||TrelloPowerUp.iframe({targetOrigin:"https://trello.com"})},a.setAdminOnBehalfOf=function(t){n!==t&&(n=t||void 0,c())},a.getAdminOnBehalfOf=function(){return n},a.ScopeBoard="board",a.ScopeTeam="team",a.getCommand=function(t,e,n){return g(t,n).then((function(t){return t.commands.find((function(t){return t.id===e}))}))},a.getCommandById=function(t,e,n){return f(e).then((function(e){var r=e.commands.find((function(e){return e.id===t}));return r||(n?void 0:p().then((function(e){return e.commands.find((function(e){return e.id===t}))})))}))},a.getCommands=g,a.getAllCommands=function(t){return s.join(f(t),p()).spread((function(t,e){return{commands:t.commands.concat(e.commands),obo_writable:e.oboWritable}}))},a.getLocalCommands=f,a.addCommand=function(e){return u(e.type)?function(e){return s.join(t.member("id","username"),f(!0)).spread((function(t,n){var r,o=n.commands,i=+new Date;do{r="".concat(t.id,"-").concat(++i)}while(o.some((function(t){return t.id===r})));return e.id=r,e.uid=t.id,e.username=t.username,e.t=i,o.push(e),m(e.scope,e.shared,o).then((function(){return e.is_own=!0,e}))}))}(e):function(e){return s.join(d(),t.board("id","name","url")).spread((function(t,r){return new s((function(o,a){$.ajax("".concat(i,"powerup-commands"),{type:"POST",data:JSON.stringify({op:"new",params:{command:e,board:r},obo:n}),contentType:"application/json",headers:{"X-Butler-Trello-Token":t}}).done((function(t){if(!t.success)return a(new Error(t.error||"NO_RESPONSE"));h(t.response,r.id);var e=t.response.commands.find((function(e){return e.id===t.response.cmd_id}));return o(e)})).fail((function(){return a(new Error("NETWORK_ERROR"))}))}))}))}(e)},a.removeCommandId=function(t,e){return v(t,(function(){return null}),e)},a.updateCommandId=function(t,e,n){return v(t,(function(t){return Object.keys(e).forEach((function(n){t[n]=e[n]})),t}),n)},a.enableCommandId=function(e,r){return s.join(f(!0),p()).spread((function(o,a){var c=o.commands.findIndex((function(t){return t.id===e}));return-1!==c?function(e,n){var r=e.id;return t.get("board","private","overrides").then((function(t){t||(t={});var e=t[r];return e||(e=t[r]={}),e.enabled=n,e.ot=+new Date,l(t).then((function(){return Object.keys(t).map((function(t){return{id:t}}))}))}))}(o.commands[c],r):-1!==(c=a.commands.findIndex((function(t){return t.id===e})))?function(e,r){return s.join(d(),t.board("id","name","url")).spread((function(t,o){return new s((function(a,s){$.ajax("".concat(i,"powerup-commands/").concat(e.id),{type:"POST",data:JSON.stringify({op:"enable",params:{enabled:r,board:o},obo:n}),contentType:"application/json",headers:{"X-Butler-Trello-Token":t}}).done((function(t){return t.success?a(h(t.response,o.id).commands):s(new Error(t.error||"NO_RESPONSE"))})).fail((function(){return s(new Error("NETWORK_ERROR"))}))}))}))}(a.commands[c],r):s.reject(new Error("Command not found."))}))},a.clearCachedServerCommands=c,a.getSharedLibraries=function(){return d().then((function(e){return new s((function(r,o){var a="?b=".concat(t.getContext().board),s=n?"&obo=".concat(n):"";$.ajax("".concat(i,"powerup-commands").concat(a).concat(s),{type:"GET",headers:{"X-Butler-Trello-Token":e}}).done((function(t){return t.success?r(t.response.libs):o(new Error(t.error||"NO_RESPONSE"))})).fail((function(){o(new Error("NETWORK_ERROR"))}))}))}))},a.getSharedLibrary=function(e){return d().then((function(r){return new s((function(o,a){var s="?b=".concat(t.getContext().board),c=n?"&obo=".concat(n):"";$.ajax("".concat(i,"powerup-library/").concat(e).concat(s).concat(c),{type:"GET",headers:{"X-Butler-Trello-Token":r}}).done((function(t){return t.success?o(t.response.lib):a(new Error(t.error||"NO_RESPONSE"))})).fail((function(){a(new Error("NETWORK_ERROR"))}))}))}))},a.startSharing=function(e){return d().then((function(r){return new s((function(o,a){var s={title:e,board:{id:t.getContext().board},obo:n};$.ajax("".concat(i,"powerup-library-share"),{type:"POST",data:JSON.stringify(s),contentType:"application/json",headers:{"X-Butler-Trello-Token":r}}).done((function(t){return t.success?o(t.response.lib):a(new Error(t.error||"NO_RESPONSE"))})).fail((function(){return a(new Error("NETWORK_ERROR"))}))}))}))},a.stopSharing=function(e){return d().then((function(r){var o={board:{id:t.getContext().board},obo:n};return new s((function(t,n){$.ajax("".concat(i,"powerup-library-unshare/").concat(e.link_id),{type:"POST",data:JSON.stringify(o),contentType:"application/json",headers:{"X-Butler-Trello-Token":r}}).done((function(e){return e.success?t():n(new Error(e.error||"NO_RESPONSE"))})).fail((function(){return n(new Error("NETWORK_ERROR"))}))}))}))},a.importLibrary=function(e){return d().then((function(r){var o={board:{id:t.getContext().board},obo:n};return new s((function(n,a){$.ajax("".concat(i,"powerup-library-import/").concat(e),{type:"POST",data:JSON.stringify(o),contentType:"application/json",headers:{"X-Butler-Trello-Token":r}}).done((function(e){return e.success?(h(e.response,t.getContext().board),n()):a(new Error(e.error||"NO_RESPONSE"))})).fail((function(){a(new Error("NETWORK_ERROR"))}))}))}))},a.enableLibrary=function(e,r){return s.join(d(),t.board("id","name","url")).spread((function(t,o){var a={title:e,enable:r,board:o,obo:n};return new s((function(e,n){$.ajax("".concat(i,"powerup-library-enable"),{type:"POST",data:JSON.stringify(a),contentType:"application/json",headers:{"X-Butler-Trello-Token":t}}).done((function(t){return t.success?(h(t.response,o.id),e()):n(new Error(t.error||"NO_RESPONSE"))})).fail((function(){n(new Error("NETWORK_ERROR"))}))}))}))},a.renameLibrary=function(e,r){return d().then((function(o){var a={title:e,new_title:r,board:{id:t.getContext().board},obo:n};return new s((function(e,n){$.ajax("".concat(i,"powerup-library-rename"),{type:"POST",data:JSON.stringify(a),contentType:"application/json",headers:{"X-Butler-Trello-Token":o}}).done((function(r){return r.success?(h(r.response,t.getContext().board),e()):n(new Error(r.error||"NO_RESPONSE"))})).fail((function(){n(new Error("NETWORK_ERROR"))}))}))}))}}};window.CommandStorage=a,t.exports=a},function(t,e,n){(function(e){var n="Expected a function",r="__lodash_hash_undefined__",o=1/0,i=9007199254740991,a="[object Arguments]",s="[object Function]",c="[object GeneratorFunction]",u="[object Symbol]",l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,f=/^\w*$/,d=/^\./,h=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,p=/\\(\\)?/g,g=/^\[object .+?Constructor\]$/,m=/^(?:0|[1-9]\d*)$/,v="object"==typeof e&&e&&e.Object===Object&&e,b="object"==typeof self&&self&&self.Object===Object&&self,y=v||b||Function("return this")();var w,_=Array.prototype,E=Function.prototype,x=Object.prototype,S=y["__core-js_shared__"],T=(w=/[^.]+$/.exec(S&&S.keys&&S.keys.IE_PROTO||""))?"Symbol(src)_1."+w:"",$=E.toString,k=x.hasOwnProperty,O=x.toString,C=RegExp("^"+$.call(k).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),A=y.Symbol,I=x.propertyIsEnumerable,N=_.splice,R=V(y,"Map"),P=V(Object,"create"),M=A?A.prototype:void 0,j=M?M.toString:void 0;function U(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function L(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function B(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function D(t,e){for(var n,r,o=t.length;o--;)if((n=t[o][0])===(r=e)||n!=n&&r!=r)return o;return-1}function F(t,e){return null!=t&&k.call(t,e)}function z(t){return!(!Y(t)||(e=t,T&&T in e))&&(H(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?C:g).test(function(t){if(null!=t){try{return $.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t));var e}function q(t,e){var n,r,o=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function V(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return z(n)?n:void 0}function W(t,e,n){for(var r,o,s=-1,c=(e=function(t,e){if(Q(t))return!1;var n=typeof t;if("number"==n||"symbol"==n||"boolean"==n||null==t||tt(t))return!0;return f.test(t)||!l.test(t)||null!=e&&t in Object(e)}(e,t)?[e]:Q(r=e)?r:G(r)).length;++s<c;){var u=K(e[s]);if(!(o=null!=t&&n(t,u)))break;t=t[u]}return o||!!(c=t?t.length:0)&&X(c)&&function(t,e){return!!(e=null==e?i:e)&&("number"==typeof t||m.test(t))&&t>-1&&t%1==0&&t<e}(u,c)&&(Q(t)||function(t){return function(t){return Z(t)&&function(t){return null!=t&&X(t.length)&&!H(t)}(t)}(t)&&k.call(t,"callee")&&(!I.call(t,"callee")||O.call(t)==a)}(t))}U.prototype.clear=function(){this.__data__=P?P(null):{}},U.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},U.prototype.get=function(t){var e=this.__data__;if(P){var n=e[t];return n===r?void 0:n}return k.call(e,t)?e[t]:void 0},U.prototype.has=function(t){var e=this.__data__;return P?void 0!==e[t]:k.call(e,t)},U.prototype.set=function(t,e){return this.__data__[t]=P&&void 0===e?r:e,this},L.prototype.clear=function(){this.__data__=[]},L.prototype.delete=function(t){var e=this.__data__,n=D(e,t);return!(n<0)&&(n==e.length-1?e.pop():N.call(e,n,1),!0)},L.prototype.get=function(t){var e=this.__data__,n=D(e,t);return n<0?void 0:e[n][1]},L.prototype.has=function(t){return D(this.__data__,t)>-1},L.prototype.set=function(t,e){var n=this.__data__,r=D(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},B.prototype.clear=function(){this.__data__={hash:new U,map:new(R||L),string:new U}},B.prototype.delete=function(t){return q(this,t).delete(t)},B.prototype.get=function(t){return q(this,t).get(t)},B.prototype.has=function(t){return q(this,t).has(t)},B.prototype.set=function(t,e){return q(this,t).set(t,e),this};var G=J((function(t){var e;t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if(tt(t))return j?j.call(t):"";var e=t+"";return"0"==e&&1/t==-o?"-0":e}(e);var n=[];return d.test(t)&&n.push(""),t.replace(h,(function(t,e,r,o){n.push(r?o.replace(p,"$1"):e||t)})),n}));function K(t){if("string"==typeof t||tt(t))return t;var e=t+"";return"0"==e&&1/t==-o?"-0":e}function J(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(n);var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a),a};return r.cache=new(J.Cache||B),r}J.Cache=B;var Q=Array.isArray;function H(t){var e=Y(t)?O.call(t):"";return e==s||e==c}function X(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}function Y(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Z(t){return!!t&&"object"==typeof t}function tt(t){return"symbol"==typeof t||Z(t)&&O.call(t)==u}t.exports=function(t,e){return null!=t&&W(t,e,F)}}).call(this,n(100))},function(t,e){var n=function(t){$(t).parent().children(".butler-status").transition("hide")},r=function(){return $(".dashboard-tabs .item.active").attr("data-tab").substr("tab-".length)},o=function(t){n(t),$(t).transition("fade down")},i=function(t,e){var n,r="tab-".concat(t),o=$(".dashboard-tabs .item"),i=$(".dashboard-tab-content").children(".ui.tab");o.each((function(){var t=$(this).attr("data-tab"),o=$(this).attr("data-target-tab")||t;if(t!==r){$(this).removeClass("active");var a=$(this).children(".child-text");a.length&&(a.text(a.attr("data-default")),$(this).removeClass("child-active")),o!==n&&i.filter('.ui.tab[data-tab="'.concat(o,'"]')).removeClass("active").filter(":not(.hidden)").transition("hide")}else{var s=$(this).closest(".ui.dropdown");s.length&&(s.children(".child-text").text($(this).text()),s.hasClass("child-active")||s.addClass("child-active"),s.find(".menu").transition("hide")),$(this).hasClass("active")||$(this).addClass("active"),e?i.filter('.ui.tab[data-tab="'.concat(o,'"]')).transition("hide").transition("slide down"):i.filter('.ui.tab.hidden[data-tab="'.concat(o,'"]')).transition("show"),n=o}}))};window.clearStatus=n,window.getCurrentTab=r,window.showStatus=o,window.showTab=i,t.exports={clearStatus:n,getCurrentTab:r,showStatus:o,showTab:i}},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var i=n(343),a=n(361),s=n(46),c=n(99).Auth,u=n(61),l=TrelloPowerUp.Promise;"function"!=typeof $().transition&&($.prototype.transition=function(){});var f=function(){var t="unknown",e=/^https:\/\/app\.butlerfortrello\.com\/([\w-]+)\//.exec(window.location.href);e&&e[1]&&(t=o(e,2)[1]);return t},d=function(t){var e=(t||window._trello).getContext().board;return e?"&b=".concat(e):""},h=function(t){return(t||window._trello).get("board","private","plan").catch((function(){return null}))},p=function(t,e,n){return t.get("board","private","attn").then((function(r){var o=(r||"").split(",").filter((function(t){return!!t})),i=-1!==o.indexOf(e);return!!n!=!!i&&(n?o.push(e):o=o.filter((function(t){return t!==e})),t.set("board","private","attn",o.join(",")))})).catch((function(t){return u.handleError.bind("setAttnStatus",t)}))},g=function(t){var e,n,r="";t&&(r=t.plan_id||"",e=t.is_org,n=t.org_name,function(t){var e=!1;if(t&&"undefined"!=typeof moment){var n=moment.tz.guess();n!==t&&(e=!0,$(".butler-account-tz").text(t),$(".butler-local-tz").text(n),$(".butler-update-tz-btn").off("click").click((function(){$.ajax("".concat(s,"settings/pup"),{type:"POST",data:JSON.stringify({tz:n}),headers:{"X-Butler-Trello-Token":c.getActiveToken()}}).done((function(){$(".butler-timezone-warning").transition("fade")})).fail((function(){$(this).transition("shake")}))})),$(".butler-ignore-tz-btn").off("click").click((function(){$(".butler-timezone-warning").transition("fade")})))}$(".butler-timezone-warning").transition(e?"show":"hide")}(t.tz));var o=!r.match(/^TRELLO_/);$(".butler-account-type-legacy").transition(o?"show":"hide"),$(".butler-account-type-trello").transition(o?"hide":"show"),r.match(/^ROYAL_TREATMENT/)?($(".butler-bronze").transition("hide"),$(".butler-silver").transition("hide"),$(".butler-team").transition("hide"),$(".butler-enterprise").transition("hide"),$(".butler-gold").transition("show")):"TRELLO_GOLD"===r||r.match(/^SILVER_PLATTER/)?($(".butler-bronze").transition("hide"),$(".butler-gold").transition("hide"),$(".butler-team").transition("hide"),$(".butler-enterprise").transition("hide"),$(".butler-silver").transition("show")):"TRELLO_BC"===r||r.match(/^TEAM/)?($(".butler-bronze").transition("hide"),$(".butler-silver").transition("hide"),$(".butler-gold").transition("hide"),$(".butler-enterprise").transition("hide"),$(".butler-team").transition("show")):"TRELLO_ENTERPRISE"===r||r.match(/^ENTERPRISE/)?($(".butler-bronze").transition("hide"),$(".butler-silver").transition("hide"),$(".butler-gold").transition("hide"),$(".butler-team").transition("hide"),$(".butler-enterprise").transition("show"),$(".butler-enterprise-hide").transition("hide")):($(".butler-silver").transition("hide"),$(".butler-gold").transition("hide"),$(".butler-team").transition("hide"),$(".butler-enterprise").transition("hide"),$(".butler-bronze").transition("show")),e?($(".butler-no-org").transition("hide"),$(".butler-org").transition("show"),n?$(".butler-org-name").text(n):$(".butler-org-name").closest(".butler-org").transition("hide")):($(".butler-org").transition("hide"),$(".butler-no-org").transition("show"))},m=function(t,e){var n={user_id:t.user_id,plan_id:t.plan_id,is_org:t.is_org,is_admin:t.is_admin,org_name:t.org_name};return i(t,"no_ui")&&(n.no_ui=t.no_ui),(e||window._trello).get("board","private","plan",{}).then((function(t){return a(t,n)?null:(e||window._trello).set("board","private","plan",n)})).catch(TrelloPowerUp.PostMessageIO.InvalidContext,TrelloPowerUp.PostMessageIO.PluginDisabled,(function(){return null}))},v=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t||window._trello;if(n.getContext().organization&&n.remove("organization","private","plan").catch((function(){})),l.all([n.remove("board","private","plan"),n.remove("member","private","plan")]).catch((function(){})),!e)try{g()}catch(t){Sentry.captureException(t)}},b=function(t,e){!function(t,e,n){if(void 0!==e&&($(".powerup-usage-quota-exceeded").transition(e?"show":"hide"),p(t||window._trello,"quota",e)),n){$(".powerup-usage").transition("hide"),$(".powerup-nousage").transition("hide");var r=n.usage||0;r||i(n,"quota")?($(".powerup-quota").text(n.quota),$(".powerup-used").text(r),$(".powerup-used-percent").text(Math.round(100*r/n.quota)),$(".powerup-usage").transition("slide down"),n.grant?$(".powerup-grant").transition("show").find(".value").text(n.grant):$(".powerup-grant").transition("hide")):$(".powerup-nousage").transition("slide down")}}(e,t.powerup_usage_exceeded,t.powerup_usage),function(t,e,n){if(void 0!==e&&($(".powerup-usage-ops-quota-exceeded").transition(e?"show":"hide"),p(t||window._trello,"quota-ops",e)),n){var r=n.usage||0;$(".ops-quota").text(n.quota),$(".ops-used").text(r),$(".ops-used-percent").text(Math.round(100*r/n.quota)),n.grant?$(".ops-grant").transition("show").find(".value").text(n.grant):$(".ops-grant").transition("hide")}}(e,t.usage_exceeded,t.usage),g(t);var n=t.features;"object"===r(n)&&("string"==typeof n.show&&$(n.show.split(",").map((function(t){return".".concat(t)})).join(",")).transition("show"),"string"==typeof n.hide&&$(n.hide.split(",").map((function(t){return".".concat(t)})).join(",")).transition("hide")),m(t,e)},y=function(t){var e="".concat(s,"plan?usage=true&powerup_usage=true&v=").concat(f()).concat(d(t));return c.getToken(t).then((function(t){return t?fetch(e,{method:"GET",headers:{"X-Butler-Trello-Token":t}}).then((function(t){return t.json()})).then((function(t){return t.success?t.response:(console.warn("Unable to fetch Butler plan",t.error),Sentry.captureMessage("Fetch user plan got error: ".concat(t.error)),null)})).catch((function(t){return Sentry.captureException(t),null})):null}))},w=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window._trello;return c.getToken(t).then((function(e){return t.getContext().dontUpsell&&$(".trello-upsell").transition("hide"),e?h(t).then((function(n){n?g(n):g(),$.ajax("".concat(s,"plan?usage=true&powerup_usage=true&v=").concat(f()).concat(d(t)),{type:"GET",headers:{"X-Butler-Trello-Token":e}}).done((function(e){e.success?b(e.response,t):(v(t),"USER_NOT_FOUND"===e.error&&c.reauthorize(t))})).fail((function(t){Sentry.captureMessage("Refresh user plan request failed: ".concat(t.status," - ").concat(t.statusText))}))})):g()}))},_=0,E={checkUserQuota:function(t){var e=Date.now();return e<_+3e5?l.resolve():(_=e,l.all([c.getToken(t,!1),t.get("member","private","registered",!1)]).spread((function(e,n){return e&&n?y(t).then((function(e){if(!e)return v(t,!0);var n=e.powerup_usage_exceeded;p(t,"quota",n);var r=e.usage_exceeded;return p(t,"quota-ops",r),m(e,t)})):l.resolve()})))},delayedRefreshUserPlan:function(t,e){g(t),setTimeout(w,e)},fetchUserPlan:y,getAttnStatus:function(t,e){return t.get("board","private","attn").then((function(t){var n=(t||"").split(",").filter((function(t){return!!t}));return e?-1!==n.indexOf(e):n.length})).catch((function(t){return u.handleError("getAttnStatus",t)}))},getUserPlanLocal:h,hasFeature:function(t,e){var n=t&&t.plan_id;switch(e){case"command-limit":return!function(t){return t&&t.plan_id&&t.plan_id.match(/^SILVER_PLATTER|^ROYAL_TREATMENT|^TEAM|^ENTERPRISE|^TRELLO_GOLD|^TRELLO_BC|^TRELLO_ENTERPRISE/)}(t);case"no-schedule":case"no-on-date":return"TRELLO_FREE"===n;default:return!1}},refreshUserPlan:w,savePlan:m,updatePlan:b};window.Plan=E,t.exports=E},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports={trackEvent:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window._trello,r=Object.assign({category:"butler"},t);if(e&&e.getContext()&&e.getContext().board){var o=e.getContext(),i=o.board,a=o.organization,s=o.showSuggestions;r.context?"object"===n(r.context)&&(r.context.idBoard=i,a&&(r.context.idTeam=a)):(r.context={idBoard:i},a&&(r.context.idTeam=a)),r.context.showSuggestions=s}e.requestWithContext("track-event",{event:r}).catch((function(){}))}}},function(t,e,n){var r=n(99).Auth,o=n(46),i=n(61),a={openCommandLog:function(t,e){var n=$("#powerup-command-log"),a=n.find(".content"),s=n.find(".loading.message"),c=n.find(".more.button"),u=n.find(".no-more-entries"),l=s.siblings(".error.message"),f=n.find(".command-log"),d=e?"&obo=".concat(e):"",h=TrelloPowerUp.iframe({targetOrigin:"https://trello.com"}).getContext().board,p=h?"&b=".concat(h):"";function g(){a.animate({scrollTop:a.prop("scrollHeight")},500)}f.empty(),n.modal({detachable:!0,autofocus:!1,onHide:function(){f.empty()}}).modal("show"),function e(a){s.show(),c.transition("hide"),u.transition("hide"),l.transition("hide"),n.find(".no-more-entries").hide(),r.authorize().then((function(){$.ajax("".concat(o,"powerup-command-log/").concat(t.id,"?before=").concat(a).concat(d).concat(p),{type:"GET",headers:{"X-Butler-Trello-Token":r.getActiveToken()}}).done((function(t){s.hide(),t.success?t.response.log.length?(t.response.log.forEach((function(t){var e=t.output;"string"==typeof e&&(e=[{message:e,type:"MESSAGE"}]);var n=(e||[]).map((function(t){var e='<div class="item">';switch(t.type){case"ERROR":e+='<i class="red warning circle icon"></i>';break;case"WARNING":e+='<i class="yellow warning circle icon"></i>';break;case"MESSAGE":e+='<i class="blue info circle icon"></i>'}return e+='<div class="content">'.concat(i.markdownToHtml(t.message),"</div>"),e+="</div>"})).join("")||'<div class="item"><i class="blue info circle icon"></i><div class="content">No details.</div></div>';f.append('<tr><td><div class="ui list"><div class="item"><small>'+moment(t.t).format("LLLL")+"</small></div>"+n+"</div></td></tr>"),a=t.t})),f.find(".content a").attr("target","_blank"),c.transition("show").off("click").click((function(){g(),e(a)}))):(c.transition("hide"),u.transition("show")):(l.transition("show"),g(),n.find(".retry-btn").off("click").click((function(){return e(a),!1})))})).fail((function(){s.hide(),l.transition("show"),g()}))}))}((new Date).toISOString())}};t.exports=a},function(t,e,n){var r,o=n(358),i=function(){return r&&r.isConnected()},a=function(){},s={connect:function(t){r=null;var e=new o.Client(t.url,t.client_id),n={useSSL:!0,timeout:3,mqttVersion:4,onSuccess:function(){t.topic&&e.subscribe(t.topic),r=e,(t.onConnectionSuccess||a)(e)},onFailure:function(e){var n=e.errorCode,r=e.errorMessage;console.warn((new Date).toISOString(),"MQTT CONNECTION FAILURE"),console.warn((new Date).toISOString(),{errorCode:n,errorMessage:r}),(t.onConnectionFailure||a)("MQTT_CONNECTION_FAILURE")}};e.connect(n),e.onConnectionLost=function(){console.warn((new Date).toISOString(),"MQTT CONNECTION LOST"),r=null,t.onConnectionLost&&t.onConnectionLost(e)},e.onMessageArrived=function(n){t.onMessageReceived&&t.onMessageReceived(e,n.destinationName,n.payloadString)}},getSessionClient:function(){return i()?r:null},getSessionId:function(){return i()?r.clientId:null},isSessionActive:i};window.MessageBroker=s,t.exports=s},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){var r=n(343),o=n(46),i=n(341).joinCommandPhrases,a=n(99).Auth,s=n(61),c=s.handleError,u=s.sanitize,l=TrelloPowerUp.Promise;function f(t,e,n){var o,a=t.suggestions,s=t.date;if(t.first_action_date&&(o=moment(t.first_action_date).fromNow(!0)),a&&a.length){var c={};e.forEach((function(t){c[t.cmd]=!0}));var u=a.filter((function(t){var e=["rule","schedule","on-date"].includes(t.type),n=i(t.cmd,e);return!r(c,n)})).slice(0,20),l={};return u.forEach((function(t){var e=t.type;e||(e="card"),(!n||new Date(t.t)>new Date(n))&&(l[e]=(l[e]||0)+1)})),{since:o,suggestions:u,suggestionDataToCache:{dateLastSeen:n,dateLastUpdate:new Date(s).toISOString(),counts:l}}}return{since:o,suggestions:a,suggestionDataToCache:{dateLastSeen:n,dateLastUpdate:new Date(s).toISOString(),counts:{}}}}var d,h={},p=function(t,e){return h[e]||!1===e&&h.true?h[e]||!1===e&&h.true:(h[e]=new l((function(n,r){if(!a.getActiveToken())return r(new Error("NOT_AUTHENTICATED"));var i=t||TrelloPowerUp.iframe({targetOrigin:"https://trello.com"}),s=moment.tz.guess(),c=i.getContext().board;return $.ajax("".concat(o,"powerup-suggest/").concat(c,"?tz=").concat(s).concat(e?"&refresh=true":""),{type:"GET",headers:{"X-Butler-Trello-Token":a.getActiveToken()}}).done((function(t){return t.success?n(t.response):r(new Error(t.error||"NO_RESPONSE"))})).fail((function(){return r(new Error("NETWORK_ERROR"))}))})).finally((function(t){if(delete h[e],t)throw t})),h[e])},g=function(t){return(t||TrelloPowerUp.iframe({targetOrigin:"https://trello.com"})).get("board","private","suggestions")},m=function(t){return t.getContext().showSuggestions?g(t).then((function(t){if(!t)return 0;var e=t.counts||{};return e.total=Object.values(e).reduce((function(t,e){return t+e}),0),e})):l.resolve({total:0})},v=function(t,e){if(!a.getActiveToken())return new l((function(t,e){e(new Error("NOT_AUTHENTICATED"))}));var n=TrelloPowerUp.iframe({targetOrigin:"https://trello.com"}).getContext().board;return new l((function(r,i){$.ajax("".concat(o,"powerup-suggest/").concat(n),{type:"POST",data:JSON.stringify({suggestion:t,action:e}),contentType:"application/json",headers:{"X-Butler-Trello-Token":a.getActiveToken()}}).done((function(t){t.success?r(t.response):i(new Error(t.error||"NO_RESPONSE"))})).fail((function(){i(new Error("NETWORK_ERROR"))}))}))},b={processSuggestionData:f,getCachedSuggestionData:g,getSuggestions:p,getUnseenSuggestionCount:m,setSuggestionTabUnseenCount:function(t){return m(t).then((function(t){if(t.total)if($(".unseen-suggestion-count").length)$(".unseen-suggestion-count").text(u(t.total));else{var e=$('<div class="ui label unseen-suggestion-count">'.concat(u(t.total),"</div>"));$('.dashboard-tabs .item[data-tab="tab-suggestions"]').append(e)}else $(".unseen-suggestion-count").length&&(d&&clearTimeout(d),d=setTimeout((function(){$(".unseen-suggestion-count").remove()}),4e3))}))},updateSuggestionCounts:function(t,e){var n=t||TrelloPowerUp.iframe({targetOrigin:"https://trello.com"});return n.getContext().showSuggestions?l.all([g(n),n.get("member","private","registered",!1)]).spread((function(n,r){if(!r)return n&&n.counts||{};var o,i,a=n&&n.dateLastUpdate,s=n&&n.dateLastSeen;return!(i=(o=a)&&new Date(o).getTime())||new Date>new Date(i+864e5)?l.join(p(t,!0),e.getLocalCommands()).spread((function(e,n){var r=f(e,n.commands,s).suggestionDataToCache;return r?t.set("board","private","suggestions",r).then((function(){return r.counts||{}})).catch((function(t){return c("updateSuggestionCounts",t),{}})):r.counts})).catch((function(t){return"NOT_AUTHENTICATED"!==t.message&&c("getCachedSuggestions",t),{}})):n&&n.counts||{}})):l.resolve({})},accept:function(t){return v(t,"accept")},discard:function(t){return v(t,"discard")}};t.exports=b},,,,,,,function(t,e,n){"use strict";n.r(e);n(144),n(145),n(146),n(147),n(148),n(149),n(150),n(151),n(152),n(153),n(154),n(155),n(156),n(157),n(158),n(159),n(160),n(161),n(162),n(163),n(164),n(165),n(166),n(167),n(168),n(66),n(169),n(170),n(171),n(172),n(173),n(174),n(175),n(176),n(177),n(178),n(179),n(180),n(181),n(182),n(184),n(185),n(186),n(187),n(188),n(189),n(190),n(191),n(192),n(193),n(194),n(195),n(197),n(198),n(199),n(200),n(201),n(202),n(203),n(204),n(205),n(206),n(207),n(208),n(209),n(211),n(212),n(213),n(214),n(215),n(216),n(217),n(218),n(220),n(221),n(222),n(223),n(224),n(225),n(226),n(227),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(237),n(238),n(239),n(240),n(242),n(243),n(244),n(245),n(248),n(249),n(250),n(252),n(253),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(267),n(268),n(269),n(270),n(132),n(271),n(272),n(273),n(274),n(275),n(276),n(277),n(278),n(279),n(280),n(281),n(282),n(283),n(284),n(285),n(286),n(287),n(288),n(289),n(290),n(291),n(292),n(293),n(294),n(295),n(296),n(297),n(298),n(299),n(300),n(301),n(302),n(303),n(304),n(305),n(306),n(307),n(308),n(309),n(310),n(311),n(312),n(313),n(314),n(315),n(316),n(317),n(318),n(319),n(320),n(321),n(322),n(323),n(324),n(325),n(326),n(327),n(328),n(329),n(330),n(331),n(332),n(334),n(335),n(336),n(337),n(340),n(141),n(343),n(346);var r=n(98),o=n(61),i=(n(46),n(99)),a=(n(341),n(344)),s=(a.clearStatus,a.getCurrentTab,a.showStatus,a.showTab,n(347),n(348),n(342)),c=n(350),u=(n(360),n(345));n(362),n(365);r.init();var l={},f=i.Auth;!function(){function t(t,e){return window.Sentry&&Sentry.configureScope((function(e){t.isMemberSignedIn()&&e.setUser({id:t.getContext().member}),e.setTag("webClient",t.getContext().version||"unknown"),e.setTag("idBoard",t.getContext().board)})),t.isMemberSignedIn()&&t.memberCanWriteToModel("board")?(s.init(t),f.ensureTokenValidity(t).catch((function(t){return o.handleError("ensureTokenValidity",t)})).then((function(){return f.registerIfNecessary(t,!1,s,!0)})).catch((function(t){if(t instanceof f.RegistrationError.NotConfirmed)throw t;o.handleError("registerIfNecessary",t)})).then((function(){return Promise.all([u.checkUserQuota(t).catch((function(t){return o.handleError("checkUserQuota",t)})),c.updateSuggestionCounts(t,s).catch((function(t){return o.handleError("updateSuggestionCounts",t)}))])})).catch(f.RegistrationError.NotConfirmed,(function(){})),TrelloPowerUp.Promise.all([u.getUserPlanLocal(t),s.getLocalCommands(),u.getAttnStatus(t),c.getUnseenSuggestionCount(t)]).spread((function(t,n,r,i){var a=n.commands,c=u.hasFeature(t,"command-limit"),l="Butler".concat(i.total?" (".concat(i.total," Tip").concat(i.total>1?"s":"",")"):""),d=[{icon:{dark:r?TrelloPowerUp.util.relativeUrl("./img/butler-powerup-attn-btn-white.svg"):TrelloPowerUp.util.relativeUrl("./img/butler-powerup-btn-white.svg"),light:r?TrelloPowerUp.util.relativeUrl("./img/butler-powerup-attn-btn-dark.svg"):TrelloPowerUp.util.relativeUrl("./img/butler-powerup-btn-dark.svg")},monochrome:!1,text:l,callback:function(t){return f.registerIfNecessary(t,!0,s).then((function(){return t.overlay({url:"./powerup-dashboard.html?board=".concat(e.context.board),inset:!0})})).catch(f.RegistrationError,(function(){})).catch((function(t){return o.handleError("registerIfNecessary",t)}))}}];return t&&t.no_ui&&(d=[]),d.concat(a.filter((function(t){return"board-button"===t.type&&t.enabled})).sort((function(t,e){return t.is_own?e.is_own?0:-1:e.is_own?1:0})).slice(0,c?1:20).map((function(t){return{icon:"./assets/fa-5.1.1/icons/white/".concat(t.image,".svg"),text:t.label,callback:function(e){e.boardBar({height:38,url:"./powerup-command-runner.html?cmd=".concat(t.id)}).catch((function(t){return o.handleError("boardButtonClick",t)}))}}})))})).catch((function(t){return o.handleError("getBoardButtons",t),[{icon:{dark:TrelloPowerUp.util.relativeUrl("./img/butler-powerup-attn-btn-white.svg"),light:TrelloPowerUp.util.relativeUrl("./img/butler-powerup-attn-btn-dark.svg")},monochrome:!1,text:"Butler",callback:function(t){return f.registerIfNecessary(t,!0,s).then((function(){return t.overlay({url:"./powerup-dashboard.html?board=".concat(e.context.board),inset:!0})})).catch(f.RegistrationError,(function(){})).catch((function(t){return o.handleError("registerIfNecessary",t)}))}}]}))):[]}function e(t,e){return t.isMemberSignedIn()&&t.memberCanWriteToModel("card")?(s.init(t),u.checkUserQuota(t).catch((function(t){return o.handleError("checkUserQuota",t)})),TrelloPowerUp.Promise.all([u.getUserPlanLocal(t),s.getLocalCommands(),c.getUnseenSuggestionCount(t)]).spread((function(t,n,r){var i,a=n.commands.filter((function(t){return"card-button"===t.type&&t.enabled})),c=u.hasFeature(t,"command-limit");r.total&&(i={icon:"./img/butler-powerup-card-btn.svg",text:"Butler Tip".concat(r.total>1?"s":""," (").concat(r.total,")"),callback:function(t){return f.registerIfNecessary(t,!0,s).then((function(){return t.hideCard().then((function(){return t.overlay({url:"./powerup-dashboard.html?board=".concat(e.context.board,"&tab=suggestions"),inset:!0})}))})).catch(f.RegistrationError,(function(){})).catch((function(t){return o.handleError("registerIfNecessary",t)}))}});var l=a.sort((function(t,e){return t.is_own?e.is_own?0:-1:e.is_own?1:0})).slice(0,c?1:20).map((function(t){return{icon:"./assets/fa-5.1.1/icons/grey/".concat(t.image,".svg"),text:t.label,callback:function(e){e.boardBar({height:38,url:"./powerup-command-runner.html?cmd=".concat(t.id)}),t.close&&e.hideCard().catch((function(){}))}}}));return i&&l.push(i),l})).catch((function(t){return o.handleError("getCardButtons",t),[{icon:"./img/butler-powerup-card-attn-btn.svg",text:"Butler",callback:function(t){return f.registerIfNecessary(t,!0,s).then((function(){return t.overlay({url:"./powerup-dashboard.html?board=".concat(e.context.board),inset:!0})})).catch(f.RegistrationError,(function(){})).catch((function(t){return o.handleError("registerIfNecessary",t)}))}}]}))):[]}function n(t,e){return t.closePopup().catch((function(){})),t.isMemberSignedIn()&&t.memberCanWriteToModel("board")?(s.init(t),f.registerIfNecessary(t,!0,s).then((function(){return t.overlay({url:"./powerup-dashboard.html?board=".concat(e.context.board),inset:!0}).catch((function(t){return o.handleError("showDashboard",t)}))})).catch(f.RegistrationError,(function(){})).catch((function(t){return o.handleError("registerIfNecessary",t)}))):t.alert("To use Butler on this board you must be a member of the board.")}function r(t){return f.clearMemory(t),!0}l.init=function(){if("undefined"==typeof TrelloPowerUp)return Sentry.captureException(new Error("TrelloPowerUp is undefined")),console.log("[ERROR] TrelloPowerUp library not available.");window._trello=TrelloPowerUp.initialize({"board-buttons":t,"card-buttons":e,"show-settings":n,"remove-data":r},{targetOrigin:"https://trello.com"}),window._trello.member("id").then((function(t){Sentry.configureScope((function(e){t&&"notLoggedIn"!==t.id&&e.setUser({id:t.id})}))})).catch((function(t){return o.handleError("configureSentry",t)}))}}(),window.ButlerPowerUp=l},function(t,e,n){(function(t,r){var o,i,a,s;function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}s="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},a=function(){return function(t){var e,n=(e={},{setItem:function(t,n){e[t]=n},getItem:function(t){return e[t]},removeItem:function(t){delete e[t]}});try{t.localStorage&&(n=t.localStorage)}catch(t){}var r={CONNECT:1,CONNACK:2,PUBLISH:3,PUBACK:4,PUBREC:5,PUBREL:6,PUBCOMP:7,SUBSCRIBE:8,SUBACK:9,UNSUBSCRIBE:10,UNSUBACK:11,PINGREQ:12,PINGRESP:13,DISCONNECT:14},o=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){if(!e.hasOwnProperty(n)){var r="Unknown property, "+n+". Valid properties are:";for(var o in e)e.hasOwnProperty(o)&&(r=r+" "+o);throw new Error(r)}if(c(t[n])!==e[n])throw new Error(u(a.INVALID_TYPE,[c(t[n]),n]))}},i=function(t,e){return function(){return t.apply(e,arguments)}},a={OK:{code:0,text:"AMQJSC0000I OK."},CONNECT_TIMEOUT:{code:1,text:"AMQJSC0001E Connect timed out."},SUBSCRIBE_TIMEOUT:{code:2,text:"AMQJS0002E Subscribe timed out."},UNSUBSCRIBE_TIMEOUT:{code:3,text:"AMQJS0003E Unsubscribe timed out."},PING_TIMEOUT:{code:4,text:"AMQJS0004E Ping timed out."},INTERNAL_ERROR:{code:5,text:"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}"},CONNACK_RETURNCODE:{code:6,text:"AMQJS0006E Bad Connack return code:{0} {1}."},SOCKET_ERROR:{code:7,text:"AMQJS0007E Socket error:{0}."},SOCKET_CLOSE:{code:8,text:"AMQJS0008I Socket closed."},MALFORMED_UTF:{code:9,text:"AMQJS0009E Malformed UTF data:{0} {1} {2}."},UNSUPPORTED:{code:10,text:"AMQJS0010E {0} is not supported by this browser."},INVALID_STATE:{code:11,text:"AMQJS0011E Invalid state {0}."},INVALID_TYPE:{code:12,text:"AMQJS0012E Invalid type {0} for {1}."},INVALID_ARGUMENT:{code:13,text:"AMQJS0013E Invalid argument {0} for {1}."},UNSUPPORTED_OPERATION:{code:14,text:"AMQJS0014E Unsupported operation."},INVALID_STORED_DATA:{code:15,text:"AMQJS0015E Invalid data in local storage key={0} value={1}."},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:"AMQJS0016E Invalid MQTT message type {0}."},MALFORMED_UNICODE:{code:17,text:"AMQJS0017E Malformed Unicode string:{0} {1}."},BUFFER_FULL:{code:18,text:"AMQJS0018E Message buffer is full, maximum buffer size: {0}."}},s={0:"Connection Accepted",1:"Connection Refused: unacceptable protocol version",2:"Connection Refused: identifier rejected",3:"Connection Refused: server unavailable",4:"Connection Refused: bad user name or password",5:"Connection Refused: not authorized"},u=function(t,e){var n=t.text;if(e)for(var r,o,i=0;i<e.length;i++)if(r="{"+i+"}",(o=n.indexOf(r))>0){var a=n.substring(0,o),s=n.substring(o+r.length);n=a+e[i]+s}return n},l=[0,6,77,81,73,115,100,112,3],f=[0,4,77,81,84,84,4],d=function(t,e){for(var n in this.type=t,e)e.hasOwnProperty(n)&&(this[n]=e[n])};function h(t,e){var n,o=e,i=t[e],a=i>>4,s=i&=15;e+=1;var c=0,u=1;do{if(e==t.length)return[null,o];c+=(127&(n=t[e++]))*u,u*=128}while(0!=(128&n));var l=e+c;if(l>t.length)return[null,o];var f=new d(a);switch(a){case r.CONNACK:1&t[e++]&&(f.sessionPresent=!0),f.returnCode=t[e++];break;case r.PUBLISH:var h=s>>1&3,p=m(t,e),g=y(t,e+=2,p);e+=p,h>0&&(f.messageIdentifier=m(t,e),e+=2);var v=new x(t.subarray(e,l));1==(1&s)&&(v.retained=!0),8==(8&s)&&(v.duplicate=!0),v.qos=h,v.destinationName=g,f.payloadMessage=v;break;case r.PUBACK:case r.PUBREC:case r.PUBREL:case r.PUBCOMP:case r.UNSUBACK:f.messageIdentifier=m(t,e);break;case r.SUBACK:f.messageIdentifier=m(t,e),e+=2,f.returnCode=t.subarray(e,l)}return[f,l]}function p(t,e,n){return e[n++]=t>>8,e[n++]=t%256,n}function g(t,e,n,r){return b(t,n,r=p(e,n,r)),r+e}function m(t,e){return 256*t[e]+t[e+1]}function v(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r>2047?(55296<=r&&r<=56319&&(n++,e++),e+=3):r>127?e+=2:e++}return e}function b(t,e,n){for(var r=n,o=0;o<t.length;o++){var i=t.charCodeAt(o);if(55296<=i&&i<=56319){var s=t.charCodeAt(++o);if(isNaN(s))throw new Error(u(a.MALFORMED_UNICODE,[i,s]));i=s-56320+(i-55296<<10)+65536}i<=127?e[r++]=i:i<=2047?(e[r++]=i>>6&31|192,e[r++]=63&i|128):i<=65535?(e[r++]=i>>12&15|224,e[r++]=i>>6&63|128,e[r++]=63&i|128):(e[r++]=i>>18&7|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=63&i|128)}return e}function y(t,e,n){for(var r,o="",i=e;i<e+n;){var s=t[i++];if(s<128)r=s;else{var c=t[i++]-128;if(c<0)throw new Error(u(a.MALFORMED_UTF,[s.toString(16),c.toString(16),""]));if(s<224)r=64*(s-192)+c;else{var l=t[i++]-128;if(l<0)throw new Error(u(a.MALFORMED_UTF,[s.toString(16),c.toString(16),l.toString(16)]));if(s<240)r=4096*(s-224)+64*c+l;else{var f=t[i++]-128;if(f<0)throw new Error(u(a.MALFORMED_UTF,[s.toString(16),c.toString(16),l.toString(16),f.toString(16)]));if(!(s<248))throw new Error(u(a.MALFORMED_UTF,[s.toString(16),c.toString(16),l.toString(16),f.toString(16)]));r=262144*(s-240)+4096*c+64*l+f}}}r>65535&&(r-=65536,o+=String.fromCharCode(55296+(r>>10)),r=56320+(1023&r)),o+=String.fromCharCode(r)}return o}d.prototype.encode=function(){var t,e=(15&this.type)<<4,n=0,o=[],i=0;switch(void 0!==this.messageIdentifier&&(n+=2),this.type){case r.CONNECT:switch(this.mqttVersion){case 3:n+=l.length+3;break;case 4:n+=f.length+3}n+=v(this.clientId)+2,void 0!==this.willMessage&&(n+=v(this.willMessage.destinationName)+2,(t=this.willMessage.payloadBytes)instanceof Uint8Array||(t=new Uint8Array(s)),n+=t.byteLength+2),void 0!==this.userName&&(n+=v(this.userName)+2),void 0!==this.password&&(n+=v(this.password)+2);break;case r.SUBSCRIBE:e|=2;for(var a=0;a<this.topics.length;a++)o[a]=v(this.topics[a]),n+=o[a]+2;n+=this.requestedQos.length;break;case r.UNSUBSCRIBE:for(e|=2,a=0;a<this.topics.length;a++)o[a]=v(this.topics[a]),n+=o[a]+2;break;case r.PUBREL:e|=2;break;case r.PUBLISH:this.payloadMessage.duplicate&&(e|=8),e=e|=this.payloadMessage.qos<<1,this.payloadMessage.retained&&(e|=1),n+=(i=v(this.payloadMessage.destinationName))+2;var s=this.payloadMessage.payloadBytes;n+=s.byteLength,s instanceof ArrayBuffer?s=new Uint8Array(s):s instanceof Uint8Array||(s=new Uint8Array(s.buffer));break;case r.DISCONNECT:}var c=function(t){var e=new Array(1),n=0;do{var r=t%128;(t>>=7)>0&&(r|=128),e[n++]=r}while(t>0&&n<4);return e}(n),u=c.length+1,d=new ArrayBuffer(n+u),h=new Uint8Array(d);if(h[0]=e,h.set(c,1),this.type==r.PUBLISH)u=g(this.payloadMessage.destinationName,i,h,u);else if(this.type==r.CONNECT){switch(this.mqttVersion){case 3:h.set(l,u),u+=l.length;break;case 4:h.set(f,u),u+=f.length}var m=0;this.cleanSession&&(m=2),void 0!==this.willMessage&&(m|=4,m|=this.willMessage.qos<<3,this.willMessage.retained&&(m|=32)),void 0!==this.userName&&(m|=128),void 0!==this.password&&(m|=64),h[u++]=m,u=p(this.keepAliveInterval,h,u)}switch(void 0!==this.messageIdentifier&&(u=p(this.messageIdentifier,h,u)),this.type){case r.CONNECT:u=g(this.clientId,v(this.clientId),h,u),void 0!==this.willMessage&&(u=g(this.willMessage.destinationName,v(this.willMessage.destinationName),h,u),u=p(t.byteLength,h,u),h.set(t,u),u+=t.byteLength),void 0!==this.userName&&(u=g(this.userName,v(this.userName),h,u)),void 0!==this.password&&(u=g(this.password,v(this.password),h,u));break;case r.PUBLISH:h.set(s,u);break;case r.SUBSCRIBE:for(a=0;a<this.topics.length;a++)u=g(this.topics[a],o[a],h,u),h[u++]=this.requestedQos[a];break;case r.UNSUBSCRIBE:for(a=0;a<this.topics.length;a++)u=g(this.topics[a],o[a],h,u)}return d};var w=function(t,e){this._client=t,this._keepAliveInterval=1e3*e,this.isReset=!1;var n=new d(r.PINGREQ).encode(),o=function(t){return function(){return i.apply(t)}},i=function(){this.isReset?(this.isReset=!1,this._client._trace("Pinger.doPing","send PINGREQ"),this._client.socket.send(n),this.timeout=setTimeout(o(this),this._keepAliveInterval)):(this._client._trace("Pinger.doPing","Timed out"),this._client._disconnected(a.PING_TIMEOUT.code,u(a.PING_TIMEOUT)))};this.reset=function(){this.isReset=!0,clearTimeout(this.timeout),this._keepAliveInterval>0&&(this.timeout=setTimeout(o(this),this._keepAliveInterval))},this.cancel=function(){clearTimeout(this.timeout)}},_=function(t,e,n,r){e||(e=30),this.timeout=setTimeout(function(t,e,n){return function(){return t.apply(e,n)}}(n,t,r),1e3*e),this.cancel=function(){clearTimeout(this.timeout)}},E=function(e,r,o,i,s){if(!("WebSocket"in t&&null!==t.WebSocket))throw new Error(u(a.UNSUPPORTED,["WebSocket"]));if(!("ArrayBuffer"in t&&null!==t.ArrayBuffer))throw new Error(u(a.UNSUPPORTED,["ArrayBuffer"]));for(var c in this._trace("Paho.Client",e,r,o,i,s),this.host=r,this.port=o,this.path=i,this.uri=e,this.clientId=s,this._wsuri=null,this._localKey=r+":"+o+("/mqtt"!=i?":"+i:"")+":"+s+":",this._msg_queue=[],this._buffered_msg_queue=[],this._sentMessages={},this._receivedMessages={},this._notify_msg_sent={},this._message_identifier=1,this._sequence=0,n)0!==c.indexOf("Sent:"+this._localKey)&&0!==c.indexOf("Received:"+this._localKey)||this.restore(c)};E.prototype.host=null,E.prototype.port=null,E.prototype.path=null,E.prototype.uri=null,E.prototype.clientId=null,E.prototype.socket=null,E.prototype.connected=!1,E.prototype.maxMessageIdentifier=65536,E.prototype.connectOptions=null,E.prototype.hostIndex=null,E.prototype.onConnected=null,E.prototype.onConnectionLost=null,E.prototype.onMessageDelivered=null,E.prototype.onMessageArrived=null,E.prototype.traceFunction=null,E.prototype._msg_queue=null,E.prototype._buffered_msg_queue=null,E.prototype._connectTimeout=null,E.prototype.sendPinger=null,E.prototype.receivePinger=null,E.prototype._reconnectInterval=1,E.prototype._reconnecting=!1,E.prototype._reconnectTimeout=null,E.prototype.disconnectedPublishing=!1,E.prototype.disconnectedBufferSize=5e3,E.prototype.receiveBuffer=null,E.prototype._traceBuffer=null,E.prototype._MAX_TRACE_ENTRIES=100,E.prototype.connect=function(t){var e=this._traceMask(t,"password");if(this._trace("Client.connect",e,this.socket,this.connected),this.connected)throw new Error(u(a.INVALID_STATE,["already connected"]));if(this.socket)throw new Error(u(a.INVALID_STATE,["already connected"]));this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),this.connectOptions=t,this._reconnectInterval=1,this._reconnecting=!1,t.uris?(this.hostIndex=0,this._doConnect(t.uris[0])):this._doConnect(this.uri)},E.prototype.subscribe=function(t,e){if(this._trace("Client.subscribe",t,e),!this.connected)throw new Error(u(a.INVALID_STATE,["not connected"]));var n=new d(r.SUBSCRIBE);n.topics=t.constructor===Array?t:[t],void 0===e.qos&&(e.qos=0),n.requestedQos=[];for(var o=0;o<n.topics.length;o++)n.requestedQos[o]=e.qos;e.onSuccess&&(n.onSuccess=function(t){e.onSuccess({invocationContext:e.invocationContext,grantedQos:t})}),e.onFailure&&(n.onFailure=function(t){e.onFailure({invocationContext:e.invocationContext,errorCode:t,errorMessage:u(t)})}),e.timeout&&(n.timeOut=new _(this,e.timeout,e.onFailure,[{invocationContext:e.invocationContext,errorCode:a.SUBSCRIBE_TIMEOUT.code,errorMessage:u(a.SUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},E.prototype.unsubscribe=function(t,e){if(this._trace("Client.unsubscribe",t,e),!this.connected)throw new Error(u(a.INVALID_STATE,["not connected"]));var n=new d(r.UNSUBSCRIBE);n.topics=t.constructor===Array?t:[t],e.onSuccess&&(n.callback=function(){e.onSuccess({invocationContext:e.invocationContext})}),e.timeout&&(n.timeOut=new _(this,e.timeout,e.onFailure,[{invocationContext:e.invocationContext,errorCode:a.UNSUBSCRIBE_TIMEOUT.code,errorMessage:u(a.UNSUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},E.prototype.send=function(t){this._trace("Client.send",t);var e=new d(r.PUBLISH);if(e.payloadMessage=t,this.connected)t.qos>0?this._requires_ack(e):this.onMessageDelivered&&(this._notify_msg_sent[e]=this.onMessageDelivered(e.payloadMessage)),this._schedule_message(e);else{if(!this._reconnecting||!this.disconnectedPublishing)throw new Error(u(a.INVALID_STATE,["not connected"]));if(Object.keys(this._sentMessages).length+this._buffered_msg_queue.length>this.disconnectedBufferSize)throw new Error(u(a.BUFFER_FULL,[this.disconnectedBufferSize]));t.qos>0?this._requires_ack(e):(e.sequence=++this._sequence,this._buffered_msg_queue.unshift(e))}},E.prototype.disconnect=function(){if(this._trace("Client.disconnect"),this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),!this.socket)throw new Error(u(a.INVALID_STATE,["not connecting or connected"]));var t=new d(r.DISCONNECT);this._notify_msg_sent[t]=i(this._disconnected,this),this._schedule_message(t)},E.prototype.getTraceLog=function(){if(null!==this._traceBuffer){for(var t in this._trace("Client.getTraceLog",new Date),this._trace("Client.getTraceLog in flight messages",this._sentMessages.length),this._sentMessages)this._trace("_sentMessages ",t,this._sentMessages[t]);for(var t in this._receivedMessages)this._trace("_receivedMessages ",t,this._receivedMessages[t]);return this._traceBuffer}},E.prototype.startTrace=function(){null===this._traceBuffer&&(this._traceBuffer=[]),this._trace("Client.startTrace",new Date,"@VERSION@-@BUILDLEVEL@")},E.prototype.stopTrace=function(){delete this._traceBuffer},E.prototype._doConnect=function(t){if(this.connectOptions.useSSL){var e=t.split(":");e[0]="wss",t=e.join(":")}this._wsuri=t,this.connected=!1,this.connectOptions.mqttVersion<4?this.socket=new WebSocket(t,["mqttv3.1"]):this.socket=new WebSocket(t,["mqtt"]),this.socket.binaryType="arraybuffer",this.socket.onopen=i(this._on_socket_open,this),this.socket.onmessage=i(this._on_socket_message,this),this.socket.onerror=i(this._on_socket_error,this),this.socket.onclose=i(this._on_socket_close,this),this.sendPinger=new w(this,this.connectOptions.keepAliveInterval),this.receivePinger=new w(this,this.connectOptions.keepAliveInterval),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._connectTimeout=new _(this,this.connectOptions.timeout,this._disconnected,[a.CONNECT_TIMEOUT.code,u(a.CONNECT_TIMEOUT)])},E.prototype._schedule_message=function(t){this._msg_queue.unshift(t),this.connected&&this._process_queue()},E.prototype.store=function(t,e){var o={type:e.type,messageIdentifier:e.messageIdentifier,version:1};switch(e.type){case r.PUBLISH:e.pubRecReceived&&(o.pubRecReceived=!0),o.payloadMessage={};for(var i="",s=e.payloadMessage.payloadBytes,c=0;c<s.length;c++)s[c]<=15?i=i+"0"+s[c].toString(16):i+=s[c].toString(16);o.payloadMessage.payloadHex=i,o.payloadMessage.qos=e.payloadMessage.qos,o.payloadMessage.destinationName=e.payloadMessage.destinationName,e.payloadMessage.duplicate&&(o.payloadMessage.duplicate=!0),e.payloadMessage.retained&&(o.payloadMessage.retained=!0),0===t.indexOf("Sent:")&&(void 0===e.sequence&&(e.sequence=++this._sequence),o.sequence=e.sequence);break;default:throw Error(u(a.INVALID_STORED_DATA,[t+this._localKey+e.messageIdentifier,o]))}n.setItem(t+this._localKey+e.messageIdentifier,JSON.stringify(o))},E.prototype.restore=function(t){var e=n.getItem(t),o=JSON.parse(e),i=new d(o.type,o);switch(o.type){case r.PUBLISH:for(var s=o.payloadMessage.payloadHex,c=new ArrayBuffer(s.length/2),l=new Uint8Array(c),f=0;s.length>=2;){var h=parseInt(s.substring(0,2),16);s=s.substring(2,s.length),l[f++]=h}var p=new x(l);p.qos=o.payloadMessage.qos,p.destinationName=o.payloadMessage.destinationName,o.payloadMessage.duplicate&&(p.duplicate=!0),o.payloadMessage.retained&&(p.retained=!0),i.payloadMessage=p;break;default:throw Error(u(a.INVALID_STORED_DATA,[t,e]))}0===t.indexOf("Sent:"+this._localKey)?(i.payloadMessage.duplicate=!0,this._sentMessages[i.messageIdentifier]=i):0===t.indexOf("Received:"+this._localKey)&&(this._receivedMessages[i.messageIdentifier]=i)},E.prototype._process_queue=function(){for(var t=null;t=this._msg_queue.pop();)this._socket_send(t),this._notify_msg_sent[t]&&(this._notify_msg_sent[t](),delete this._notify_msg_sent[t])},E.prototype._requires_ack=function(t){var e=Object.keys(this._sentMessages).length;if(e>this.maxMessageIdentifier)throw Error("Too many messages:"+e);for(;void 0!==this._sentMessages[this._message_identifier];)this._message_identifier++;t.messageIdentifier=this._message_identifier,this._sentMessages[t.messageIdentifier]=t,t.type===r.PUBLISH&&this.store("Sent:",t),this._message_identifier===this.maxMessageIdentifier&&(this._message_identifier=1)},E.prototype._on_socket_open=function(){var t=new d(r.CONNECT,this.connectOptions);t.clientId=this.clientId,this._socket_send(t)},E.prototype._on_socket_message=function(t){this._trace("Client._on_socket_message",t.data);for(var e=this._deframeMessages(t.data),n=0;n<e.length;n+=1)this._handleMessage(e[n])},E.prototype._deframeMessages=function(t){var e=new Uint8Array(t),n=[];if(this.receiveBuffer){var r=new Uint8Array(this.receiveBuffer.length+e.length);r.set(this.receiveBuffer),r.set(e,this.receiveBuffer.length),e=r,delete this.receiveBuffer}try{for(var o=0;o<e.length;){var i=h(e,o),s=i[0];if(o=i[1],null===s)break;n.push(s)}o<e.length&&(this.receiveBuffer=e.subarray(o))}catch(t){var c="undefined"==t.hasOwnProperty("stack")?t.stack.toString():"No Error Stack Available";return void this._disconnected(a.INTERNAL_ERROR.code,u(a.INTERNAL_ERROR,[t.message,c]))}return n},E.prototype._handleMessage=function(t){this._trace("Client._handleMessage",t);try{switch(t.type){case r.CONNACK:if(this._connectTimeout.cancel(),this._reconnectTimeout&&this._reconnectTimeout.cancel(),this.connectOptions.cleanSession){for(var e in this._sentMessages){var o=this._sentMessages[e];n.removeItem("Sent:"+this._localKey+o.messageIdentifier)}for(var e in this._sentMessages={},this._receivedMessages){var i=this._receivedMessages[e];n.removeItem("Received:"+this._localKey+i.messageIdentifier)}this._receivedMessages={}}if(0!==t.returnCode){this._disconnected(a.CONNACK_RETURNCODE.code,u(a.CONNACK_RETURNCODE,[t.returnCode,s[t.returnCode]]));break}this.connected=!0,this.connectOptions.uris&&(this.hostIndex=this.connectOptions.uris.length);var c=[];for(var l in this._sentMessages)this._sentMessages.hasOwnProperty(l)&&c.push(this._sentMessages[l]);if(this._buffered_msg_queue.length>0)for(var f=null;f=this._buffered_msg_queue.pop();)c.push(f),this.onMessageDelivered&&(this._notify_msg_sent[f]=this.onMessageDelivered(f.payloadMessage));c=c.sort((function(t,e){return t.sequence-e.sequence}));for(var h=0,p=c.length;h<p;h++)if((o=c[h]).type==r.PUBLISH&&o.pubRecReceived){var g=new d(r.PUBREL,{messageIdentifier:o.messageIdentifier});this._schedule_message(g)}else this._schedule_message(o);this.connectOptions.onSuccess&&this.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext});var m=!1;this._reconnecting&&(m=!0,this._reconnectInterval=1,this._reconnecting=!1),this._connected(m,this._wsuri),this._process_queue();break;case r.PUBLISH:this._receivePublish(t);break;case r.PUBACK:(o=this._sentMessages[t.messageIdentifier])&&(delete this._sentMessages[t.messageIdentifier],n.removeItem("Sent:"+this._localKey+t.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(o.payloadMessage));break;case r.PUBREC:(o=this._sentMessages[t.messageIdentifier])&&(o.pubRecReceived=!0,g=new d(r.PUBREL,{messageIdentifier:t.messageIdentifier}),this.store("Sent:",o),this._schedule_message(g));break;case r.PUBREL:i=this._receivedMessages[t.messageIdentifier],n.removeItem("Received:"+this._localKey+t.messageIdentifier),i&&(this._receiveMessage(i),delete this._receivedMessages[t.messageIdentifier]);var v=new d(r.PUBCOMP,{messageIdentifier:t.messageIdentifier});this._schedule_message(v);break;case r.PUBCOMP:o=this._sentMessages[t.messageIdentifier],delete this._sentMessages[t.messageIdentifier],n.removeItem("Sent:"+this._localKey+t.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(o.payloadMessage);break;case r.SUBACK:(o=this._sentMessages[t.messageIdentifier])&&(o.timeOut&&o.timeOut.cancel(),128===t.returnCode[0]?o.onFailure&&o.onFailure(t.returnCode):o.onSuccess&&o.onSuccess(t.returnCode),delete this._sentMessages[t.messageIdentifier]);break;case r.UNSUBACK:(o=this._sentMessages[t.messageIdentifier])&&(o.timeOut&&o.timeOut.cancel(),o.callback&&o.callback(),delete this._sentMessages[t.messageIdentifier]);break;case r.PINGRESP:this.sendPinger.reset();break;case r.DISCONNECT:this._disconnected(a.INVALID_MQTT_MESSAGE_TYPE.code,u(a.INVALID_MQTT_MESSAGE_TYPE,[t.type]));break;default:this._disconnected(a.INVALID_MQTT_MESSAGE_TYPE.code,u(a.INVALID_MQTT_MESSAGE_TYPE,[t.type]))}}catch(t){var b="undefined"==t.hasOwnProperty("stack")?t.stack.toString():"No Error Stack Available";return void this._disconnected(a.INTERNAL_ERROR.code,u(a.INTERNAL_ERROR,[t.message,b]))}},E.prototype._on_socket_error=function(t){this._reconnecting||this._disconnected(a.SOCKET_ERROR.code,u(a.SOCKET_ERROR,[t.data]))},E.prototype._on_socket_close=function(){this._reconnecting||this._disconnected(a.SOCKET_CLOSE.code,u(a.SOCKET_CLOSE))},E.prototype._socket_send=function(t){if(1==t.type){var e=this._traceMask(t,"password");this._trace("Client._socket_send",e)}else this._trace("Client._socket_send",t);this.socket.send(t.encode()),this.sendPinger.reset()},E.prototype._receivePublish=function(t){switch(t.payloadMessage.qos){case"undefined":case 0:this._receiveMessage(t);break;case 1:var e=new d(r.PUBACK,{messageIdentifier:t.messageIdentifier});this._schedule_message(e),this._receiveMessage(t);break;case 2:this._receivedMessages[t.messageIdentifier]=t,this.store("Received:",t);var n=new d(r.PUBREC,{messageIdentifier:t.messageIdentifier});this._schedule_message(n);break;default:throw Error("Invaild qos="+t.payloadMessage.qos)}},E.prototype._receiveMessage=function(t){this.onMessageArrived&&this.onMessageArrived(t.payloadMessage)},E.prototype._connected=function(t,e){this.onConnected&&this.onConnected(t,e)},E.prototype._reconnect=function(){this._trace("Client._reconnect"),this.connected||(this._reconnecting=!0,this.sendPinger.cancel(),this.receivePinger.cancel(),this._reconnectInterval<128&&(this._reconnectInterval=2*this._reconnectInterval),this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri))},E.prototype._disconnected=function(t,e){if(this._trace("Client._disconnected",t,e),void 0!==t&&this._reconnecting)this._reconnectTimeout=new _(this,this._reconnectInterval,this._reconnect);else if(this.sendPinger.cancel(),this.receivePinger.cancel(),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._msg_queue=[],this._buffered_msg_queue=[],this._notify_msg_sent={},this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,1===this.socket.readyState&&this.socket.close(),delete this.socket),this.connectOptions.uris&&this.hostIndex<this.connectOptions.uris.length-1)this.hostIndex++,this._doConnect(this.connectOptions.uris[this.hostIndex]);else if(void 0===t&&(t=a.OK.code,e=u(a.OK)),this.connected){if(this.connected=!1,this.onConnectionLost&&this.onConnectionLost({errorCode:t,errorMessage:e,reconnect:this.connectOptions.reconnect,uri:this._wsuri}),t!==a.OK.code&&this.connectOptions.reconnect)return this._reconnectInterval=1,void this._reconnect()}else 4===this.connectOptions.mqttVersion&&!1===this.connectOptions.mqttVersionExplicit?(this._trace("Failed to connect V4, dropping back to V3"),this.connectOptions.mqttVersion=3,this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri)):this.connectOptions.onFailure&&this.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext,errorCode:t,errorMessage:e})},E.prototype._trace=function(){if(this.traceFunction){var t=Array.prototype.slice.call(arguments);for(var e in t)void 0!==t[e]&&t.splice(e,1,JSON.stringify(t[e]));var n=t.join("");this.traceFunction({severity:"Debug",message:n})}if(null!==this._traceBuffer){e=0;for(var r=arguments.length;e<r;e++)this._traceBuffer.length==this._MAX_TRACE_ENTRIES&&this._traceBuffer.shift(),0===e?this._traceBuffer.push(arguments[e]):void 0===arguments[e]?this._traceBuffer.push(arguments[e]):this._traceBuffer.push("  "+JSON.stringify(arguments[e]))}},E.prototype._traceMask=function(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=r==e?"******":t[r]);return n};var x=function(t){var e,n;if(!("string"==typeof t||t instanceof ArrayBuffer||ArrayBuffer.isView(t)&&!(t instanceof DataView)))throw u(a.INVALID_ARGUMENT,[t,"newPayload"]);e=t;var r=0,o=!1,i=!1;Object.defineProperties(this,{payloadString:{enumerable:!0,get:function(){return"string"==typeof e?e:y(e,0,e.length)}},payloadBytes:{enumerable:!0,get:function(){if("string"==typeof e){var t=new ArrayBuffer(v(e)),n=new Uint8Array(t);return b(e,n,0),n}return e}},destinationName:{enumerable:!0,get:function(){return n},set:function(t){if("string"!=typeof t)throw new Error(u(a.INVALID_ARGUMENT,[t,"newDestinationName"]));n=t}},qos:{enumerable:!0,get:function(){return r},set:function(t){if(0!==t&&1!==t&&2!==t)throw new Error("Invalid argument:"+t);r=t}},retained:{enumerable:!0,get:function(){return o},set:function(t){if("boolean"!=typeof t)throw new Error(u(a.INVALID_ARGUMENT,[t,"newRetained"]));o=t}},topic:{enumerable:!0,get:function(){return n},set:function(t){n=t}},duplicate:{enumerable:!0,get:function(){return i},set:function(t){i=t}}})};return{Client:function(t,e,n,r){var i;if("string"!=typeof t)throw new Error(u(a.INVALID_TYPE,[c(t),"host"]));if(2==arguments.length){r=e;var s=(i=t).match(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/);if(!s)throw new Error(u(a.INVALID_ARGUMENT,[t,"host"]));t=s[4]||s[2],e=parseInt(s[7]),n=s[8]}else{if(3==arguments.length&&(r=n,n="/mqtt"),"number"!=typeof e||e<0)throw new Error(u(a.INVALID_TYPE,[c(e),"port"]));if("string"!=typeof n)throw new Error(u(a.INVALID_TYPE,[c(n),"path"]));var l=-1!==t.indexOf(":")&&"["!==t.slice(0,1)&&"]"!==t.slice(-1);i="ws://"+(l?"["+t+"]":t)+":"+e+n}for(var f=0,d=0;d<r.length;d++){var h=r.charCodeAt(d);55296<=h&&h<=56319&&d++,f++}if("string"!=typeof r||f>65535)throw new Error(u(a.INVALID_ARGUMENT,[r,"clientId"]));var p=new E(i,t,e,n,r);Object.defineProperties(this,{host:{get:function(){return t},set:function(){throw new Error(u(a.UNSUPPORTED_OPERATION))}},port:{get:function(){return e},set:function(){throw new Error(u(a.UNSUPPORTED_OPERATION))}},path:{get:function(){return n},set:function(){throw new Error(u(a.UNSUPPORTED_OPERATION))}},uri:{get:function(){return i},set:function(){throw new Error(u(a.UNSUPPORTED_OPERATION))}},clientId:{get:function(){return p.clientId},set:function(){throw new Error(u(a.UNSUPPORTED_OPERATION))}},onConnected:{get:function(){return p.onConnected},set:function(t){if("function"!=typeof t)throw new Error(u(a.INVALID_TYPE,[c(t),"onConnected"]));p.onConnected=t}},disconnectedPublishing:{get:function(){return p.disconnectedPublishing},set:function(t){p.disconnectedPublishing=t}},disconnectedBufferSize:{get:function(){return p.disconnectedBufferSize},set:function(t){p.disconnectedBufferSize=t}},onConnectionLost:{get:function(){return p.onConnectionLost},set:function(t){if("function"!=typeof t)throw new Error(u(a.INVALID_TYPE,[c(t),"onConnectionLost"]));p.onConnectionLost=t}},onMessageDelivered:{get:function(){return p.onMessageDelivered},set:function(t){if("function"!=typeof t)throw new Error(u(a.INVALID_TYPE,[c(t),"onMessageDelivered"]));p.onMessageDelivered=t}},onMessageArrived:{get:function(){return p.onMessageArrived},set:function(t){if("function"!=typeof t)throw new Error(u(a.INVALID_TYPE,[c(t),"onMessageArrived"]));p.onMessageArrived=t}},trace:{get:function(){return p.traceFunction},set:function(t){if("function"!=typeof t)throw new Error(u(a.INVALID_TYPE,[c(t),"onTrace"]));p.traceFunction=t}}}),this.connect=function(t){if(o(t=t||{},{timeout:"number",userName:"string",password:"string",willMessage:"object",keepAliveInterval:"number",cleanSession:"boolean",useSSL:"boolean",invocationContext:"object",onSuccess:"function",onFailure:"function",hosts:"object",ports:"object",reconnect:"boolean",mqttVersion:"number",mqttVersionExplicit:"boolean",uris:"object"}),void 0===t.keepAliveInterval&&(t.keepAliveInterval=60),t.mqttVersion>4||t.mqttVersion<3)throw new Error(u(a.INVALID_ARGUMENT,[t.mqttVersion,"connectOptions.mqttVersion"]));if(void 0===t.mqttVersion?(t.mqttVersionExplicit=!1,t.mqttVersion=4):t.mqttVersionExplicit=!0,void 0!==t.password&&void 0===t.userName)throw new Error(u(a.INVALID_ARGUMENT,[t.password,"connectOptions.password"]));if(t.willMessage){if(!(t.willMessage instanceof x))throw new Error(u(a.INVALID_TYPE,[t.willMessage,"connectOptions.willMessage"]));if(t.willMessage.stringPayload=null,void 0===t.willMessage.destinationName)throw new Error(u(a.INVALID_TYPE,[c(t.willMessage.destinationName),"connectOptions.willMessage.destinationName"]))}if(void 0===t.cleanSession&&(t.cleanSession=!0),t.hosts){if(!(t.hosts instanceof Array))throw new Error(u(a.INVALID_ARGUMENT,[t.hosts,"connectOptions.hosts"]));if(t.hosts.length<1)throw new Error(u(a.INVALID_ARGUMENT,[t.hosts,"connectOptions.hosts"]));for(var e=!1,r=0;r<t.hosts.length;r++){if("string"!=typeof t.hosts[r])throw new Error(u(a.INVALID_TYPE,[c(t.hosts[r]),"connectOptions.hosts["+r+"]"]));if(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/.test(t.hosts[r])){if(0===r)e=!0;else if(!e)throw new Error(u(a.INVALID_ARGUMENT,[t.hosts[r],"connectOptions.hosts["+r+"]"]))}else if(e)throw new Error(u(a.INVALID_ARGUMENT,[t.hosts[r],"connectOptions.hosts["+r+"]"]))}if(e)t.uris=t.hosts;else{if(!t.ports)throw new Error(u(a.INVALID_ARGUMENT,[t.ports,"connectOptions.ports"]));if(!(t.ports instanceof Array))throw new Error(u(a.INVALID_ARGUMENT,[t.ports,"connectOptions.ports"]));if(t.hosts.length!==t.ports.length)throw new Error(u(a.INVALID_ARGUMENT,[t.ports,"connectOptions.ports"]));for(t.uris=[],r=0;r<t.hosts.length;r++){if("number"!=typeof t.ports[r]||t.ports[r]<0)throw new Error(u(a.INVALID_TYPE,[c(t.ports[r]),"connectOptions.ports["+r+"]"]));var s=t.hosts[r],l=t.ports[r],f=-1!==s.indexOf(":");i="ws://"+(f?"["+s+"]":s)+":"+l+n,t.uris.push(i)}}}p.connect(t)},this.subscribe=function(t,e){if("string"!=typeof t&&t.constructor!==Array)throw new Error("Invalid argument:"+t);if(o(e=e||{},{qos:"number",invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),e.timeout&&!e.onFailure)throw new Error("subscribeOptions.timeout specified with no onFailure callback.");if(void 0!==e.qos&&0!==e.qos&&1!==e.qos&&2!==e.qos)throw new Error(u(a.INVALID_ARGUMENT,[e.qos,"subscribeOptions.qos"]));p.subscribe(t,e)},this.unsubscribe=function(t,e){if("string"!=typeof t&&t.constructor!==Array)throw new Error("Invalid argument:"+t);if(o(e=e||{},{invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),e.timeout&&!e.onFailure)throw new Error("unsubscribeOptions.timeout specified with no onFailure callback.");p.unsubscribe(t,e)},this.send=function(t,e,n,r){var o;if(0===arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(t instanceof x)&&"string"!=typeof t)throw new Error("Invalid argument:"+c(t));if(void 0===(o=t).destinationName)throw new Error(u(a.INVALID_ARGUMENT,[o.destinationName,"Message.destinationName"]));p.send(o)}else(o=new x(e)).destinationName=t,arguments.length>=3&&(o.qos=n),arguments.length>=4&&(o.retained=r),p.send(o)},this.publish=function(t,e,n,r){var o;if(0===arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(t instanceof x)&&"string"!=typeof t)throw new Error("Invalid argument:"+c(t));if(void 0===(o=t).destinationName)throw new Error(u(a.INVALID_ARGUMENT,[o.destinationName,"Message.destinationName"]));p.send(o)}else(o=new x(e)).destinationName=t,arguments.length>=3&&(o.qos=n),arguments.length>=4&&(o.retained=r),p.send(o)},this.disconnect=function(){p.disconnect()},this.getTraceLog=function(){return p.getTraceLog()},this.startTrace=function(){p.startTrace()},this.stopTrace=function(){p.stopTrace()},this.isConnected=function(){return p.connected}},Message:x}}(s)},"object"===c(e)&&"object"===c(r)?r.exports=a():void 0===(i="function"==typeof(o=a)?o.call(e,n,e,r):o)||(r.exports=i)}).call(this,n(100),n(349)(t))},function(t,e,n){var r,o=function(){var t=String.fromCharCode,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function o(t,e){if(!r[t]){r[t]={};for(var n=0;n<t.length;n++)r[t][t.charAt(n)]=n}return r[t][e]}var i={compressToBase64:function(t){if(null==t)return"";var n=i._compress(t,6,(function(t){return e.charAt(t)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:i._decompress(t.length,32,(function(n){return o(e,t.charAt(n))}))},compressToUTF16:function(e){return null==e?"":i._compress(e,15,(function(e){return t(e+32)}))+" "},decompressFromUTF16:function(t){return null==t?"":""==t?null:i._decompress(t.length,16384,(function(e){return t.charCodeAt(e)-32}))},compressToUint8Array:function(t){for(var e=i.compress(t),n=new Uint8Array(2*e.length),r=0,o=e.length;r<o;r++){var a=e.charCodeAt(r);n[2*r]=a>>>8,n[2*r+1]=a%256}return n},decompressFromUint8Array:function(e){if(null==e)return i.decompress(e);for(var n=new Array(e.length/2),r=0,o=n.length;r<o;r++)n[r]=256*e[2*r]+e[2*r+1];var a=[];return n.forEach((function(e){a.push(t(e))})),i.decompress(a.join(""))},compressToEncodedURIComponent:function(t){return null==t?"":i._compress(t,6,(function(t){return n.charAt(t)}))},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),i._decompress(t.length,32,(function(e){return o(n,t.charAt(e))})))},compress:function(e){return i._compress(e,16,(function(e){return t(e)}))},_compress:function(t,e,n){if(null==t)return"";var r,o,i,a={},s={},c="",u="",l="",f=2,d=3,h=2,p=[],g=0,m=0;for(i=0;i<t.length;i+=1)if(c=t.charAt(i),Object.prototype.hasOwnProperty.call(a,c)||(a[c]=d++,s[c]=!0),u=l+c,Object.prototype.hasOwnProperty.call(a,u))l=u;else{if(Object.prototype.hasOwnProperty.call(s,l)){if(l.charCodeAt(0)<256){for(r=0;r<h;r++)g<<=1,m==e-1?(m=0,p.push(n(g)),g=0):m++;for(o=l.charCodeAt(0),r=0;r<8;r++)g=g<<1|1&o,m==e-1?(m=0,p.push(n(g)),g=0):m++,o>>=1}else{for(o=1,r=0;r<h;r++)g=g<<1|o,m==e-1?(m=0,p.push(n(g)),g=0):m++,o=0;for(o=l.charCodeAt(0),r=0;r<16;r++)g=g<<1|1&o,m==e-1?(m=0,p.push(n(g)),g=0):m++,o>>=1}0==--f&&(f=Math.pow(2,h),h++),delete s[l]}else for(o=a[l],r=0;r<h;r++)g=g<<1|1&o,m==e-1?(m=0,p.push(n(g)),g=0):m++,o>>=1;0==--f&&(f=Math.pow(2,h),h++),a[u]=d++,l=String(c)}if(""!==l){if(Object.prototype.hasOwnProperty.call(s,l)){if(l.charCodeAt(0)<256){for(r=0;r<h;r++)g<<=1,m==e-1?(m=0,p.push(n(g)),g=0):m++;for(o=l.charCodeAt(0),r=0;r<8;r++)g=g<<1|1&o,m==e-1?(m=0,p.push(n(g)),g=0):m++,o>>=1}else{for(o=1,r=0;r<h;r++)g=g<<1|o,m==e-1?(m=0,p.push(n(g)),g=0):m++,o=0;for(o=l.charCodeAt(0),r=0;r<16;r++)g=g<<1|1&o,m==e-1?(m=0,p.push(n(g)),g=0):m++,o>>=1}0==--f&&(f=Math.pow(2,h),h++),delete s[l]}else for(o=a[l],r=0;r<h;r++)g=g<<1|1&o,m==e-1?(m=0,p.push(n(g)),g=0):m++,o>>=1;0==--f&&(f=Math.pow(2,h),h++)}for(o=2,r=0;r<h;r++)g=g<<1|1&o,m==e-1?(m=0,p.push(n(g)),g=0):m++,o>>=1;for(;;){if(g<<=1,m==e-1){p.push(n(g));break}m++}return p.join("")},decompress:function(t){return null==t?"":""==t?null:i._decompress(t.length,32768,(function(e){return t.charCodeAt(e)}))},_decompress:function(e,n,r){var o,i,a,s,c,u,l,f=[],d=4,h=4,p=3,g="",m=[],v={val:r(0),position:n,index:1};for(o=0;o<3;o+=1)f[o]=o;for(a=0,c=Math.pow(2,2),u=1;u!=c;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),a|=(s>0?1:0)*u,u<<=1;switch(a){case 0:for(a=0,c=Math.pow(2,8),u=1;u!=c;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),a|=(s>0?1:0)*u,u<<=1;l=t(a);break;case 1:for(a=0,c=Math.pow(2,16),u=1;u!=c;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),a|=(s>0?1:0)*u,u<<=1;l=t(a);break;case 2:return""}for(f[3]=l,i=l,m.push(l);;){if(v.index>e)return"";for(a=0,c=Math.pow(2,p),u=1;u!=c;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),a|=(s>0?1:0)*u,u<<=1;switch(l=a){case 0:for(a=0,c=Math.pow(2,8),u=1;u!=c;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),a|=(s>0?1:0)*u,u<<=1;f[h++]=t(a),l=h-1,d--;break;case 1:for(a=0,c=Math.pow(2,16),u=1;u!=c;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),a|=(s>0?1:0)*u,u<<=1;f[h++]=t(a),l=h-1,d--;break;case 2:return m.join("")}if(0==d&&(d=Math.pow(2,p),p++),f[l])g=f[l];else{if(l!==h)return null;g=i+i.charAt(0)}m.push(g),f[h++]=i+g.charAt(0),i=g,0==--d&&(d=Math.pow(2,p),p++)}}};return i}();void 0===(r=function(){return o}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r=n(99).Auth,o=n(342),i=n(46),a=n(348),s=n(61),c={init:function(){var t=TrelloPowerUp.iframe({targetOrigin:"https://trello.com"}),e=TrelloPowerUp.Promise;function n(t){var e='<div class="item">';switch(t.type){case"ERROR":e+='<i class="red warning circle icon"></i>';break;case"WARNING":e+='<i class="yellow warning circle icon"></i>';break;case"MESSAGE":case"END":e+='<i class="blue info circle icon"></i>'}return e+='<div class="content">'.concat(s.markdownToHtml(t.message),"</div>"),e+="</div>"}function c(t){var e=(t||[]).map(n)||'<div class="item"><i class="blue info circle icon"></i><div class="content">Command started.</div></div>';$("#butler-command-run-details .list").html(e).find(".content a").attr("target","_blank")}function u(e){switch(e.error){case"CANT_PARSE_COMMAND":$("#butler-error-command-parse").transition("slide up");break;case"COMMAND_NOT_FOUND":$("#butler-error-command-not-found").transition("slide up");break;case"USER_NOT_FOUND":$("#butler-error-user-not-found").transition("slide up");break;case"INVALID_TOKEN":r.reauthorize(t),$("#butler-error-auth").transition("slide up");break;case"BAD_REQUEST":case"INTERNAL_ERROR":default:$("#butler-error-internal").transition("slide up")}}function l(e){$("#butler-running-command").transition({animation:"slide up",onComplete:function(){if(e.success){var n=e.response.powerup_usage_exceeded;n?($("#butler-error-quota").transition("slide up"),$(".butler-account-details-btn").off("click").click((function(){return t.overlay({url:"./powerup-account.html?tab=account"}),t.closeBoardBar().done(),!1}))):(e.response.messages||[]).some((function(t){return"ERROR"===t.type}))?$("#butler-error-running-command").transition("slide up"):(e.response.messages||[]).some((function(t){return"WARNING"===t.type}))?$("#butler-warning-running-command").transition("slide up"):$("#butler-success-running-command").transition("slide up"),n||setTimeout((function(){$("#butler-command-run-details:visible").length||t.closeBoardBar().done()}),5e3)}else u(e)}})}function f(e,r){var o=e.response.messages,s=e.response.async;s.onConnectionSuccess=function(){$.ajax("".concat(i,"powerup-resume-command"),{type:"POST",data:JSON.stringify({job_id:s.job_id}),headers:{"X-Butler-Trello-Token":r},contentType:"application/json"}).done((function(e){e.success?(c(o),$("#butler-command-run-details").transition("slide up"),$(".butler-command-run-details-btn").transition("hide"),t.sizeTo("body")):u(e)})).fail((function(){$("#butler-running-command").transition("slide up"),$("#butler-error-running-command-network").transition("slide up")}))},s.onConnectionFailure=function(){$("#butler-error-running-command-network").transition("slide up")};var f=!1;s.onConnectionLost=function(){f||$("#butler-error-running-command-network").transition("slide up")},s.onMessageReceived=function(t,r,i){var a=JSON.parse(i);o.push(a),function(t){var e=$(n(t));e.find(".content a").attr("target","_blank"),$("#butler-command-run-details .list").append(e),$("#butler-command-run-details > .segment").animate({scrollTop:e.offset().top},500)}(a),"END"===a.type&&(f=!0,l(e))},a.connect(s)}o.init();var d=(window.location.search.match(/cmd=([-_a-zA-Z0-9]*)/)||[])[1],h=(window.location.search.match(/obo=([a-fA-F0-9]*)/)||[])[1];h&&o.setAdminOnBehalfOf(h),r.authorize(t).then((function(){!function(n,r){e.join(t.board("id","name"),t.card("id").catch((function(){return{}})),t.member("id"),o.getCommandById(r,!1,!0)).spread((function(e,a,s,u){var d=u&&u.label?'"'.concat(u.label,'"'):$(".butler-command-name").attr("default-text");$(".butler-command-name").text(d),$(".butler-cancel-command").transition("hide"),$("#butler-running-command").transition("slide up"),$.ajax("".concat(i,"powerup-run-command"),{type:"POST",data:JSON.stringify({cmd_id:r,command:u,board_data:{board_id:e.id,board_name:e.name,tz:moment.tz.guess(),context:navigator.userAgent},parameters:{card_id:a.id},obo:o.getAdminOnBehalfOf()}),headers:{"X-Butler-Trello-Token":n},contentType:"application/json"}).done((function(e){if(e.response){if(e.response.async)return f(e,n);$(".butler-command-run-details-btn").transition("show").off("click").click((function(){c(e.response.messages),$(".butler-command-run-details-btn").transition("hide"),$("#butler-command-run-details").transition("show"),t.sizeTo("body")}))}else $(".butler-command-run-details-btn").transition("hide");l(e)})).fail((function(t){Sentry.captureMessage("Run command request failed: ".concat(t.status," - ").concat(t.statusText)),$("#butler-running-command").transition("slide up"),$("#butler-error-running-command-network").transition("slide up")}))}))}(r.getActiveToken(),d)}))}};window.CommandRunner=c,t.exports=c},function(t,e,n){(function(t,n){var r=200,o="__lodash_hash_undefined__",i=1,a=2,s=9007199254740991,c="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",f="[object Boolean]",d="[object Date]",h="[object Error]",p="[object Function]",g="[object GeneratorFunction]",m="[object Map]",v="[object Number]",b="[object Null]",y="[object Object]",w="[object Proxy]",_="[object RegExp]",E="[object Set]",x="[object String]",S="[object Symbol]",T="[object Undefined]",$="[object ArrayBuffer]",k="[object DataView]",O=/^\[object .+?Constructor\]$/,C=/^(?:0|[1-9]\d*)$/,A={};A["[object Float32Array]"]=A["[object Float64Array]"]=A["[object Int8Array]"]=A["[object Int16Array]"]=A["[object Int32Array]"]=A["[object Uint8Array]"]=A["[object Uint8ClampedArray]"]=A["[object Uint16Array]"]=A["[object Uint32Array]"]=!0,A[c]=A[u]=A[$]=A[f]=A[k]=A[d]=A[h]=A[p]=A[m]=A[v]=A[y]=A[_]=A[E]=A[x]=A["[object WeakMap]"]=!1;var I="object"==typeof t&&t&&t.Object===Object&&t,N="object"==typeof self&&self&&self.Object===Object&&self,R=I||N||Function("return this")(),P=e&&!e.nodeType&&e,M=P&&"object"==typeof n&&n&&!n.nodeType&&n,j=M&&M.exports===P,U=j&&I.process,L=function(){try{return U&&U.binding&&U.binding("util")}catch(t){}}(),B=L&&L.isTypedArray;function D(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function F(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function z(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var q,V,W,G=Array.prototype,K=Function.prototype,J=Object.prototype,Q=R["__core-js_shared__"],H=K.toString,X=J.hasOwnProperty,Y=(q=/[^.]+$/.exec(Q&&Q.keys&&Q.keys.IE_PROTO||""))?"Symbol(src)_1."+q:"",Z=J.toString,tt=RegExp("^"+H.call(X).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),et=j?R.Buffer:void 0,nt=R.Symbol,rt=R.Uint8Array,ot=J.propertyIsEnumerable,it=G.splice,at=nt?nt.toStringTag:void 0,st=Object.getOwnPropertySymbols,ct=et?et.isBuffer:void 0,ut=(V=Object.keys,W=Object,function(t){return V(W(t))}),lt=Lt(R,"DataView"),ft=Lt(R,"Map"),dt=Lt(R,"Promise"),ht=Lt(R,"Set"),pt=Lt(R,"WeakMap"),gt=Lt(Object,"create"),mt=zt(lt),vt=zt(ft),bt=zt(dt),yt=zt(ht),wt=zt(pt),_t=nt?nt.prototype:void 0,Et=_t?_t.valueOf:void 0;function xt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function St(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Tt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function $t(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Tt;++e<n;)this.add(t[e])}function kt(t){var e=this.__data__=new St(t);this.size=e.size}function Ot(t,e){var n=Wt(t),r=!n&&Vt(t),o=!n&&!r&&Gt(t),i=!n&&!r&&!o&&Xt(t),a=n||r||o||i,s=a?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],c=s.length;for(var u in t)!e&&!X.call(t,u)||a&&("length"==u||o&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Ft(u,c))||s.push(u);return s}function Ct(t,e){for(var n=t.length;n--;)if(qt(t[n][0],e))return n;return-1}function At(t){return null==t?void 0===t?T:b:at&&at in Object(t)?function(t){var e=X.call(t,at),n=t[at];try{t[at]=void 0;var r=!0}catch(t){}var o=Z.call(t);r&&(e?t[at]=n:delete t[at]);return o}(t):function(t){return Z.call(t)}(t)}function It(t){return Ht(t)&&At(t)==c}function Nt(t,e,n,r,o){return t===e||(null==t||null==e||!Ht(t)&&!Ht(e)?t!=t&&e!=e:function(t,e,n,r,o,s){var l=Wt(t),p=Wt(e),g=l?u:Dt(t),b=p?u:Dt(e),w=(g=g==c?y:g)==y,T=(b=b==c?y:b)==y,O=g==b;if(O&&Gt(t)){if(!Gt(e))return!1;l=!0,w=!1}if(O&&!w)return s||(s=new kt),l||Xt(t)?Mt(t,e,n,r,o,s):function(t,e,n,r,o,s,c){switch(n){case k:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case $:return!(t.byteLength!=e.byteLength||!s(new rt(t),new rt(e)));case f:case d:case v:return qt(+t,+e);case h:return t.name==e.name&&t.message==e.message;case _:case x:return t==e+"";case m:var u=F;case E:var l=r&i;if(u||(u=z),t.size!=e.size&&!l)return!1;var p=c.get(t);if(p)return p==e;r|=a,c.set(t,e);var g=Mt(u(t),u(e),r,o,s,c);return c.delete(t),g;case S:if(Et)return Et.call(t)==Et.call(e)}return!1}(t,e,g,n,r,o,s);if(!(n&i)){var C=w&&X.call(t,"__wrapped__"),A=T&&X.call(e,"__wrapped__");if(C||A){var I=C?t.value():t,N=A?e.value():e;return s||(s=new kt),o(I,N,n,r,s)}}if(!O)return!1;return s||(s=new kt),function(t,e,n,r,o,a){var s=n&i,c=jt(t),u=c.length,l=jt(e).length;if(u!=l&&!s)return!1;var f=u;for(;f--;){var d=c[f];if(!(s?d in e:X.call(e,d)))return!1}var h=a.get(t);if(h&&a.get(e))return h==e;var p=!0;a.set(t,e),a.set(e,t);var g=s;for(;++f<u;){d=c[f];var m=t[d],v=e[d];if(r)var b=s?r(v,m,d,e,t,a):r(m,v,d,t,e,a);if(!(void 0===b?m===v||o(m,v,n,r,a):b)){p=!1;break}g||(g="constructor"==d)}if(p&&!g){var y=t.constructor,w=e.constructor;y!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof w&&w instanceof w)&&(p=!1)}return a.delete(t),a.delete(e),p}(t,e,n,r,o,s)}(t,e,n,r,Nt,o))}function Rt(t){return!(!Qt(t)||function(t){return!!Y&&Y in t}(t))&&(Kt(t)?tt:O).test(zt(t))}function Pt(t){if(n=(e=t)&&e.constructor,r="function"==typeof n&&n.prototype||J,e!==r)return ut(t);var e,n,r,o=[];for(var i in Object(t))X.call(t,i)&&"constructor"!=i&&o.push(i);return o}function Mt(t,e,n,r,o,s){var c=n&i,u=t.length,l=e.length;if(u!=l&&!(c&&l>u))return!1;var f=s.get(t);if(f&&s.get(e))return f==e;var d=-1,h=!0,p=n&a?new $t:void 0;for(s.set(t,e),s.set(e,t);++d<u;){var g=t[d],m=e[d];if(r)var v=c?r(m,g,d,e,t,s):r(g,m,d,t,e,s);if(void 0!==v){if(v)continue;h=!1;break}if(p){if(!D(e,(function(t,e){if(i=e,!p.has(i)&&(g===t||o(g,t,n,r,s)))return p.push(e);var i}))){h=!1;break}}else if(g!==m&&!o(g,m,n,r,s)){h=!1;break}}return s.delete(t),s.delete(e),h}function jt(t){return function(t,e,n){var r=e(t);return Wt(t)?r:function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}(r,n(t))}(t,Yt,Bt)}function Ut(t,e){var n,r,o=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function Lt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return Rt(n)?n:void 0}xt.prototype.clear=function(){this.__data__=gt?gt(null):{},this.size=0},xt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},xt.prototype.get=function(t){var e=this.__data__;if(gt){var n=e[t];return n===o?void 0:n}return X.call(e,t)?e[t]:void 0},xt.prototype.has=function(t){var e=this.__data__;return gt?void 0!==e[t]:X.call(e,t)},xt.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=gt&&void 0===e?o:e,this},St.prototype.clear=function(){this.__data__=[],this.size=0},St.prototype.delete=function(t){var e=this.__data__,n=Ct(e,t);return!(n<0)&&(n==e.length-1?e.pop():it.call(e,n,1),--this.size,!0)},St.prototype.get=function(t){var e=this.__data__,n=Ct(e,t);return n<0?void 0:e[n][1]},St.prototype.has=function(t){return Ct(this.__data__,t)>-1},St.prototype.set=function(t,e){var n=this.__data__,r=Ct(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Tt.prototype.clear=function(){this.size=0,this.__data__={hash:new xt,map:new(ft||St),string:new xt}},Tt.prototype.delete=function(t){var e=Ut(this,t).delete(t);return this.size-=e?1:0,e},Tt.prototype.get=function(t){return Ut(this,t).get(t)},Tt.prototype.has=function(t){return Ut(this,t).has(t)},Tt.prototype.set=function(t,e){var n=Ut(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},$t.prototype.add=$t.prototype.push=function(t){return this.__data__.set(t,o),this},$t.prototype.has=function(t){return this.__data__.has(t)},kt.prototype.clear=function(){this.__data__=new St,this.size=0},kt.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},kt.prototype.get=function(t){return this.__data__.get(t)},kt.prototype.has=function(t){return this.__data__.has(t)},kt.prototype.set=function(t,e){var n=this.__data__;if(n instanceof St){var o=n.__data__;if(!ft||o.length<r-1)return o.push([t,e]),this.size=++n.size,this;n=this.__data__=new Tt(o)}return n.set(t,e),this.size=n.size,this};var Bt=st?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[o++]=a)}return i}(st(t),(function(e){return ot.call(t,e)})))}:function(){return[]},Dt=At;function Ft(t,e){return!!(e=null==e?s:e)&&("number"==typeof t||C.test(t))&&t>-1&&t%1==0&&t<e}function zt(t){if(null!=t){try{return H.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function qt(t,e){return t===e||t!=t&&e!=e}(lt&&Dt(new lt(new ArrayBuffer(1)))!=k||ft&&Dt(new ft)!=m||dt&&"[object Promise]"!=Dt(dt.resolve())||ht&&Dt(new ht)!=E||pt&&"[object WeakMap]"!=Dt(new pt))&&(Dt=function(t){var e=At(t),n=e==y?t.constructor:void 0,r=n?zt(n):"";if(r)switch(r){case mt:return k;case vt:return m;case bt:return"[object Promise]";case yt:return E;case wt:return"[object WeakMap]"}return e});var Vt=It(function(){return arguments}())?It:function(t){return Ht(t)&&X.call(t,"callee")&&!ot.call(t,"callee")},Wt=Array.isArray;var Gt=ct||function(){return!1};function Kt(t){if(!Qt(t))return!1;var e=At(t);return e==p||e==g||e==l||e==w}function Jt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=s}function Qt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ht(t){return null!=t&&"object"==typeof t}var Xt=B?function(t){return function(e){return t(e)}}(B):function(t){return Ht(t)&&Jt(t.length)&&!!A[At(t)]};function Yt(t){return null!=(e=t)&&Jt(e.length)&&!Kt(e)?Ot(t):Pt(t);var e}n.exports=function(t,e){return Nt(t,e)}}).call(this,n(100),n(349)(t))},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(99).Auth,i=(n(363),n(341)),a=n(344),s=a.getCurrentTab,c=a.showTab,u=n(347),l=n(342),f=n(364),d=n(46),h=n(98),p=n(345),g=n(61),m=g.sanitize,v=g.handleError,b=n(350),y=n(346),w=TrelloPowerUp.Promise;function _(t,e){var n,r=$(".remove-command-popup");switch($("body").append(r.detach()),r.transition("hide"),c("".concat(t,"s")),$(".builder-batch-select,.builder-batch,.card-button,.board-button,.rule,.schedule,.on-date,.command-list-filter,.command-list,.empty-command-list,.admin-empty-command-list,.builder-wizard,.builder").transition("hide"),$(".".concat(t)).transition("show"),t){case"card-button":n="Card Buttons";break;case"board-button":n="Board Buttons";break;case"rule":n="Rules";break;case"schedule":n="Calendar Commands";break;case"on-date":n="Due Date Commands"}$(".your-commands-header").text(n),o.authorizeSoft().then((function(){$(".command-section .new-command-btn").transition("show"),$(".command-section .get-started-btn").transition("hide"),L(t,e)})).catch((function(){var n;A(),n=function(){o.authorize().then((function(){_(t,e)}))},$(".command-section .new-command-btn").transition("hide"),$(".command-section .get-started-btn").off("click").click(n).transition("show")}))}function E(t){return t.sort((function(t,e){return t.label<e.label?-1:e.label<t.label?1:0}))}function x(t){return w.join(p.getUserPlanLocal(),l.getCommands(t)).spread((function(e,n){var r=n.commands,o=n.obo_writable;return{commands:E(r),hit_limit:p.hasFeature(e,"command-limit")&&r.filter((function(t){return t.is_own})).length>=1,not_supported:p.hasFeature(e,"no-".concat(t)),is_admin:!!(e||{}).is_admin,obo_writable:o}}))}function S(t){x(t.type).then((function(e){return e.not_supported?$(".butler-not-supported-warning").transition("show").transition("pulse"):e.hit_limit?$(".butler-limit-warning").transition("show").transition("pulse"):void J((t=e.commands.find((function(e){return e.id===t.id}))||t).type,t,null,!0)}))}function T(t){$(".command-list > .command").transition("stop all");var e,n=$(".command-list-filter .ui.dropdown.filter").dropdown("get value");switch(n){case"":case"all":e=function(){return!0};break;case"enabled":e=function(t){return t.find(".enable-command-tgl")[0].checked};break;case"disabled":e=function(t){return!t.find(".enable-command-tgl")[0].checked};break;case"search":var r=$(".command-list-filter .command-search input").val().toLowerCase();e=function(t){return-1!==t.find(".code-area").text().toLowerCase().indexOf(r)};break;default:e=function(t){return t.find(".command-lib-name>.text").text()===n}}var o=0;$(".command-list > .command").filter((function(){var t=e($(this)),n=$(this).filter(":visible").length>0;return t&&++o,t!==n})).transition(t?"scale":"toggle"),$(".filter-no-commands").transition(o?"hide":"show")}function k(){return l.getAllCommands().then((function(t){return t.commands.map((function(t){return t.lib})).sort().filter((function(t,e,n){return t&&t!==n[e-1]}))}))}function O(t,e,n){e!==t.lib&&(n.addClass("disabled"),n.find(">.text").text(e),l.updateCommandId(t.id,{lib:e}).then((function(r){t.lib=r.lib,n.removeClass("disabled"),n.removeAttr("data-tooltip"),T(!0),h.logEvent("engagement","lib_set",!!e)})).catch((function(e){Sentry.captureException(e),n.find(">.text").text(t.lib),n.removeClass("disabled").attr("data-tooltip","Error saving.").transition("shake")})))}function C(t){var e=moment(Math.min(+new Date,t.t)).fromNow(),n="Last modified ".concat(e);t.is_own||(n+=' <span data-tooltip="Owner of this shared command"> by @'.concat(m(t.username),"</span>")),$("#".concat(t.id," .modified-by")).html(n)}function A(t){$(".command-list,.command-list-filter").transition("hide");var e=l.getAdminOnBehalfOf()?$(".admin-empty-command-list"):$(".empty-command-list");t?e.transition({animation:"fade down",duration:"0.33s"}):e.transition("show"),$(".library-manage").transition("show")}function I(t){t.transition({animation:"fade down",duration:"0.33s",onComplete:function(){t.remove(),$(".command-list").children().length||A(!0)}})}function N(){$(".command-list").children().length?($(".empty-command-list,.admin-empty-command-list").transition("hide"),$(".command-list,.command-list-filter,.create-command-buttons.top").transition("show"),T(),$(".library-manage").transition("show")):((l.getAdminOnBehalfOf()?$(".admin-empty-command-list"):$(".empty-command-list")).transition("show"),A());$(".command-section:visible").length||$(".command-section").transition({animation:"fade left",duration:"0s",onComplete:function(){}})}function R(){$(".builder-wizard:visible").length?$(".builder-wizard").transition({animation:"fade left",duration:"0.33s",onComplete:N}):N()}function P(t){var e=$(t.target).closest(".command"),n=e.attr("id"),r=$(".sharing-btns");y.trackEvent({verb:"clicks",dirObj:t.target.checked?"enable command":"disable command",context:{tab:s().trim()}}),r.addClass("disabled"),l.enableCommandId(n,t.target.checked).then((function(t){void 0===t.find((function(t){return t.id===n}))&&I(e),r.removeClass("disabled"),T(!0)})).catch((function(e){Sentry.captureException(e),r.removeClass("disabled"),$(t.target).closest(".ui.checkbox").checkbox("set ".concat(t.target.checked?"unchecked":"checked")).attr("data-tooltip","Error saving.").transition("shake")}))}var M={};function j(t,e,n){var r=M,o=r.not_supported,i=r.is_admin,a=f.buttonItem(t,o,i);n?a.insertBefore($("#".concat(n))):a.appendTo($(".command-list")),C(t),a.transition({animation:"fade down",duration:e?"0s":"0.33s",onComplete:function(){}}),a.find(".edit-command-btn").click((function(){l.getCommand(t.type,t.id,!0).then((function(e){J(t.type,e)}))})),a.find(".copy-command-btn").click((function(){S(t)}));var c={popup:".remove-command-popup",on:"click",position:"bottom center",lastResort:"bottom left",boundary:".command-list",duration:0,onShow:function(){$(this).attr("command-id",t.id),a.find(".command-btns").after($(this).detach())}};a.find(".remove-command-btn").popup(c),a.find(".enable-command-tgl").closest(".ui.checkbox").checkbox({onChange:function(){P({target:this})}}),a.find(".share-command-tgl").closest(".ui.checkbox").checkbox({onChange:function(){var t,e,n;t={target:this},e=$(t.target).closest(".command").attr("id"),n=$(".sharing-btns"),y.trackEvent({verb:"clicks",dirObj:t.target.checked?"share command":"unshare command",context:{tab:s().trim()}}),n.addClass("disabled"),l.updateCommandId(e,{shared:t.target.checked}).then((function(t){n.removeClass("disabled"),C(t)})).catch((function(e){Sentry.captureException(e),n.removeClass("disabled"),$(t.target).closest(".ui.checkbox").checkbox("set ".concat(t.target.checked?"unchecked":"checked")).attr("data-tooltip","Error saving.").transition("shake")})),t.target.checked&&h.logEvent("engagement","share_button")}}),a.find(".scope-command-tgl").closest(".ui.checkbox").checkbox({onChange:function(){var t,e,n;t={target:this},e=$(t.target).closest(".command").attr("id"),n=$(".sharing-btns"),y.trackEvent({verb:"clicks",dirObj:t.target.checked?"scope command to all boards":"scope command to this board",context:{tab:s().trim()}}),n.addClass("disabled"),l.updateCommandId(e,{scope:t.target.checked?l.ScopeTeam:l.ScopeBoard}).then((function(t){n.removeClass("disabled"),C(t)})).catch((function(e){Sentry.captureException(e),n.removeClass("disabled"),$(t.target).closest(".ui.checkbox").checkbox("set ".concat(t.target.checked?"unchecked":"checked")).attr("data-tooltip","Board is not in a team.").transition("shake")})),t.target.checked&&h.logEvent("engagement","team_scope_button")}}),a.find(".command-log-btn").click((function(){u.openCommandLog(t)}))}function U(t,e,n,r){if(-1===t.type.indexOf("button")){var o=M,i=o.not_supported,a=o.is_admin,s=f.commandItem(t,r,i,a);n?s.insertBefore($("#".concat(n))):s.appendTo($(".command-list")),C(t),s.transition({animation:"fade down",duration:e?"0s":"0.33s",onComplete:function(){}}),s.find(".edit-command-btn").click((function(){l.getCommand(t.type,t.id,!0).then((function(t){J(t.type,t)}))})),s.find(".copy-command-btn").click((function(){S(t)}));var c={popup:".remove-command-popup",on:"click",position:"bottom center",lastResort:"bottom left",boundary:".command-list",duration:0,onShow:function(){$(this).attr("command-id",t.id),s.find(".command-btns").after($(this).detach())}};s.find(".remove-command-btn").popup(c),s.find(".enable-command-tgl").closest(".ui.checkbox").checkbox({onChange:function(){P({target:this})}}),s.find(".command-log-btn").click((function(){u.openCommandLog(t,l.getAdminOnBehalfOf())})),s.find(".run-command-btn").click((function(){var e=l.getAdminOnBehalfOf();TrelloPowerUp.iframe({targetOrigin:"https://trello.com"}).boardBar({height:38,url:"./powerup-command-runner.html?cmd=".concat(t.id).concat(e?"&obo=".concat(e):"")})})),function(t,e){var n=$(".command-lib-name-popup>.popup").clone(),r=n.find(".lib-select");e.popup({popup:n,on:"click",position:"right center",target:e.find("i"),exclusive:!0,onShow:function(){r.dropdown({allowAdditions:!1,forceSelection:!1,action:"hide",message:{addResult:"",noResults:"Press enter to create tag"},onChange:function(n){e.popup("hide"),O(t,n,e)},onHide:function(){r.find("input.search").off("keydown")}}).dropdown(t.lib?"set text":"clear text",m(t.lib||"")),k().then((function(n){var o=n.map((function(e){return{name:m(e),value:m(e),selected:e===t.lib}}));r.dropdown("setup menu",{values:o}),setTimeout((function(){var n=r.find("input.search");n.on("keydown",(function(r){var o=r.keyCode||r.which;return"Enter"!==r.key&&"13"!==o||(e.popup("hide"),O(t,n.val(),e),n.off("keydown"),!1)})),n.focus()}),0)})),r.find("> a.info").transition(t.lib?"hide":"show"),r.find("> a.remove").transition(t.lib?"show":"hide").off("click").click((function(){e.popup("hide"),O(t,"",e)}))}})}(t,s.find(".command-lib-name"))}else j(t,e,n)}function L(t,e){$(".command-list").empty(),$(".command-list-filter").transition("hide"),$(".command-list-error").transition("hide"),$(".command-list-loading").transition("show"),$(".create-command-buttons").transition("hide"),$(".library-manage").transition("hide"),x(t).then((function(n){s()==="".concat(t,"s")&&($(".command-list-loading").transition("hide"),$(".create-command-buttons").transition("show"),$(".butler-not-supported-warning").transition(n.not_supported?"show":"hide"),$(".butler-limit-warning").transition(n.hit_limit&&!n.not_supported?"show":"hide"),n.is_admin?function(t){var e=$(".admin-ui .admin-member-select");if(t.match(/button/))return l.setAdminOnBehalfOf(),void e.dropdown({onChange:function(){}}).dropdown("clear");var n=TrelloPowerUp.iframe({targetOrigin:"https://trello.com"});w.join(n.board("members"),n.member("all")).spread((function(n,r){var o=e.find(".menu");o.find(">.item").remove(),o.append('<div class="item" data-value="'.concat(m(r.id),'">')+'<span class="text-body">'.concat(m(r.fullName)," <small>(@").concat(m(r.username),")</small></span>")+"</div>"),n.members.forEach((function(t){t.id!==r.id&&o.append('<div class="item" data-value="'.concat(m(t.id),'">')+'<span class="text-body">'.concat(m(t.fullName)," (@").concat(m(t.username),")</span>")+"</div>")}));var i=o.find(".ui.search.input");n.members.length>9?i.show():i.hide(),e.dropdown({onChange:function(e){e===r.id&&(e=void 0),l.getAdminOnBehalfOf()!==e&&(l.setAdminOnBehalfOf(e),L(t),h.logEvent("engagement","admin_select"))}}),$(".admin-ui").transition("show")}))}(t):$(".admin-ui").transition("hide"),M.not_supported=n.not_supported,M.is_admin=n.is_admin,$(".command-section .new-command-btn").transition(!1===n.obo_writable?"hide":"show"),n.commands.forEach((function(t){U(t,!0,null,n.obo_writable)})),R(),e&&e())})).catch((function(t){Sentry.captureException(t),$(".command-list-loading").transition("hide"),"NOT_AUTHORIZED"===t.message?$(".command-list-error.not-authorized").transition("show"):$(".command-list-error.error-loading").transition("show")}))}var B=!1,D=i.collectPhrase;function F(){var t=$(".builder-output .item").length;if(M.has_trigger){var e=$(".builder.triggers"),n=$(".builder.actions");if(!$(".builder-output .output-trigger .list").children().length)return $(".js-empty-trigger").transition("show"),$(".output-trigger .command-trigger").transition("hide"),$(".output-actions").transition("hide"),void n.transition({animation:"fade down",duration:"0.33s",onComplete:function(){e.transition("fade down")}});$(".js-empty-trigger").transition("hide"),$(".output-trigger .command-trigger").transition("show"),$(".output-actions").transition("show"),t-=1,n.hasClass("hidden")&&e.transition({animation:"fade down",duration:"0.33s",onComplete:function(){n.transition("fade down")}})}var r=$(".builder-output"),o=$(".builder-output .output-actions");$(".save-builder-output-btn").toggleClass("disabled",!t),$(".builder.actions-body").transition("show"),$(".add-actions").transition("hide"),t?($(".first-action").transition("hide"),$(".another-action").transition("show"),$(".js-empty-actions").transition("hide"),$(".output-actions .command-actions").transition("show"),r.hasClass("hidden")?(o.transition("show"),r.transition("fade down")):o.hasClass("hidden")&&o.transition("fade down")):($(".first-action").transition("show"),$(".another-action").transition("hide"),$(".output-actions .command-actions").transition("hide"),$(".js-empty-actions").transition("show"))}function z(t,e){t?($(".js-empty-trigger").transition("show"),$(".output-trigger .command-trigger").transition("hide"),$(".output-actions").transition("hide"),$(".builder.triggers").transition("show"),$(".builder.actions").transition("hide")):($(".js-empty-trigger").transition("hide"),$(".output-trigger .command-trigger").transition("show"),$(".output-actions").transition("show"),$(".builder.triggers").transition("hide"),$(".builder.actions").transition("show")),e?$(".builder-output .output-trigger").transition("show"):$(".builder-output .output-trigger").transition("hide")}function q(){var t=this.closest(".item");$(t).prev().detach().insertAfter(t)}function V(t){var e=$(t.target).closest(".item");e.transition({animation:"fade down",duration:"0.33s",onComplete:function(){e.remove(),F()}}),$(".too-many-actions").transition("hide"),$(".implicit-multiplier-stop").transition("hide")}function W(t){var e=f.triggerOutput(t);e.appendTo($(".builder-output .output-trigger .list")),e.find(".remove-trigger-btn").off("click").click(V),F()}function G(t,e){if($(".builder-output .output-actions .list .item").length>=40)$(".too-many-actions").transition("show");else if($(".too-many-actions").transition("hide"),$(".builder-output .output-actions .list .item.implicit-multiplier").length)$(".implicit-multiplier-stop").transition("show");else{$(".implicit-multiplier-stop").transition("hide");var n=f.actionOutput(e,t);n.appendTo($(".builder-output .output-actions .list")),e||n.transition({animation:"fade down",duration:$(".builder-output .output-actions:visible").length?"0.33s":"0s",onComplete:F}),n.find(".remove-action-btn").off("click").click(V),n.find(".move-up-action-btn").off("click").click(q);var r=n.find('[name="list-name"]');r.length&&i.setupListNameAutoComplete(r,null);var o=n.find('[name="board-name"]');o.length&&i.setupBoardNameAutoComplete(o,null,!0)}}function K(t,e){var n;switch(t){case"card-button":case"board-button":n=!0}if(!n||$(".ui.form.button-config").form("is valid")){var o,a=(o=[],$(".builder-output .output-phrase").each((function(t,e){o.push(D($(e)[0]).trim())})),i.joinCommandPhrases(o,M.has_trigger)),s=$('.ui.form.button-config input[name="button-label"]').val(),c=$(".ui.form.button-config .button-icon-select > i").attr("class"),u=$(".ui.form.button-config .button-icon-select > i").attr("data-image"),f=$(".ui.form.button-config .button-enabled").prop("checked"),d=$(".ui.form.button-config .button-close-card").prop("checked"),p=$(".cancel-btn");p.addClass("disabled");var g=$(".save-builder-output-btn");g.addClass("disabled");var m=g.find("i"),v=m.attr("class");m.attr("class","notched circle loading icon");var b=function(t){setTimeout((function(){p.removeClass("disabled"),g.removeClass("disabled"),m.attr("class",v),t?(Sentry.captureException(t),g.attr("data-tooltip","Error saving: ".concat("object"===r(t)?t.message:t)).transition("shake")):g.attr("data-tooltip",null)}),0)};e?(y.trackEvent({verb:"clicks",dirObj:"update command button",context:{idCommand:e.id,commandType:e.type}}),function(t,e,n,r,o,i,a,s){var c={label:n,icon:r,image:o,cmd:i,enabled:a,close:s?1:void 0};return l.updateCommandId(t,c).then((function(){return l.getCommands(e)})).then((function(e){var r=e.commands;R(),E(r);var o=r.findIndex((function(e){return e.id===t})),i=r.splice(o,1)[0];$("#".concat(t)).remove();var a=r.findIndex((function(t){return t.label>n}));U(i,!1,-1===a?null:r[a].id,e.obo_writable)}))}(e.id,e.type,s,c,u,a,f,d).then((function(){b()})).catch(b)):(y.trackEvent({verb:"clicks",dirObj:"save new command button",context:{commandType:t}}),function(t,e,n,r,o,i,a){var s={label:e,icon:n,image:r,cmd:o,type:t,shared:!1,scope:l.ScopeBoard,enabled:i,close:a?1:void 0};return x(t).then((function(n){return n.not_supported?(R(),$(".butler-not-supported-warning").transition("show").transition("shake"),y.trackEvent({verb:"prevents",dirObj:"creating command",prepObj:"not supported",context:{commandType:s.type}}),!1):n.hit_limit?(R(),$(".butler-limit-warning").transition("show").transition("shake"),y.trackEvent({verb:"prevents",dirObj:"creating command",prepObj:"limit reached",context:{commandType:s.type}}),!1):l.addCommand(s).then((function(e){return s=e,l.getCommands(t)})).then((function(n){var r=n.commands,i=E(r).findIndex((function(t){return t.label>e}));return U(s,!1,-1===i?null:r[i].id,n.obo_writable),R(),y.trackEvent({verb:"creates",dirObj:"command",context:{commandType:s.type}}),h.logEvent("engagement","add_command_".concat(t),{type:t,length:o.length}),!0}))}))}(t,s,c,u,a,f,d).then((function(){b()})).catch(b))}}function J(t,e,n,r){!function(t){switch(M={},t){case"card-button":$(".create-header").text("Create a Card Button"),M.has_trigger=!1;break;case"board-button":$(".create-header").text("Create a Board Button"),M.has_trigger=!1;break;case"rule":$(".create-header").text("Create a Rule"),M.has_trigger=!0;break;case"schedule":$(".create-header").text("Create a Schedule Command"),M.has_trigger=!0;break;case"on-date":$(".create-header").text("Create a Due Date Command"),M.has_trigger=!0}if(!B){M.has_trigger||$(".add-triggers").transition("hide"),B=!0,$(".builder-start-hidden").transition("hide"),$(".builder-tabs .item").tab({onFirstLoad:function(){i.setupDropdowns(this)}}),i.setupDropdowns(".builder .ui.tab.active"),$(".user-timezone").text(moment.tz.guess()),i.setupClauses(),i.setupInputFields(".builder"),i.setupPowerUpAutoComplete(".builder"),$("#builder-open-help").popup({on:"click",inline:!1,popup:$(".builder-help"),position:"top right",lastResort:"top right",hoverable:!1}),$(".builder-example").click((function(){return!1})).each((function(t,e){var n=$(e),r=n.next(".ui.popup");$(e).popup({on:"click",popup:r,target:!!n.length&&n,position:"top center",lastResort:!0,hoverable:!1,boundary:".builder-wizard-body"})}));var e=TrelloPowerUp.iframe({targetOrigin:"https://trello.com"});$(".builder-advanced-toggle").checkbox({onChecked:function(){e.set("member","private","advanced",!0),$(".builder-basic").addClass("hidden").hide(),$(".builder-advanced").removeClass("hidden").show()},onUnchecked:function(){e.set("member","private","advanced",!1),$(".builder-basic").removeClass("hidden").show(),$(".builder-advanced").addClass("hidden").hide()}}),$(".builder-basic").removeClass("hidden").show(),$(".builder-advanced").addClass("hidden").hide(),$(".builder-advanced-toggle").checkbox("set unchecked"),e.get("member","private","advanced").then((function(t){t?($(".builder-basic").addClass("hidden").hide(),$(".builder-advanced").removeClass("hidden").show(),$(".builder-advanced-toggle").checkbox("set checked")):($(".builder-basic").removeClass("hidden").show(),$(".builder-advanced").addClass("hidden").hide(),$(".builder-advanced-toggle").checkbox("set unchecked"))})),$(".builder-show-more-content").hide(),$(".builder-show-more").click((function(){return $(".builder-show-more").hide(),$(".builder-show-more-content").show(),!1})),$(".triggers .phrase").prepend('<div class="ui green icon right floated button select-trigger-btn" tabindex="0"><i class="plus icon"></i></div>'),$(".actions .phrase").prepend('<div class="ui green icon right floated button select-action-btn" tabindex="0"><i class="plus icon"></i></div>'),$(".select-trigger-btn").click((function(t){if(!$(t.target).closest(".phrase").find('input[type="text"]:not(.optional):visible').filter((function(){return!this.value})).addClass("error").off("focus").focus((function(){$(this).removeClass("error")})).length){var e=$(t.target).closest(".phrase"),n=D(e[0]).split("\n");n.slice(1).forEach((function(t){G(t,!0)}));var r=$(".builder-wizard").offset().top;r<$("html").scrollTop()&&$("html,body").animate({scrollTop:r},"slow"),W(n[0])}})),$(".select-action-btn").click((function(t){if(!$(t.target).closest(".phrase").find('input[type="text"]:not(.optional):visible').filter((function(){return!this.value})).addClass("error").off("focus").focus((function(){$(this).removeClass("error")})).length){var e=$(t.target).closest(".phrase"),n=D(e[0]),r=$(".builder-wizard").offset().top;r<$("html").scrollTop()&&$("html,body").animate({scrollTop:r},"slow"),G(n),$(".select-action-btn").blur()}}))}}(t),$("body").append($(".remove-command-popup").detach()),n?$(".builder .cancel-btn, .builder-wizard .cancel-btn").off("click").click((function(){R(),Y()})):$(".builder .cancel-btn, .builder-wizard .cancel-btn").off("click").click(R);var o=$(".builder-wizard:visible").length,a=function(){!function(t,e,n){if($(".ui.form.button-config").form("clear"),$(".ui.form.button-config .button-enabled").prop("checked",!0),$(".phrase input.error").removeClass("error"),$(".builder-output .list").empty(),$(".js-empty-trigger").transition("show"),$(".js-empty-actions").transition("show"),$(".add-actions").transition("show"),$(".actions-body").transition("hide"),$(".add-triggers").transition("show"),$(".triggers-body").transition("hide"),$(".output-actions .command-trigger").transition("hide"),$(".output-actions .command-actions").transition("hide"),$(".save-builder-output-btn").toggleClass("disabled",!0),$(".another-action").transition("hide"),t){var r=t.label;r&&n&&(r+=" (copy)"),$('.ui.form.button-config input[name="button-label"]').val(r),$(".ui.form.button-config .button-enabled").prop("checked",t.enabled),$(".ui.form.button-config .button-close-card").prop("checked",t.close);var o=$(".ui.form.button-config .button-icon-select .menu i").removeClass("selected").filter('[data-image="'.concat(t.image,'"]')).addClass("selected");o.length&&$(".ui.form.button-config .button-icon-select > i").replaceWith(o.clone())}var i=t?t.cmd.split(",\n").map((function(t){return"and "===t.substr(0,"and ".length)?t.substr("and ".length):t})):e?e.cmd:[];M.has_trigger?i.length?(W(i.shift()),z(!1,!0)):z(!0,!0):z(!1,!1),i.forEach(G)}(e,n,r),o||$(".builder-wizard").transition({animation:"fade right",duration:"0s",onComplete:function(){}}),$(".save-builder-output-btn").off("click").click((function(){r?K(t):e&&e.b&&(e.b.length>1||1===e.b.length&&!e.enabled)?$("#butler-confirm-edit-command").modal({onApprove:function(){K(t,e)},onDeny:function(){K(t)}}).modal("show"):K(t,e)}))};o?a():$(".command-section").transition({animation:"fade right",duration:"0.33s",onComplete:a})}function Q(){var t=$(".discarded-suggestion").length;if(!t)return $(".discarded-suggestions").transition("hide");$(".discarded-suggestions-count").text(t),$(".discarded-suggestions-btn").off("click").click((function(){return $(".discarded-suggestions").transition("scale"),$(".discarded-suggestion").transition("scale"),!1})),$(".discarded-suggestions").transition("show")}function H(t,e){var n,r;switch(t.type){case"rule":r=!0,n="Rule";break;case"schedule":r=!0,n="Scheduled (Calendar)";break;case"on-date":r=!0,n="Scheduled (Due Date)";break;case"board":r=!1,n="Board Button";break;default:r=!1,n="Card Button"}var o=$('<div class="ui grid transition suggestion '.concat("discard"===(t.user_action||{}).value?" discarded-suggestion hidden":e?" hidden-suggestion hidden":"",'">\n      <div class="two column paddingless row">\n        <div class="flex paddingless column">\n          <div class="ui labeled icon limited button tip">\n            <img class="icon-sm" src="img/sparkle.svg">\n            <div>\n              ').concat(m(n),'\n            </div>\n          </div>\n        </div>\n        <div class="flex paddingless column float right aligned actions">\n          <div class="ui button discard-suggestion-btn').concat(t.admin?" disabled":"",'">\n            <div class="img-wrapper">\n              <img src="img/trash.svg">\n            </div>\n          </div>\n          <div class="ui green button accept-suggestion-btn flex">\n            <div>\n              + Add\n            </div>\n          </div>\n        </div>\n\n      </div>\n      <div class="one column paddingless row">\n        <div class="column code-area">').concat(m(i.joinCommandPhrases(t.cmd,r)),'</td>\n      </div>\n      <div class="one column left aligned paddingless row">\n        <div class="column left aligned modified-by-container">\n          <div class="modified-by">\n            ').concat(m(t.admin?"Recommended by a system administrator.":"Performed "+t.count+" times, most recently "+moment(t.until).fromNow()+".")+m("discard"===(t.user_action||{}).value?" Discarded "+moment(t.user_action.date).fromNow()+".":""),"\n          </div>\n        </div>\n      </div>\n    </div>\n  "));o.appendTo($(".suggestion-list")),o.find(".accept-suggestion-btn").click((function(){!function(t,e){var n=e.find(".accept-suggestion-btn");n.addClass("disabled");var r=n.children("i"),o=r.attr("class");r.attr("class","notched circle loading icon"),b.accept(t).then((function(){e.transition("scale"),e.removeClass("discarded-suggestion"),r.attr("class",o),n.removeClass("disabled");var i=t.type||"card";switch(i){case"board":case"card":i+="-button"}y.trackEvent({verb:"accepts",dirObj:"".concat(t.type," button suggestion"),context:{admin:t.admin,utility:t.utility}}),_(i,(function(){J(i,null,t)}))})).catch((function(){r.attr("class","yellow warning sign icon"),n.transition("shake"),n.attr("data-tooltip","Error contacting server. Press to retry."),n.removeClass("disabled")})),h.logEvent("engagement","accept_suggestion",{utility:t.utility,admin:t.admin})}(t,o)})),o.find(".discard-suggestion-btn").click((function(){!function(t,e){var n=e.find(".discard-suggestion-btn");n.addClass("disabled");var r=n.children("i"),o=r.attr("class");r.attr("class","notched circle loading icon"),b.discard(t).then((function(){e.transition("scale"),e.addClass("discarded-suggestion"),r.attr("class",o),n.removeClass("disabled"),y.trackEvent({verb:"discards",dirObj:"".concat(t.type," button suggestion"),context:{admin:t.admin,utility:t.utility}}),Q()})).catch((function(){r.attr("class","yellow warning sign icon"),n.transition("shake"),n.attr("data-tooltip","Error contacting server. Press to retry."),n.removeClass("disabled")})),h.logEvent("engagement","discard_suggestion",{utility:t.utility,admin:t.admin})}(t,o)}))}function X(t){$(".suggestion-list").empty(),$(".butler-no-suggestions").transition("hide"),$(".butler-no-more-suggestions").transition("hide"),$(".butler-refresh-wait").transition("hide"),$(".discarded-suggestions").transition("hide"),$(".more-suggestions").transition("hide"),$(".butler-error-loading-suggestions").transition("hide"),$(".butler-suggestions-loading").transition("show"),$(".refresh-suggestions-btn").addClass("disabled");var e=TrelloPowerUp.iframe({targetOrigin:"https://trello.com"});TrelloPowerUp.Promise.join(b.getSuggestions(e,t),l.getAllCommands()).spread((function(t,n){var r=n.commands;t.admin_suggestions&&(t.suggestions=[].concat(t.admin_suggestions,t.suggestions),delete t.admin_suggestions);var o=(new Date).toISOString(),i=b.processSuggestionData(t,r,o),a=i.since,s=i.suggestions,c=i.suggestionDataToCache;if($(".butler-suggestions-loading").transition("hide"),$(".refresh-suggestions-btn").removeClass("disabled"),s.length){t.refresh_wait&&($(".suggestions-refresh-wait").text(moment(t.refresh_wait).fromNow(!0)),$(".butler-refresh-wait").transition("slide down")),$(".suggestions-date").text(moment(c.dateLastUpdate).fromNow()),$(".suggestions-action-count").text(t.action_count),$(".suggestions-since").text(a),$(".suggestions-header").transition("show");var u=0,l=0;if(s.forEach((function(t){"discard"===(t.user_action||{}).value?H(t):u>=5?(l+=1,H(t,!0)):(u+=1,H(t))})),u||$(".butler-no-more-suggestions").transition("slide down"),l>0&&($(".more-suggestions-count").text(l),$(".more-suggestions-btn").off("click").click((function(){return $(".more-suggestions").transition("scale"),$(".hidden-suggestion").transition("scale"),!1})),$(".more-suggestions").transition("show")),Q(),c)return c.dateLastSeen=o,e.set("board","private","suggestions",c)}else if($(".butler-no-suggestions").transition("slide down"),c)return c.dateLastSeen=o,e.set("board","private","suggestions",c)})).then((function(){b.setSuggestionTabUnseenCount(e)})).catch((function(t){if(Sentry.captureException(t),"INVALID_TOKEN"===t.message||"USER_NOT_FOUND"===t.message)return o.reauthorize(e).then((function(){_("card-button")}));$(".butler-suggestions-loading").transition("hide"),$(".refresh-suggestions-btn").removeClass("disabled"),$(".butler-error-loading-suggestions").transition("slide down")})),h.logEvent("engagement",t?"refresh_suggestions":"load_suggestions")}function Y(){var t=parseInt($(".unseen-suggestion-count").text()||"0",10),e=s();y.trackEvent({verb:"visits",dirObj:"suggestions tab",context:{tab:e,numUnseenSuggestions:t}}),$(".refresh-suggestions-btn").off("click").click((function(){X(!0)})),c("suggestions",!0),X(!1)}function Z(){var t=TrelloPowerUp.iframe({targetOrigin:"https://trello.com"});function e(e){var n=e,r=!1,i=$("#butler-command-importer-modal"),a=i.find(".js-importable-commands");i.modal({selector:{close:".right.corner.label"},onHide:function(){if(a.empty(),r){l.clearCachedServerCommands();var t=s();_("s"===t[t.length-1]?t.slice(0,-1):t),r=!1}}}),i.modal("show"),a.empty();var c={rules:"Rules",due_date:"Due Date Commands",calendar:"Calendar Commands",non_importable:"Non-Importable Commands"};function u(t,e){n[e]&&(n[e]=n[e].filter((function(e){return e.ccid!==t})),r=!0)}function f(e){var r=n[e]||[],i=$('<table class="ui unstackable table '+m(e)+'"><thead><tr><th>'+m(c[e])+'</th><th class="right aligned"></th></tr></thead><tbody class="'+m(e)+'-data-rows"></tr></tbody></table>');r.forEach((function(r,a){var s='<tr><td data-index="'.concat(m(a),'">').concat(m(r.cmd),"</td>");s+='<td class="right aligned">',"non_importable"!==e&&(s+='<div class="ui transparent icon button command-import-btn" tabindex="0" alt="Import command" data-tooltip="Import command"><i class="download icon"></i></div>'),s+='<div class="ui transparent icon disabled button import-loading-icon transition hidden" tabindex="0"><i class="blue notched circle loading icon"></i></div>',s+='<div class="ui transparent icon disabled button import-success-icon transition hidden" tabindex="0"><i class="checkmark icon"></i></div>',s+='<div class="ui transparent icon button command-archive-btn" tabindex="0" alt="Archive command" data-tooltip="Archive command"><i class="archive icon"></i></div>',s+="</td></tr>";var c=$(s);c.appendTo(i.find(".".concat(m(e),"-data-rows"))),"non_importable"!==e&&c.find(".command-import-btn").click((function(){!function(e,r,i){r.find(".command-import-btn").transition("hide"),r.find(".import-loading-icon").transition("show"),o.getToken(t).then((function(n){return new w((function(r,o){var i=t.getContext().board;$.ajax("".concat(d,"bot-command-import"),{type:"POST",headers:{"X-Butler-Trello-Token":n},data:JSON.stringify({board_id:i,cmd:e.cmd,ccid:e.ccid})}).done((function(t){return t.success?r(t.response):o(new Error(t.error||"NO_RESPONSE"))})).fail((function(){return o(new Error("NETWORK_ERROR"))}))}))})).then((function(t){r.find(".import-loading-icon").transition("hide"),r.find(".import-success-icon").transition("show"),r.transition({animation:"fade down",duration:"1.13s",onComplete:function(){r.remove(),0===n[i].length&&$(".table.".concat(i)).transition("hide"),$(".rules-data-rows").children().length||$(".due_date-data-rows").children().length||$(".calendar-data-rows").children().length||$(".empty-list").transition("show")}}),t.ccid&&u(t.ccid,i)})).catch((function(t){r.find(".import-loading-icon").transition("hide"),r.find(".command-import-btn").attr("data-tooltip",t||"NO_RESPONSE").attr("alt",t).transition("shake"),r.find(".command-archive-btn").transition("show"),console.log("Error importing command",t),Sentry.captureException(t)}))}(r,c,e)})),c.find(".command-archive-btn").click((function(){!function(e,r,i){r.find(".command-archive-btn").transition("hide"),r.find(".import-loading-icon").transition("show"),o.getToken(t).then((function(n){return new w((function(r,o){var i=t.getContext().board;$.ajax("".concat(d,"bot-command-archive"),{type:"POST",headers:{"X-Butler-Trello-Token":n},data:JSON.stringify({board_id:i,cmd:e.cmd,ccid:e.ccid})}).done((function(t){return t.success?r(t.response):o(new Error(t.error||"NO_RESPONSE"))})).fail((function(){return o(new Error("NETWORK_ERROR"))}))}))})).then((function(t){r.find(".import-loading-icon").transition("hide"),r.find(".import-success-icon").transition("show"),r.transition({animation:"fade down",duration:"1.13s",onComplete:function(){r.remove(),0===n[i].length&&$(".table.".concat(i)).transition("hide"),$(".rules-data-rows").children().length||$(".due_date-data-rows").children().length||$(".calendar-data-rows").children().length||$(".empty-list").transition("show")}}),t.ccid&&u(t.ccid,i)})).catch((function(t){r.find(".import-loading-icon").transition("hide"),r.find(".command-archive-btn").attr("data-tooltip",t).attr("alt",t).transition("shake"),console.log("Error archiving bot command",t),Sentry.captureException(t)}))}(r,c,e)}))})),i.appendTo($(".js-importable-commands")),r.length||$(".table.".concat(e)).transition("hide")}f("rules"),f("due_date"),f("calendar"),f("non_importable"),n.rules.length||n.due_date.length||n.calendar.length||i.find(".empty-list").transition("show"),i.modal("refresh")}o.getToken(t).then((function(e){return new w((function(n,r){var o=t.getContext().board;$.ajax("".concat(d,"importable-commands?b=").concat(o),{type:"GET",headers:{"X-Butler-Trello-Token":e}}).done((function(t){return t.success?n(t.response):r(new Error(t.error||"NO_RESPONSE"))})).fail((function(){return r(new Error("NETWORK_ERROR"))}))}))})).then((function(t){var n=t||{rules:[],calendar:[],due_date:[],non_importable:[]};(n.rules.length||n.calendar.length||n.due_date.length||n.non_importable.length)&&($(".butler-bot-command-import-btn").off("click").click((function(){return e(n),!1})),$(".butler-importable-commands").transition("show"))})).catch((function(t){"NOT_AUTHORIZED"!==t.message&&(console.log("Error fetching importable commands",t),Sentry.captureException(t))}))}function tt(t,e){var n=e?$("#butler-library-enable-modal"):$("#butler-library-disable-modal"),r=n.find(".library-command-list"),o=n.find("> .actions .ok"),i=!1;o.addClass("disabled"),n.find("> .content > .message").transition("hide").filter(".updating").transition("show"),n.find(".library-command-list").empty(),n.modal({transition:"fade",selector:{close:".right.corner.label"},onHide:function(){(r.empty(),i)&&L(s().replace(/s$/,""))},onApprove:function(){return n.find("> .content > .updating.message").transition("hide"),n.find("> .content > .enabling.message").transition("show"),n.find("> .content > .error-enabling.message").transition("hide"),o.addClass("disabled"),l.enableLibrary(t,e).then((function(){n.find("> .content > .enabling.message").transition("hide"),n.find("> .content > .success-enabling.message").transition("show"),i=!0,h.logEvent("engagement","lib_enable",e)})).catch((function(t){Sentry.captureException(t),o.removeClass("disabled"),n.find("> .content > .enabling.message").transition("hide"),n.find("> .content > .error-enabling.message").transition("show")})),!1}}),n.modal("show"),l.getAllCommands().then((function(e){var i=e.commands;r.empty();var a="".concat('<table class="ui unstackable table"><thead><tr><th><i class="tag icon"></i>').concat(m(t),"</th></tr></thead><tbody>");i.forEach((function(e){if(e.lib===t){var n=e.cmd.replace(/\n/g," ");a+='<tr><td class="code-area">'.concat(m(n),"</td></tr>")}})),a+="</tbody></table>",r.html(a),setTimeout((function(){n.find("> .content > .updating.message").transition("hide")})),n.modal("refresh"),o.removeClass("disabled")})).catch((function(t){Sentry.captureException(t),n.find("> .content > .message.updating").transition("hide"),n.find("> .content > .message.error-updating").transition("show")}))}function et(){var t,e,n=$("#butler-library-sharing-modal"),r=n.find(".library-list");n.find("> .content > .message").transition("hide").filter(".updating").transition("show"),n.modal({selector:{close:".right.corner.label"},onHide:function(){r.empty()}}),n.modal("show"),(t=TrelloPowerUp.iframe({targetOrigin:"https://trello.com"}),e=l.getAdminOnBehalfOf()||t.getContext().member,w.join(l.getAllCommands(),l.getSharedLibraries()).spread((function(t,n){var r=t.commands,o=t.obo_writable,i={},a={},s=n.map((function(t){return t.user_id===e?(t.is_own=!0,t.count=0,t.enabled=0,i[t.title]=t):a[t.title]=t,t}));return r.forEach((function(t){if(t.lib){var n=i[t.lib];n||(n={user_id:e,title:t.lib,is_own:!0,count:0,enabled:0,src:a[t.lib]},i[t.lib]=n,n.src&&(n.src.used=!0),s.push(n)),++n.count,t.enabled&&++n.enabled}})),(s=s.filter((function(t){return!t.used}))).sort((function(t,e){return t.is_own&&!e.is_own?-1:!t.is_own&&e.is_own?1:t.title.localeCompare(e.title)})),{libs:s,obo_writable:o}}))).then((function(t){var e=t.libs,o=t.obo_writable;r.empty();var i=e.filter((function(t){return t.is_own&&t.enabled||!1!==o}));i.forEach((function(t,n){var i='<table data-index="'.concat(m(n),'" class="ui unstackable table">')+"<thead><tr>"+"<th>".concat(m(t.title),"</th>")+'<th class="right aligned">';t.is_own?(!1!==o&&(i+='<div class="ui transparent icon button library-rename-btn" tabindex="0" alt="Rename" data-tooltip="Rename the library"><i class="pencil icon"></i></div><div class="ui transparent icon button library-enable-btn" tabindex="0" alt="Enable all on this board" data-tooltip="Enable all of this library\'s commands on this board"><i class="check icon"></i></div>'),i+='<div class="ui transparent icon button library-disable-btn" tabindex="0" alt="Disable all on this board" data-tooltip="Disable all of this library\'s commands on this board"><i class="remove icon"></i></div>'):i+='<div class="ui transparent icon button library-import-btn" tabindex="0" alt="Import all commands from the shared library" data-tooltip="Import all commands from the shared library"><i class="download icon"></i></div>',i+="</th></tr></thead><tbody><tr>",t.is_own&&!1!==o?(i+="<td>".concat(m(t.count)," commands (").concat(m(t.enabled)," enabled)</td>")+'<td class="right aligned"><div class="ui toggle checkbox">'+'<input type="checkbox" class="library-share-tgl"'.concat(t.link_id||t.src?" checked":"").concat(t.is_own&&!t.src?"":" disabled",'><label style="margin-right:0.75em">Shared</label>')+"</td>",t.src&&(i+="</tr><tr><td>A library with this name is shared by ".concat(m(t.src.username?"@"+t.src.username:"another user"),'</td><td class="right aligned">')+'<div class="ui transparent icon button library-import-btn" tabindex="0" alt="Add/update all commands from the shared library" data-tooltip="Add/update all commands from the shared library"><i class="download icon"></i></div></td>')):i+="<td>".concat(m(t.username?"Shared by @"+t.username:"Shared by another user"),"</td><td></td>"),i+="</tr></tbody></table>";var a=$(i);a.appendTo(r),a.find(".library-share-tgl").closest(".ui.checkbox").checkbox({onChange:function(){!function(t,e){var n=$(t.target),r=t.target.checked;n.addClass("disabled"),(r?l.startSharing(e.title):l.stopSharing(e)).then((function(t){n.removeClass("disabled"),r?(e.link_id=t.link_id,e.org_id=t.org_id):(delete e.link_id,delete e.org_id),h.logEvent("engagement","lib_share",r)})).catch((function(e){Sentry.captureException(e),n.removeClass("disabled"),$(t.target).closest(".ui.checkbox").checkbox("set ".concat(t.target.checked?"unchecked":"checked")).attr("data-tooltip","Error saving.").transition("shake")}))}({target:this},t)}}),a.find(".library-import-btn").click((function(){!function(t){var e=$("#butler-library-import-modal"),n=e.find(".library-command-list"),r=e.find("> .actions .ok"),o=!1;r.addClass("disabled"),e.find("> .content > .message").transition("hide").filter(".updating").transition("show"),e.find(".library-command-list").empty(),e.modal({transition:"fade",selector:{close:".right.corner.label"},onHide:function(){(n.empty(),o)&&L(s().replace(/s$/,""))},onApprove:function(){return e.find("> .content > .updating.message").transition("hide"),e.find("> .content > .importing.message").transition("show"),e.find("> .content > .error-importing.message").transition("hide"),r.addClass("disabled"),l.importLibrary(t).then((function(){e.find("> .content > .importing.message").transition("hide"),e.find("> .content > .success-importing.message").transition("show"),o=!0,h.logEvent("engagement","lib_import")})).catch((function(t){Sentry.captureException(t),r.removeClass("disabled"),e.find("> .content > .importing.message").transition("hide"),e.find("> .content > .error-importing.message").transition("show")})),!1}}),e.modal("show"),l.getSharedLibrary(t).then((function(t){n.empty();var o="".concat('<table class="ui unstackable table"><thead><tr><th><i class="tag icon"></i>').concat(m(t.title),"</th></tr></thead><tbody>");t.cmds.forEach((function(t){var e=t.cmd.replace(/\n/g," ");o+='<tr><td class="code-area">'.concat(m(e),"</td></tr>")})),o+="</tbody></table>",n.html(o),setTimeout((function(){e.find("> .content > .updating.message").transition("hide")})),e.modal("refresh"),r.removeClass("disabled")})).catch((function(t){Sentry.captureException(t),e.find("> .content > .message.updating").transition("hide"),e.find("> .content > .message.error-updating").transition("show")}))}(t.src?t.src.link_id:t.link_id)})),a.find(".library-enable-btn").click((function(){tt(t.title,!0)})),a.find(".library-disable-btn").click((function(){tt(t.title,!1)})),a.find(".library-rename-btn").click((function(){!function(t,e){var n=TrelloPowerUp.iframe({targetOrigin:"https://trello.com"}),r=l.getAdminOnBehalfOf()||n.getContext().member,o=$("#butler-library-rename-modal"),i=o.find('input[name="lib-name"]'),a=o.find('input[name="new-name"]'),c=!1;o.find("> .content > .message").transition("hide"),o.find(".ok.button").removeClass("disabled"),a.attr("disabled",!1);var u={};e.forEach((function(t){t.user_id===r&&(u[t.title]=!0)}));var f=function(){var e=a.val().trim();o.find(".rename-lib,.merge-libs,.remove-tag").transition("hide"),e?e===t.title?o.find(".rename-lib").transition("show").filter(".ok.button").addClass("disabled"):u[e]?o.find(".merge-libs").transition("show"):o.find(".rename-lib").transition("show").filter(".ok.button").removeClass("disabled"):o.find(".remove-tag").transition("show")};i.val(t.title),a.val(t.title).off("input").on("input",f),f(),o.modal({transition:"fade",selector:{close:".right.corner.label"},onHide:function(){c&&L(s().replace(/s$/,""))},onApprove:function(){a.attr("disabled",!0),o.find(".ok.button").addClass("disabled"),o.find("> .content > .renaming.message").transition("show"),o.find("> .content > .error-renaming.message").transition("hide");var e=a.val().trim();return l.renameLibrary(t.title,e).then((function(){o.find("> .content > .renaming.message").transition("hide"),o.find("> .content > .success-renaming.message").transition("show"),c=!0})).catch((function(t){Sentry.captureException(t),a.attr("disabled",!1),o.find(".ok.button").removeClass("disabled"),o.find("> .content > .renaming.message").transition("hide"),o.find("> .content > .error-renaming.message").transition("show")})),!1}}),o.modal("show")}(t,e)}))})),i.length||n.find("> .content > .message.empty-list").transition("show"),setTimeout((function(){n.find("> .content > .updating.message").transition("hide")})),n.modal("refresh")})).catch((function(t){Sentry.captureException(t),n.find("> .content > .message.updating").transition("hide"),n.find("> .content > .message.error-updating").transition("show")}))}function nt(){$(".help-popup").click((function(){return!1})).each((function(t,e){var n=$(e),r=n.attr("data-popup-selector"),o=r?$(r):n.next(".ui.popup");n.popup({on:"click",popup:o,target:!!n.length&&n,position:"top center",lastResort:!0,hoverable:!1,boundary:".builder-wizard-body"})})),$(".close-popup").off("click").click((function(t){$(t.target).closest(".popup").popup("hide all")})),$(".butler-account-details-btn").off("click").click((function(){return TrelloPowerUp.iframe({targetOrigin:"https://trello.com"}).overlay({url:"./powerup-account.html?tab=account"}).catch((function(t){return v("showAccountOverlay",t)})),!1})),$(".butler-usage-details-btn").off("click").click((function(){return TrelloPowerUp.iframe({targetOrigin:"https://trello.com"}).overlay({url:"./powerup-account.html?tab=usage"}).catch((function(t){return v("showUsageOverlay",t)})),!1})),$(".remove-command-popup .ok.button").click((function(t){var e=M.is_admin;$(t.target).addClass("disabled"),function(t,e){var n=$(t.target).closest(".popup"),r=n.attr("command-id");$(".butler-limit-warning").transition("hide"),l.removeCommandId(r,e).then((function(){I(n.closest("#".concat(r))),n.transition("hide"),$("body").append($(".remove-command-popup").detach()),$(t.target).removeClass("disabled")})).catch((function(e){Sentry.captureException(e),$(t.target).removeClass("disabled"),$(t.target).closest(".ui.button").transition("shake")}))}(t,e)})),$(".command-list-filter .ui.dropdown.filter").dropdown({onShow:function(){var t=$(this);k().then((function(e){var n=e.map((function(t){return'<a class="item" data-type="lib" data-value="'.concat(m(t),'"><i class="tag icon"></i>').concat(m(t),"</a>")}));t.find('.item[data-type="lib"]').detach(),n.length?t.find(".divider.libs").transition("show").after(n):t.find(".divider.libs").transition("hide")}))},onChange:function(t){$(".command-list-filter .command-search").transition("search"===t?"show":"hide"),T(!0),$("html,body").animate({scrollTop:0},"slow")}}),$(".command-list-filter .command-search").off("input").on("input",(function(){T(!0)})),$(".builder.actions .add-actions").click((function(t){$(".builder.actions .actions-body").transition("show"),$(t.target).transition("hide")})),$(".builder.triggers .add-triggers").click((function(t){$(".builder.triggers .triggers-body").transition("show"),$(t.target).transition("hide")})),$(".library-manage .button").off("click").click((function(){et()}))}var rt={init:function(){var t=TrelloPowerUp.iframe({targetOrigin:"https://trello.com"});switch(l.init(t),b.setSuggestionTabUnseenCount(t),$(".dashboard-tabs .ui.dropdown").dropdown({on:"hover"}),$('.dashboard-tabs .item[data-tab="tab-suggestions"]').click((function(){Y(),$(".left-pane").toggleClass("hidden")})),$('.dashboard-tabs .item[data-tab="tab-card-buttons"]').click((function(){_("card-button"),$(".left-pane").toggleClass("hidden")})),$('.dashboard-tabs .item[data-tab="tab-board-buttons"]').click((function(){_("board-button"),$(".left-pane").toggleClass("hidden")})),$('.dashboard-tabs .item[data-tab="tab-rules"]').click((function(){_("rule"),$(".left-pane").toggleClass("hidden")})),$('.dashboard-tabs .item[data-tab="tab-schedules"]').click((function(){_("schedule"),$(".left-pane").toggleClass("hidden")})),$('.dashboard-tabs .item[data-tab="tab-on-dates"]').click((function(){_("on-date"),$(".left-pane").toggleClass("hidden")})),(window.location.search.match(/tab=([a-zA-Z]*)/)||[])[1]){case"rules":c("rules"),_("rule");break;case"schedule":case"schedules":case"scheduled":c("schedules"),_("schedule");break;case"on-dates":case"due-dates":case"duedates":case"dates":c("on-dates"),_("on-dates");break;case"suggestions":o.authorizeSoft().then((function(){Y()}));break;default:o.authorizeSoft().then((function(){p.refreshUserPlan(t)})).catch((function(){})).finally((function(){Y()})),Z()}$(".command-section .new-command-btn").click((function(){var t=s().replace(/s$/,""),e={verb:"clicks",dirObj:"new command button",context:{commandType:t}};x(t).then((function(n){return n.not_supported?(e.prepObj="on not support command",y.trackEvent(e),$(".butler-not-supported-warning").transition("show").transition("pulse")):n.hit_limit?(e.prepObj="on limited command",y.trackEvent(e),$(".butler-limit-warning").transition("show").transition("pulse")):(y.trackEvent(e),void J(t))}))})),$(".ui.form.button-config").form({fields:{"button-label":"empty"},on:"blur"}),$(".button-icon-select").dropdown({onChange:function(t){$(this).find(">i").replaceWith($(t))}}),nt()}};window.PowerUpDashboard=rt,t.exports=rt},function(t,e){var n={};!function(){n.startBatchSelect=function(n){if(!e){e=!0;var r=$(".batch-card-filter-popup");$(".builder.card-filter").children().clone().appendTo(r.children(".builder")),r.find(".clause").css("min-height","4.5em").prepend('<div class="ui icon inverted blue right floated button add-filter-btn" tabindex="0"><i class="plus icon"></i></div>'),$(".batch-card-filter").popup({on:"click",popup:r,position:"bottom center",lastResort:"bottom center",onShow:function(){Builder.setupDropdowns(this),Builder.setupPowerUpAutoComplete(this),$(this).find(".builder-tabs .item").tab()}}),$(".batch-count-btn").click(c)}Auth.authorize().then((function(){!function e(n){var r=TrelloPowerUp.iframe({targetOrigin:"https://trello.com"});t.join(r.cards("all"),r.lists("all"),r.board("all")).spread((function(t,s,c){var g={};s.forEach((function(t){t.name=sanitize(t.name),g[t.id]=t})),$('.powerup-batch-segment .ui.input>input[name="list-name"]').addClass("prompt").parent().addClass("search").search({source:s,fields:{title:"name"},searchFields:["name"],searchFullText:!1,showNoResults:!1,minCharacters:0,onSearchQuery:o,onSelect:function(t){i.bind(this)(t.name)}}),c.members.forEach((function(t){t.username=sanitize(t.username),t.fullName=sanitize(t.fullName)})),$('.powerup-batch-segment .ui.input>input[name="username"]').addClass("prompt").parent().addClass("search").search({source:c.members,fields:{title:"username",description:"fullName"},searchFields:["username","fullName"],searchFullText:!1,showNoResults:!1,minCharacters:0,onSearchQuery:o,onSelect:function(t){i.bind(this)(t.username)}});var m=[],v={};t.forEach((function(t,e){t.index=e,t.list=g[t.idList],t.selected=!0,t.labels.forEach((function(t){var e=t.name+"|"+t.color;v[e]||(v[e]=!0,m.push(t))}))})),$("#batch-select-all").prop("checked",!0);var b={green:0,yellow:1,orange:2,red:3,purple:4,blue:5,sky:6,lime:8,pink:9,black:10,colorless:11};m.sort((function(t,e){return b[t.color||"colorless"]-b[e.color||"colorless"]||(t.name||"").localeCompare(e.name||"")})),$(".powerup-batch-segment .dropdown.label-select .menu").html(m.map((function(t,e){var n=[];return t.color&&n.push(t.color),t.name&&n.push(sanitize('"'+t.name+'"')),n=n.join(" "),e||$(".powerup-batch-segment .dropdown.label-select").dropdown("set value",n),'<div class="item batch-label '+(t.color||"colorless")+(e?"":" active selected")+'" data-value="'+n+'">'+n+"</div>"}))),$(".powerup-batch-segment .add-filter-btn").off("click").click((function(){h.bind(this)(t)})),$(".batch-sort-list-btn").off("click").click((function(){u($(this)),d(t,l(),f()),a(t)})),$(".batch-sort-due-btn").off("click").click((function(){u($(this)),d(t,f(),l()),a(t)})),$(".batch-reload-btn").off("click").click((function(){$(".batch-card-filter .filters").children().remove(),$(".batch-sort-list-btn .icon,.batch-sort-due-btn .icon").removeClass("ascending").removeClass("descending"),e(n)})),$(".batch-automate-btn").off("click").click((function(){var e,o=t.filter((function(t){return t.selected&&!t.filtered})).map((function(t){return t.id}));n(null,o.length,(e=[],$(".batch-card-filter .filters").children().each((function(){e.push(Builder.collectPhrase(this))})),e.join(" ")),(function(t){t&&CommandRunner.startBatchJob(t,o).then((function(t){r.boardBar({height:38,url:"./powerup-command-runner.html?job="+t.t}).then((function(){r.closeOverlay()}))})).catch((function(t){console.log("BATCH ERROR",t)}))}))})),d(t,l(),f()),p(t),a(t)}))}(n)}))};var t=TrelloPowerUp.Promise,e=!1,r=10;function o(t){var e=$(this).data("search-select");return!e||(t!=e?($(this).data("search-select",""),!0):($(this).search("search local",""),!1))}function i(t){$(this).data("search-select",t)}function a(t,e){e||(e=1);var n=(e-1)*r,o=t.filter((function(t){return!t.filtered})),i=o.slice(n,n+r),c="";o.length?i.forEach((function(t,e){c+='<tr><td width="40" class="center aligned tbl-head-bg" style="font-size:0.9em">'+(n+e+1)+'</td><td width="40" class="center aligned tbl-head-bg"><input type="checkbox" class="batch-select-card" name="'+(n+e)+'"'+(t.selected?" checked":"")+'></td><td height="50">'+(t.name.length<128?sanitize(t.name):sanitize(t.name.slice(0,125))+" ...")+"<br>";var r=t.labels.find((function(t){return t.name}))?"&nbsp;":"";c+=t.labels.map((function(t){return'<span class="ui small label batch-label '+(t.color||"colorless")+'">'+(sanitize(t.name)||r)+"</span>"})).join("")+t.members.map((function(t){return'<span class="ui circular small label batch-member" data-tooltip="'+sanitize(t.fullName)+" ("+sanitize(t.username)+')">'+(sanitize(t.initials)||"&nbsp;")+"</span>"})).join("")+'</td><td class="collapsed center aligned tbl-strong">'+sanitize(t.list.name)+'</td><td class="collapsed center aligned tbl-strong">'+(t.due?t.dueComplete?'<span class="ui green label" data-tooltip="'+moment(t.due).format("llll")+'">'+moment(t.due).fromNow()+"</span>":new Date(t.due)<new Date?'<span class="ui red label" data-tooltip="'+moment(t.due).format("llll")+'">'+moment(t.due).fromNow()+"</span>":+new Date(t.due)<+new Date+864e5?'<span class="ui yellow label" data-tooltip="'+moment(t.due).format("llll")+'">'+moment(t.due).fromNow()+"</span>":moment(t.due).fromNow():"")+"</td></tr>"})):c='<tr><td colspan="5" class="collapsed center aligned tbl-strong disabled">No cards to display.</td></tr>',$(".batch-cards").html($(c)),$(".batch-count.cards .value").text(t.length),$(".batch-count.filter .value").text(o.length),$(".batch-count.selected .value").text(o.reduce((function(t,e){return e.selected?++t:t}),0)),s(o.length==t.length?"cards":"filter");var u=Math.ceil(o.length/r)||1,l="";l+='<a class="'+(1==e?"disabled ":"")+'item prev">&lt;</a>';var f=[1,e-1,e,e+1,u];e<=4&&(f.push(2),f.push(3),f.push(4),f.push(5)),e>=u-3&&(f.push(u-4),f.push(u-3),f.push(u-2),f.push(u-1)),f.sort((function(t,e){return t-e})).filter((function(t,e,n){return t>0&&t<=u&&t!=n[e-1]})).forEach((function(t,n,r){n&&r[n-1]<t-1&&(l+='<div class="disabled item">...</div>'),l+='<a class="'+(t==e?"active ":"")+'item page">'+t+"</a>"})),l+='<a class="'+(e==u?"disabled ":"")+'item next">&gt;</a>';var d=$("#batch-pages").html($(l));d.find(".item.page").click((function(){a(t,+$(this).text())})),1!=e&&d.find(".item.prev").click((function(){a(t,e-1)})),e!=u&&d.find(".item.next").click((function(){a(t,e+1)})),$("#batch-select-all").off("change").change((function(){var n=$(this).prop("checked");t.forEach((function(t){t.selected=n})),a(t,e),s("selected")})),$(".batch-select-card").off("change").change((function(){var e=+$(this).attr("name"),n=+$(".batch-count.selected .value").text();$(this).prop("checked")?(++n,t[e].selected=!0):(--n,t[e].selected=!1),$("#batch-select-all").prop("checked",n==o.length),$(".batch-count.selected .value").text(n),s("selected")}))}function s(t){$(".batch-count").transition("hide"),$(".batch-count."+t).transition("show")}function c(){var t=$(".batch-count:visible");t.transition("hide");var e=t.next();e.length||(e=t.siblings().first()),e.transition("show")}function u(t){var e=t.find(".icon");e.hasClass("ascending")?e.removeClass("ascending").addClass("descending"):e.hasClass("descending")?e.removeClass("descending"):e.addClass("ascending")}function l(){var t=$(".batch-sort-list-btn .icon");return t.hasClass("ascending")?function(t,e){return t.list.name.localeCompare(e.list.name)}:t.hasClass("descending")?function(t,e){return e.list.name.localeCompare(t.list.name)}:null}function f(){var t=$(".batch-sort-due-btn .icon");if(t.hasClass("ascending")){var e=new Date(864e13);return function(t,n){return new Date(t.due||e)-new Date(n.due||e)}}if(t.hasClass("descending")){e=new Date(-864e13);return function(t,n){return new Date(n.due||e)-new Date(t.due||e)}}return null}function d(t,e,n){n||(n=function(t,e){return t.index-e.index}),e||(e=n,n=function(t,e){return t.index-e.index}),t.sort((function(t,r){return e(t,r)||n(t,r)}))}function h(t){var e=$(this).closest(".clause");if(e.find('input[type="text"]:not(.optional):visible').filter((function(){return!this.value})).addClass("error").off("focus").focus((function(){$(this).removeClass("error")})).length)return!1;var n=sanitize(Builder.collectPhrase(e[0],!0)),r=Builder.collectSchema(e[0]);if(r.auto_or){var o=!0;$(".batch-card-filter .filters").children().each((function(){return!($(this).data("schema")||{})[r.auto_or]||(o=!1)})),o||(r.or=!0)}var i=$('<div class="ui label"><span class="andor">'+(r.or?"or":"and")+"</span> "+n+'<a class="builder-delete"><i class="delete icon"></i></a>');return $(".batch-card-filter .filters").append(i),i.data("schema",r),i.click((function(){var e=$(this).data("schema");return e.or=!e.or,$(this).find(".andor").text(e.or?"or":"and"),p(t),!1})),i.find(".delete.icon").click((function(){return i.remove(),$(".batch-card-filter .filters").children().length||$(".batch-card-filter .default.text").transition("show"),p(t),!1})),$(".batch-card-filter .default.text").transition("hide"),$(".batch-card-filter").popup("hide"),p(t),!1}function p(t){var e=[],n=[];$(".batch-card-filter .filters").children().each((function(){var t=$(this).data("schema");e.push(t),n.push(function(t){var e=function(e){return t.not?function(){return!e.apply(this,arguments)}:e};if(t.list)return e((function(e){return e.list.name==t.list}));if(t.label){var n=t.label.match(/^(\w+)? ?(?:"(.*)")?$/),r=n[1]||"",o=n[2]||"";return e((function(t){return t.labels.some((function(t){return(t.color||"")==r&&(t.name||"")==o}))}))}if(t.no_labels)return e((function(t){return 0==t.labels.length}));if(t.member)return e((function(e){return e.members.some((function(e){e.username,t.member}))}));if(t.text)return e((function(e){var n=e[t.field],r=n.toLowerCase().indexOf(t.text.toLowerCase());return-1!=r&&(!(t.start&&r>0)&&!(t.end&&r+t.text<n.length))}));throw new Error("Unknown schema: "+JSON.stringify(t))}(t))})),e.length?t.forEach((function(t){t.filtered=!n.map((function(e){return e(t)})).reduce((function(t,n,r){return e[r].or?t||n:t&&n}),!e[0].or)})):t.forEach((function(t){t.filtered=!1})),a(t)}}()},function(t,e,n){var r=n(342),o=n(61),i={buttonItem:function(t,e,n){return $('\n    <div id="'.concat(o.sanitize(t.id),'" class="ui grid transition hidden command">\n      <div class="two column paddingless row">\n        <div class="flex paddingless column">\n          <div class="ui labeled icon limited button">\n            <i class="').concat(o.sanitize(t.icon),'"></i>\n            ').concat(o.sanitize(t.label||""),'\n          </div>\n          <div class="command-btns">\n            <div class="ui transparent icon button edit-command-btn').concat(e||!t.is_own?" disabled":"",'" \n              tabindex="0" \n              alt="Edit"\n              data-tooltip="Edit" \n            >\n              <img class="icon" src="img/edit.svg"></img>\n            </div> \n            <div class="ui transparent icon button copy-command-btn').concat(e?" disabled":"",'" \n              tabindex="0" \n              alt="Copy" \n              data-tooltip="Copy" \n            >\n              <img class="icon" src="img/copy.svg"></img>\n            </div> \n            <div class="ui transparent icon button remove-command-btn').concat(t.is_own||n?"":" disabled",'" \n              tabindex="0" \n              alt="Remove" \n              data-tooltip="Remove" \n            >\n              <img class="icon" src="img/trash.svg"></img>\n            </div> \n            <div class="ui transparent icon button command-log-btn" \n              tabindex="0" \n              alt="Command Log" \n              data-tooltip="Command Log" \n            >\n              <img class="icon" src="img/lightbulb.svg"></img>\n            </div> \n          </div>\n        </div>\n        <div class="column right aligned modified-by-container">\n          <div class="modified-by"></div>\n        </div>\n      </div>\n      <div class="one column paddingless row"> \n        <div class="column code-area">').concat(o.sanitize(t.cmd),'</div> \n      </div>\n      <div class="one column paddingless row"> \n        <div class="left aligned">\n          <div class="ui checkbox sharing-btns').concat(e?" disabled":"",'" \n          > \n            <input type="checkbox" \n              class="enable-command-tgl"').concat(t.enabled?" checked":"",'\n            >\n            <label>Enabled on this board</label> \n          </div> \n          <span class="sharing-btns-divider"></span> \n          <div class="ui checkbox sharing-btns"> \n            <input type="checkbox" \n              class="scope-command-tgl"').concat(t.scope===r.ScopeTeam?" checked":"").concat(t.is_own?"":" disabled",'\n            >\n            <label>Enabled on all boards on this team</label> \n          </div> \n          <span class="sharing-btns-divider"></span> \n          <div class="ui checkbox sharing-btns"> \n            <input type="checkbox" \n              class="share-command-tgl"').concat(t.shared?" checked":"").concat(t.is_own?"":" disabled","\n            >\n            <label>Shared with team</label> \n          </div>\n        </div> \n      </div>\n    </div>\n  "))},commandItem:function(t,e,n,r){var i;return i='\n  <div>\n    <a class="ui top left label '.concat(!1!==e?"":"unclickable ",'command-lib-name"> \n      <i class="tag icon"></i> \n      <span class="text">').concat(o.sanitize(t.lib||""),"</span> \n    </a> \n  </div>\n  "),$('<div id="'.concat(o.sanitize(t.id),'" class="ui grid transition hidden command">\n      <div class="two column paddingless row">\n        <div class="flex paddingless column">\n          ').concat(i,'\n          <div class="command-btns">\n            ').concat("schedule"===t.type&&!1!==e?'<div class="ui transparent icon button run-command-btn" \n                  tabindex="0" \n                  alt="Run Now" \n                  data-tooltip="Run Now" \n                >\n                  <i class="rocket icon"></i>\n                </div>':"","\n            ").concat(!1!==e?'<div class="ui transparent icon button edit-command-btn'.concat(n||!t.is_own?" disabled":"",'" \n                  tabindex="0" \n                  alt="Edit" \n                  data-tooltip="Edit" \n                >\n                  <img class="icon" src="img/edit.svg"></img>\n                </div> \n                <div class="ui transparent icon button copy-command-btn').concat(n?" disabled":"",'" \n                  tabindex="0" \n                  alt="Copy" \n                  data-tooltip="Copy" \n                >\n                  <img class="icon" src="img/copy.svg"></img>\n                </div> \n                <div class="ui transparent icon button remove-command-btn').concat(t.is_own||r?"":" disabled",'" \n                  tabindex="0" \n                  alt="Remove" \n                  data-tooltip="Remove" \n                >\n                  <img class="icon" src="img/trash.svg"></img>\n                </div>'):"",'\n            <div class="ui transparent icon button command-log-btn" \n              tabindex="0" \n              alt="Command Log" \n              data-tooltip="Command Log" \n            >\n              <img class="icon" src="img/lightbulb.svg"></img>\n            </div>\n          </div>\n        </div>\n        <div class="column right aligned modified-by-container">\n          <div class="modified-by"></div>\n        </div>\n      </div>\n      <div class="one column paddingless row"> \n        <div class="column code-area">').concat(o.sanitize(t.cmd),'</td> \n      </div>\n      <div class="one column paddingless row"> \n        <div class="column right aligned">\n          <div class="ui checkbox sharing-btns').concat(n?" disabled":"",'" > \n            <input type="checkbox" class="enable-command-tgl"').concat(t.enabled?" checked":"",">\n            <label>Enabled on this board</label> \n          </div>\n        </div>\n      </div>\n    </div>\n  "))},actionOutput:function(t,e){var n=e.replace(/\\"/g,"__QUOTE__").split('"').map((function(t,e,n){if(t=o.sanitize(t.replace(/__QUOTE__/g,'"')),e%2==0)return'<div class="action-output-text">'.concat(t,"</div>");var r="";return e===n.length-2&&(r='style="margin-bottom: 8px";')," list "===n[e-1].slice(-6)?'<div class="ui search"><input class="quoted-value prompt" type="text" name="list-name" value="'.concat(t,'" placeholder="').concat(t,'" ').concat(r,"></div>"):" board "===n[e-1].slice(-7)?'<div class="ui search"><input class="quoted-value prompt" type="text" name="board-name" value="'.concat(t,'" placeholder="').concat(t,'" ').concat(r,"></div>"):'<textarea class="quoted-value" type="text" placeholder="'.concat(t,'" rows="1" ').concat(r,">").concat(t,"</textarea>")})).join(""),r=e.match(/^copy each|move each/);return $('\n    <div class="ui grid item'.concat(t?"":" transition hidden").concat(r?" implicit-multiplier":"",'">\n      <div class="paddingless row">\n        <div class="thirteen wide column content output-phrase">').concat(n,'</div>\n        <div class="three wide column right floated content output-side right">\n          <div class="ui translucent icon button remove-action-btn" \n            tabindex="0"\n          >\n            <i class="trash icon"></i>\n          </div>\n          <div class="ui translucent icon button move-up-action-btn').concat(r?" disabled":"",'"\n            tabindex="0"\n          >\n            <i class="arrow up icon"></i>\n          </div>\n        </div>\n      </div>\n    </div>\n  '))},triggerOutput:function(t){return $('\n    <div class="ui grid item">\n      <div class="thirteen wide column content output-phrase trigger-output-text">'.concat(o.sanitize(t),'</div>\n      <div class="three wide column right floated content output-side right">\n        <div class="ui translucent icon button remove-trigger-btn" \n          tabindex="0"\n        >\n          <i class="trash icon"></i>\n        </div>\n      </div>\n    </div>\n  '))}};t.exports=i},function(t,e,n){var r,o=n(99),i=n(366),a=n(46),s=n(345),c=n(344).showTab,u=n(61),l=o.Auth;function f(){c("usage"),l.authorize().then((function(){var t,e,n,r,o;s.refreshUserPlan(TrelloPowerUp.iframe({targetOrigin:"https://trello.com"})),t=$("#butler-powerup-log"),e=$(t).find(".loading-log"),n=$(t).find(".more.button"),r=$(t).find(".no-more.button"),o=e.siblings(".error-loading-log"),t.find(".command-log").empty(),function i(s){e.transition("show"),n.transition("hide"),r.transition("hide"),o.transition("hide"),t.find(".no-more-entries").hide(),l.authorize().then((function(){$.ajax("".concat(a,"powerup-user-log?before=").concat(s),{type:"GET",headers:{"X-Butler-Trello-Token":l.getActiveToken()}}).done((function(a){if(e.transition("hide"),a.success)if(a.response.log.length){var c=t.find(".command-log");a.response.log.forEach((function(t){var e=t.output;if("string"!=typeof e){var n=(e||[]).map((function(t){var e='<div class="item">';switch(t.type){case"ERROR":e+='<i class="red warning circle icon"></i>';break;case"WARNING":e+='<i class="yellow warning circle icon"></i>';break;case"MESSAGE":e+='<i class="blue info circle icon"></i>'}return e+='<div class="content">'.concat(u.markdownToHtml(t.message),"</div>"),e+="</div>"})).join("")||'<div class="item"><i class="blue info circle icon"></i><div class="content">No details.</div></div>';c.append('<tr><td><div class="ui list"><div class="item"><small>'+moment(t.t).format("LLLL")+"</small></div>"+n+"</div></td></tr>"),s=t.t}})),c.find(".content a").attr("target","_blank"),n.transition("show").off("click").click((function(){i(s)}))}else n.transition("hide"),r.transition("show");else o.transition("show"),$(t).find(".retry-btn").off("click").click((function(){return i(s),!1}))})).fail((function(){e.transition("hide"),o.transition("show")}))}))}((new Date).toISOString())}))}function d(t,e){if(e?$(".butler-alt-account").transition("show"):$(".butler-alt-account").transition("hide"),t.managed_by)return o.getMember(t.managed_by).then((function(t){$(".butler-account-managed-by").text("".concat(t.fullName," (@").concat(t.username,")")),$(".butler-account-managed").transition("scale up")})).catch((function(){$(".butler-account-loading-error").transition("scale up")}));t.cancel_at_period_end?($(".butler-cancel-subscription").transition("hide"),$(".butler-cancel-scheduled-date").text(moment(t.current_period_end).format("LLL")),$(".butler-cancel-scheduled").transition("show")):($(".butler-cancel-subscription").transition("show").off("click").click((function(){var e,n,o;e=t.customer_id,(o=$("#butler-cancel-subscription-modal")).find(".status").transition("hide"),o.find(".actions .cancel.button").removeClass("disabled"),o.find(".ui.checkbox").checkbox("uncheck").checkbox({onChecked:function(){n=$(this).siblings("label").text(),o.find(".actions .ok.button").removeClass("disabled")}}),o.modal({onApprove:function(){return o.find(".error.status").transition("hide"),o.find(".sending.status").transition("show"),o.find(".actions .button").addClass("disabled"),$.ajax("".concat(a,"stripe-cancel").concat(r),{type:"POST",headers:{"X-Butler-Trello-Token":l.getActiveToken()},data:JSON.stringify({customer_id:e,reason:n,comments:o.find(".comments").val()}),contentType:"application/json"}).done((function(t){o.find(".sending.status").transition("hide"),t.success?(o.find(".success.status").transition("scale up"),setTimeout((function(){o.modal("hide")}),1e3),h()):(o.find(".error.status").transition("scale up"),o.find(".actions .button").removeClass("disabled"))})).fail((function(){o.find(".sending.status").transition("hide"),o.find(".error.status").transition("show"),o.find(".actions .button").removeClass("disabled")})),!1}}),o.modal("show")})),$(".butler-cancel-subscription-earlier").transition(moment(t.current_period_end)>moment().add(30,"d")?"show":"hide"),$(".butler-cancel-scheduled").transition("hide")),$(".butler-payment-source").text(t.source),$(".butler-payment").transition("scale up");var n=(t.invoices||[]).map((function(t){return'<div class="item"><a href="'+a+"stripe-invoice/"+t.id+r+'" target="_blank">'+moment(t.date).format("LL")+"</a></div>"})).join("\n");$(".butler-invoice-menu").html(n),t.upcoming_invoice?($(".butler-upcoming-invoice-date").text(moment(t.upcoming_invoice.date).format("LL")),$(".butler-upcoming-invoice").transition("show")):$(".butler-upcoming-invoice").transition("hide"),$(".butler-invoices").transition("scale up")}function h(){$(".butler-payment,.butler-invoices,.butler-alt-account,.butler-account-loading-error").transition("hide"),$(".butler-account-loading").transition("show"),c("account"),l.authorize().then((function(){s.refreshUserPlan(TrelloPowerUp.iframe({targetOrigin:"https://trello.com"})),$.ajax("".concat(a,"stripe-account").concat(r),{type:"GET",headers:{"X-Butler-Trello-Token":l.getActiveToken()}}).done((function(t){$(".butler-account-loading").transition("hide"),t.success?t.response.org_account?d(t.response.org_account,t.response.user_account):t.response.user_account&&d(t.response.user_account):$(".butler-account-loading-error").transition("scale up")})).fail((function(){$(".butler-account-loading").transition("hide"),$(".butler-account-loading-error").transition("scale up")}))}))}function p(){c("integrations"),l.authorize().then((function(){i.getUserIntegrations().then((function(t){$(".integration-disconnected").transition("show"),$(".integration-connected").transition("hide"),t.forEach((function(t){$('.integration-connected[data-app-name="'.concat(u.sanitize(t.appName),'"]')).transition("show"),$('.integration-disconnected[data-app-name="'.concat(u.sanitize(t.appName),'"]')).transition("hide");var e=$('.integration-description[data-app-name="'.concat(u.sanitize(t.appName),'"]'));e.transition("hide"),i.handleAction(t.appName,"describe",t.appData).then((function(t){t&&e.html(u.markdownToHtml(t)).transition("show")}))})),$(".integration-action").off("click").click((function(t){var e=$(t.target).closest(".integration-action"),n=e.attr("data-app-name"),r=e.attr("data-verb");i.handleAction(n,r).then(p).catch((function(t){Sentry.captureException(t),window._trello.alert({display:"error",duration:10,message:"App connection failed. Please retry."})}))}))}))}))}r="";var g={init:function(){switch(i.init(),$('.dashboard-tabs .item[data-tab="tab-usage"]').click((function(){f()})),$('.dashboard-tabs .item[data-tab="tab-account"]').click((function(){h()})),$('.dashboard-tabs .item[data-tab="tab-upgrade"]').click((function(){c("upgrade")})),$('.dashboard-tabs .item[data-tab="tab-integrations"]').click((function(){p()})),(window.location.search.match(/tab=([a-zA-Z]*)/)||[])[1]){case"account":h();break;case"upgrade":c("upgrade");break;case"integrations":p();break;default:f()}$(".help-popup").click((function(){return!1})).each((function(t,e){var n=$(e),r=n.attr("data-popup-selector"),o=r?$(r):n.next(".ui.popup");n.popup({on:"click",popup:o,target:!!n.length&&n,position:"top center",lastResort:"bottom center",hoverable:!1})})),$(".close-popup").off("click").click((function(t){$(t.target).closest(".popup").popup("hide all")})),$(".close-modal").off("click").click((function(t){$(t.target).closest(".modal").modal("hide")}))}};window.AccountDashboard=g,t.exports=g},function(t,e,n){var r=n(367),o=n(46),i=TrelloPowerUp.Promise,a={},s=TrelloPowerUp.util.makeErrorEnum("Integration",["Unknown"]),c=!1,u=function(t,e){if(a.hasOwnProperty(t)&&console.error("App already registered",t),"function"!=typeof e)throw new Error("Invalid handler for ".concat(t,": ").concat(JSON.stringify(e)));a[t]={handler:e}},l=function(t,e){return new i((function(n,r){$.ajax("".concat(o,"integration-connect"),{type:"POST",data:JSON.stringify({appName:t,data:e}),contentType:"application/json",headers:{"X-Butler-Trello-Token":Auth.getActiveToken()}}).done((function(t){if(t.success)n(t.response);else{var e=new s.Unknown(t.error);Sentry.captureException(e),r(e)}})).fail((function(t){return Sentry.captureMessage("Integration connect request failed: ".concat(t.status," - ").concat(t.statusText)),r(new s.Unknown(t.responseText)),!1}))}))};t.exports={init:function(){c||(c=!0,r.registerApps(u))},getUserIntegrations:function(){return new i((function(t,e){$.ajax("".concat(o,"integrations"),{type:"GET",headers:{"X-Butler-Trello-Token":Auth.getActiveToken()}}).done((function(n){if(n.success)t(n.response);else{var r=new s.Unknown(n.error);Sentry.captureException(r),e(r)}})).fail((function(t){return Sentry.captureMessage("Get user integrations failed: ".concat(t.status," - ").concat(t.statusText)),e(new s.Unknown(t.responseText)),!1}))}))},handleAction:function(t,e,n){var r=a[t];if(!r)return new i((function(e,n){return n('Unknown app "'.concat(t,'"'))}));var o={t:window._trello||TrelloPowerUp.iframe({targetOrigin:"https://trello.com"}),params:n,submitIntegrationConnectRequest:l.bind(null,t)};return new i((function(t){return t(r.handler(e,o))}))}}},function(t,e){function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var r=function(t,e){switch(t){case"describe":return o(e);case"connect":return i(e)}console.error("Unknown verb: ".concat(t))},o=function(t){return"Connected sites: "+t.params.accessibleResources.map((function(t){return"`".concat(t.name,"`")})).join(", ")},i=function(t){var e,r=t.t;return Auth.getToken(r).then((function(t){if(!t)throw new Error("ATLASSIAN OAUTH: NO TRELLO TOKEN");var e=TrelloPowerUp.util.crypto,n=[];return e.generateInitVector().forEach((function(t){return n.push(("0"+t.toString(16)).substr(-2))})),e.sha256Digest("".concat(n.join(""),":").concat(r.getContext().member,":").concat(t))})).then((function(t){e=t;document.location.href;var n="https://auth.atlassian.com/authorize?audience=api.atlassian.com&client_id=".concat("Rq68656i5qnlpdrS2jnBxi02Mjt1In8c","&scope=").concat(encodeURIComponent(["read:jira-user","read:jira-work","write:jira-work","offline_access"].join(" ")),"&redirect_uri=").concat(encodeURIComponent("https://app.butlerfortrello.com/internal/powerup-oauth-atlassian.html"),"&state=").concat(e,"&response_type=code&prompt=consent");return r.authorize(n,{})})).then((function(r){var o=n(r.split(":"),2),i=o[0];if(o[1]!==e)throw new Error("ATLASSIAN OAUTH: STATUS MISMATCH");return t.submitIntegrationConnectRequest({code:i})}))},a=function(t){$(".oauth-atlassian-status").addClass("hidden"),$(".oauth-atlassian-status.status-".concat(t)).removeClass("hidden")};t.exports={registerApps:function(t){t("JIRA",r)}},window.AtlassianOAuthCallback=function(){var t=(window.location.search.match(/[?&]code=([-_a-zA-Z0-9]*)/)||[])[1],e=(window.location.search.match(/[?&]state=([a-fA-F0-9]*)/)||[])[1];if(t){a("requesting");var n="".concat(t,":").concat(e);try{window.opener.authorize(n)}catch(t){try{localStorage.setItem("token",n)}catch(t){throw a("error"),new Error("ATLASSIAN OAUTH: CANNOT RETURN CODE")}}a("success"),setTimeout(window.close,1e3)}else a("error")}}]);
//# sourceMappingURL=powerup.js.map